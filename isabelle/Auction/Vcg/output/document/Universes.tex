%
\begin{isabellebody}%
\def\isabellecontext{Universes}%
%
\isamarkupheader{Sets of injections, partitions, allocations expressed as suitable subsets of the corresponding universes%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Universes\isanewline
\isanewline
\isakeyword{imports}\ \isanewline
{\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Code{\isacharunderscore}Target{\isacharunderscore}Nat{\isachardoublequoteclose}\isanewline
StrictCombinatorialAuction\ \isanewline
{\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Indicator{\isacharunderscore}Function{\isachardoublequoteclose}\isanewline
\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isamarkupsection{Preliminary lemmas%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}Y\ {\isasymin}\ set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}alg\ X{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}distinct\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ distinct{\isacharunderscore}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ all{\isacharunderscore}partitions{\isacharunderscore}alg{\isacharunderscore}def\ all{\isacharunderscore}partitions{\isacharunderscore}equivalence{\isacharprime}\isanewline
\isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}all{\isacharunderscore}partitions\ G\ \ {\isacharequal}\ \ set\ {\isacharbackquote}\ {\isacharparenleft}set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}alg\ G{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ sortingSameSet\ all{\isacharunderscore}partitions{\isacharunderscore}alg{\isacharunderscore}def\ all{\isacharunderscore}partitions{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distinct{\isacharunderscore}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ image{\isacharunderscore}set\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{Definitions of various subsets of \isa{UNIV}.%
}
\isamarkuptrue%
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}isChoice\ R\ {\isacharequal}{\isacharequal}\ {\isasymforall}x{\isachardot}\ R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymsubseteq}\ x{\isachardoublequoteclose}\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionsUniverse\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}X{\isachardot}\ is{\isacharunderscore}non{\isacharunderscore}overlapping\ X{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionsUniverse\ {\isasymsubseteq}\ Pow\ UNIV{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \ \ \ \ \ \ \isanewline
%
\endisadelimproof
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionValuedUniverse\ {\isacharequal}{\isacharequal}\ {\isasymUnion}\ P\ {\isasymin}\ partitionsUniverse{\isachardot}\ Pow\ {\isacharparenleft}UNIV\ {\isasymtimes}\ P{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionValuedUniverse\ {\isasymsubseteq}\ Pow\ {\isacharparenleft}UNIV\ {\isasymtimes}\ {\isacharparenleft}Pow\ UNIV{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}injectionsUniverse\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}R{\isachardot}\ {\isacharparenleft}runiq\ R{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}runiq\ {\isacharparenleft}R{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}allocationsUniverse\ {\isacharequal}{\isacharequal}\ injectionsUniverse\ {\isasyminter}\ partitionValuedUniverse{\isachardoublequoteclose}\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}totalRels\ X\ Y\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}R{\isachardot}\ Domain\ R\ {\isacharequal}\ X\ {\isacharampersand}\ Range\ R\ {\isasymsubseteq}\ Y{\isacharbraceright}{\isachardoublequoteclose}%
\isamarkupsection{Results about the sets defined in the previous section%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}\ x{\isadigit{1}}\ {\isasymin}\ X{\isachardot}\ {\isacharparenleft}x{\isadigit{1}}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharparenleft}{\isasymforall}\ x{\isadigit{2}}\ {\isasymin}\ X{\isacharminus}{\isacharbraceleft}x{\isadigit{1}}{\isacharbraceright}{\isachardot}\ x{\isadigit{1}}\ {\isasyminter}\ x{\isadigit{2}}\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x\ {\isasymin}\ X{\isachardot}\ f\ x\ {\isasymin}\ x{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}isChoice\ {\isacharparenleft}graph\ X\ f{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}within{\isacharunderscore}domain{\isacharprime}\ empty{\isacharunderscore}subsetI\ insert{\isacharunderscore}subset\ graphEqImage\ domainOfGraph\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runiq{\isacharunderscore}wrt{\isacharunderscore}eval{\isacharunderscore}rel\ subset{\isacharunderscore}trans{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}injections\ {\isacharequal}\ injections{\isacharprime}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}injections{\isacharprime}\ X\ Y\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{5}}b{\isacharcolon}\ {\isachardoublequoteopen}injections\ X\ Y\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}injections{\isacharprime}\ X\ Y\ {\isacharequal}\ totalRels\ X\ Y\ {\isasyminter}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{7}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ {\isachardoublequoteopen}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Range\ a{\isacharparenright}\ partitions\ G\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Domain\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ all{\isacharunderscore}partitions{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{0}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ XX{\isachardoublequoteclose}\ {\isachardoublequoteopen}YY\ {\isasymsubseteq}\ XX{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}XX\ {\isacharminus}\ YY{\isacharparenright}\ partitions\ {\isacharparenleft}{\isasymUnion}\ XX\ {\isacharminus}\ {\isasymUnion}\ YY{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}xx{\isacharequal}{\isachardoublequoteopen}XX\ {\isacharminus}\ YY{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}X{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ XX{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Y{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ YY{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}x{\isacharequal}{\isachardoublequoteopen}{\isacharquery}X\ {\isacharminus}\ {\isacharquery}Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ y\ {\isasymin}\ YY{\isachardot}\ {\isasymforall}\ x{\isasymin}{\isacharquery}xx{\isachardot}\ y\ {\isasyminter}\ x{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}iff\ set{\isacharunderscore}rev{\isacharunderscore}mp{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharquery}xx\ {\isasymsubseteq}\ {\isacharquery}x{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharquery}xx\ {\isacharequal}\ {\isacharquery}x{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ {\isacharquery}xx{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subset{\isacharunderscore}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}subset\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}a{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ a\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runiq\ {\isacharparenleft}a{\isasyminverse}{\isacharparenright}\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Domain\ a{\isacharparenright}\ partitions\ G\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Range\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ Y\ \isakeyword{where}\isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ Y\ N\ {\isacharampersand}\ Y\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ injections{\isacharunderscore}def\ all{\isacharunderscore}partitions{\isacharunderscore}def\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ a{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}a{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}Domain\ a{\isacharparenright}\ partitions\ G{\isachardoublequoteclose}\ {\isachardoublequoteopen}Range\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ N{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \ assms{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ all{\isacharunderscore}partitions{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymlongleftrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runiq\ a\ {\isacharampersand}\ runiq\ {\isacharparenleft}a{\isasyminverse}{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ partitions\ G\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}a\ lll{\isadigit{8}}{\isadigit{1}}b\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharprime}\ G\ N\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ {\isacharparenleft}Range\ a{\isacharparenright}\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}injections\ X\ Y\ {\isacharequal}\ injections{\isacharprime}\ X\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}all{\isacharunderscore}partitions\ X\ {\isacharequal}\ all{\isacharunderscore}partitions{\isacharprime}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ all{\isacharunderscore}partitions{\isacharunderscore}def\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharprime}\ A\ B\ \ {\isacharequal}\ \ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ A\ B{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}A{\isacharequal}{\isacharquery}B{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}B{\isacharequal}{\isasymUnion}\ {\isacharbraceleft}\ injections\ Y\ B\ {\isacharbar}\ Y\ {\isachardot}\ Y\ {\isasymin}\ all{\isacharunderscore}partitions\ A\ {\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}A{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{7}}a{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymsubseteq}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Range\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{9}}\ lm{\isadigit{1}}{\isadigit{0}}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{7}}b{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymsupseteq}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ N{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{7}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ \ \ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ N{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{7}}a\ lm{\isadigit{1}}{\isadigit{7}}b\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}converse\ {\isacharbackquote}\ injectionsUniverse\ {\isacharequal}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{8}}{\isacharcolon}\ {\isachardoublequoteopen}converse{\isacharbackquote}{\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}\ \ {\isacharequal}\ \ {\isacharparenleft}converse{\isacharbackquote}A{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}converse{\isacharbackquote}B{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}A{\isacharequal}{\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}c{\isacharequal}converse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}injectionsUniverse\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}{\isachardoublequoteopen}all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}c{\isacharbackquote}{\isacharquery}A\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}c{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasyminter}\ {\isacharquery}c{\isacharbackquote}\ {\isacharparenleft}{\isacharbraceleft}a{\isachardot}\ {\isacharquery}r\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharquery}d\ a\ {\isasymin}\ {\isacharquery}P{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}c{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasyminter}\ {\isacharbraceleft}aa{\isachardot}\ {\isacharquery}d\ aa\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharquery}r\ aa\ {\isasymin}\ {\isacharquery}P{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}I\ {\isasyminter}\ {\isacharbraceleft}aa{\isachardot}\ {\isacharquery}d\ aa\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharquery}r\ aa\ {\isasymin}\ {\isacharquery}P{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{8}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ partitionValuedUniverse{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{7}}\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{8}}\ lm{\isadigit{4}}{\isadigit{9}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ mono{\isacharunderscore}tags{\isacharparenright}\ inf{\isachardot}bounded{\isacharunderscore}iff{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}c{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}a\ {\isasymin}\ injectionsUniverse\ {\isacharampersand}\ Domain\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}\ Int{\isacharunderscore}Collect\ Int{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N{\isadigit{1}}\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}N{\isadigit{1}}\ {\isasymunion}\ N{\isadigit{2}}{\isacharparenright}\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ a\ {\isasymsubseteq}\ N{\isadigit{1}}\ {\isasymunion}\ N{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ le{\isacharunderscore}supI{\isadigit{1}}{\isacharparenright}\ \isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}b{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N{\isadigit{1}}\ G\ {\isasymsubseteq}\ possibleAllocationsRel\ {\isacharparenleft}N{\isadigit{1}}\ {\isasymunion}\ N{\isadigit{2}}{\isacharparenright}\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}d\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ subsetI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ P{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ P{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ P{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ P{\isadigit{2}}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}X\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}Y\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasyminter}\ Y\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharequal}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}e{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ P{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ P{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ P{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ P{\isadigit{2}}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}X\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}Y\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharequal}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}X\ {\isasyminter}\ Y\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}{\isacharcolon}\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ P{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ P{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ P{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ P{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ {\isacharparenleft}P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{0}}d\ lm{\isadigit{2}}{\isadigit{0}}e\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}Range\ Q\ {\isasymunion}\ {\isacharparenleft}Range\ {\isacharparenleft}P\ outside\ {\isacharparenleft}Domain\ Q{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ Range\ {\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ paste{\isacharunderscore}def\ Range{\isacharunderscore}Un{\isacharunderscore}eq\ Un{\isacharunderscore}commute\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{7}}{\isadigit{7}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}a{\isadigit{2}}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}Range\ a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Range\ a{\isadigit{2}}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}Domain\ a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Domain\ a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymunion}\ a{\isadigit{2}}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ disj{\isacharunderscore}Un{\isacharunderscore}runiq\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ Domain{\isacharunderscore}converse\ converse{\isacharunderscore}Un\ mem{\isacharunderscore}Collect{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{2}}{\isacharcolon}\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}R\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ {\isacharparenleft}Range\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ P\ \isakeyword{where}\isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymin}\ partitionsUniverse\ {\isacharampersand}\ R\ {\isasymsubseteq}\ UNIV\ {\isasymtimes}\ P{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Range\ R\ {\isasymsubseteq}\ P{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ subset{\isacharunderscore}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isadigit{2}}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}Domain\ a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Domain\ a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymunion}\ a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isacharequal}{\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymunion}\ a{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}a{\isadigit{1}}{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}a{\isadigit{2}}{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}injectionsUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}partitionsUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}PV{\isacharequal}partitionValuedUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isacharequal}{\isachardoublequoteopen}{\isacharquery}a{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}non{\isacharunderscore}overlapping\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{then}\isamarkupfalse%
\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{2}}{\isadigit{0}}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}\ {\isasymin}\ {\isacharquery}P{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}\ assms\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a\ {\isasymin}\ {\isacharquery}PV{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}\ {\isasymsubseteq}\ Pow\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}empty{\isacharunderscore}left{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{2}}\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a\ {\isasymin}\ {\isacharquery}I{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lll{\isadigit{7}}{\isadigit{7}}c\ assms\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{7}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isacharminus}\ b\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}\ Diff{\isacharunderscore}subset\ converse{\isacharunderscore}mono\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ subrel{\isacharunderscore}runiq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{0}}b{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymsubseteq}\ N\ \ \ \ {\isacharampersand}\ \ \ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}\ {\isacharequal}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Domain\ {\isacharminus}{\isacharbackquote}{\isacharparenleft}Pow\ N{\isacharparenright}{\isacharparenright}\ \ {\isasyminter}\ \ {\isacharparenleft}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}all{\isacharunderscore}partitions\ G{\isacharparenright}{\isacharparenright}\ {\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ injectionsUniverse\ {\isasyminter}\ {\isacharparenleft}{\isacharparenleft}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}all{\isacharunderscore}partitions\ G{\isacharparenright}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Domain\ {\isacharminus}{\isacharbackquote}{\isacharparenleft}Pow\ N{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}\ lm{\isadigit{3}}{\isadigit{0}}b\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ Int{\isacharunderscore}commute{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ injectionsUniverse\ {\isasyminter}\ {\isacharparenleft}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}all{\isacharunderscore}partitions\ G{\isacharparenright}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Domain\ {\isacharminus}{\isacharbackquote}{\isacharparenleft}Pow\ N{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{0}}\ Int{\isacharunderscore}assoc\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}a{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ hide{\isacharunderscore}lams{\isacharparenright}\ lm{\isadigit{1}}{\isadigit{9}}c\ lm{\isadigit{4}}{\isadigit{7}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ image{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N\ \ {\isacharampersand}\ \ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}a\ lm{\isadigit{2}}{\isadigit{8}}c\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Domain\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ injections{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{9}}c\ order{\isacharunderscore}refl\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}e{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ lm{\isadigit{1}}{\isadigit{9}}c\ injections{\isacharunderscore}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}erased{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}b{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}\ \ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ Domain\ a\ {\isasymsubseteq}\ N{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}d\ lm{\isadigit{2}}{\isadigit{8}}e\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isacharminus}\ b\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ subset{\isacharunderscore}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isacharminus}\ b\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{7}}\ lm{\isadigit{3}}{\isadigit{2}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ injections{\isacharunderscore}def\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ order{\isacharunderscore}refl\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{4}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}all{\isacharunderscore}partitions\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ \isanewline
assms\ lm{\isadigit{2}}{\isadigit{2}}\ Int{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ a\ {\isasymin}\ {\isacharquery}P\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ all{\isacharunderscore}partitions{\isacharunderscore}def\ \isanewline
\isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ \isanewline
assms\ IntI\ Int{\isacharunderscore}lower{\isadigit{1}}\ equalityE\ lm{\isadigit{1}}{\isadigit{9}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ set{\isacharunderscore}rev{\isacharunderscore}mp\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharbraceleft}X{\isacharbraceright}\ {\isasymin}\ partitionsUniverse{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}b{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ X{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{7}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ X{\isacharparenright}{\isacharbraceright}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}basic\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}singleton{\isacharunderscore}rel\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ allocationUniverseProperty{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}X{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}b\ lm{\isadigit{3}}{\isadigit{7}}\ lm{\isadigit{2}}{\isadigit{7}}\ Int{\isacharunderscore}iff\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ PP{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ {\isacharparenleft}Union\ PP{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ {\isacharparenleft}Union\ {\isacharbackquote}\ PP{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}U\ PP{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}U\ {\isacharbackquote}\ PP{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}\ X{\isasymin}{\isacharquery}P{\isadigit{1}}{\isachardot}\ {\isasymforall}\ Y\ {\isasymin}\ {\isacharquery}P{\isadigit{1}}{\isachardot}\ {\isacharparenleft}X\ {\isasyminter}\ Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymlongrightarrow}\ X\ {\isasymnoteq}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ Int{\isacharunderscore}absorb\ \isanewline
Int{\isacharunderscore}empty{\isacharunderscore}left\ UnionI\ Union{\isacharunderscore}disjoint\ ex{\isacharunderscore}in{\isacharunderscore}conv\ imageE\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}hide{\isacharunderscore}lams{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ X\ Y\ \isacommand{assume}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isasymin}\ {\isacharquery}P{\isadigit{1}}\ {\isacharampersand}\ Y{\isasymin}{\isacharquery}P{\isadigit{1}}\ {\isacharampersand}\ X\ {\isasymnoteq}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ XX\ YY\ \isakeyword{where}\ \isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isacharequal}\ {\isacharquery}U\ XX\ {\isacharampersand}\ Y{\isacharequal}{\isacharquery}U\ YY\ {\isacharampersand}\ XX{\isasymin}PP\ {\isacharampersand}\ YY{\isasymin}PP{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}XX\ {\isasymsubseteq}\ Union\ PP\ {\isacharampersand}\ YY\ {\isasymsubseteq}\ Union\ PP\ {\isacharampersand}\ XX\ {\isasyminter}\ YY\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ {\isadigit{1}}\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ Sup{\isacharunderscore}upper\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ x{\isasymin}XX{\isachardot}\ {\isasymforall}\ y{\isasymin}YY{\isachardot}\ x\ {\isasyminter}\ y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ IntI\ empty{\isacharunderscore}iff\ subsetCE{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}X\ {\isasyminter}\ Y{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{0}}\ {\isadigit{1}}\ {\isadigit{2}}\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymUnion}\ {\isacharparenleft}Range\ {\isacharparenleft}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}partitionsUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Xi{\isacharequal}{\isachardoublequoteopen}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isacharequal}{\isachardoublequoteopen}{\isacharquery}Xi\ {\isasymtimes}\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}a\ {\isacharminus}\ {\isacharquery}b{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Yi{\isacharequal}{\isachardoublequoteopen}a{\isacharbackquote}{\isacharbackquote}{\isacharquery}Xi{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Y{\isacharequal}{\isachardoublequoteopen}{\isacharquery}U\ {\isacharquery}Yi{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}A{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isacharquery}Y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isadigit{3}}{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}A{\isadigit{2}}\ {\isacharminus}\ {\isacharquery}a{\isadigit{3}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharquery}Xi{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}c{\isacharequal}{\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}a{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}c\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{7}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U{\isacharparenleft}{\isacharquery}r{\isacharparenleft}{\isacharquery}a{\isadigit{1}}{\isasymunion}{\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharequal}{\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Range{\isacharunderscore}Un{\isacharunderscore}eq\ Union{\isacharunderscore}Un{\isacharunderscore}distrib{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U{\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharquery}Xi{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{have}\isamarkupfalse%
\isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}u\ a\ {\isacharampersand}\ {\isacharquery}u\ {\isacharparenleft}a{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasymsubseteq}\ {\isacharquery}r\ a\ {\isacharampersand}\ {\isacharquery}Yi\ {\isasymsubseteq}\ {\isacharquery}r\ a{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ Int{\isacharunderscore}iff\ lm{\isadigit{2}}{\isadigit{2}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ auto\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}p\ {\isacharquery}Yi{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subset{\isacharunderscore}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{by}\isamarkupfalse%
\ metis\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ {\isacharquery}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ allocationUniverseProperty\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{3}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}a{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymor}\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isasymlongrightarrow}\ {\isacharquery}t{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Un{\isacharunderscore}empty{\isacharunderscore}left\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}\ Un{\isacharunderscore}absorb{\isadigit{2}}\ empty{\isacharunderscore}subsetI{\isacharparenright}\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}a{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymor}\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isasymlongrightarrow}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isacharequal}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}a{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymor}\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isasymlongrightarrow}\ {\isacharquery}thesis{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\isanewline
\ \ \ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}{\isasymnoteq}{\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharquery}a{\isadigit{2}}{\isasymnoteq}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isasymsupseteq}{\isacharbraceleft}{\isacharquery}Y{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Diff{\isacharunderscore}cancel\ Range{\isacharunderscore}insert\ empty{\isacharunderscore}subsetI\ \isanewline
\ \ \ \ insert{\isacharunderscore}Diff{\isacharunderscore}single\ insert{\isacharunderscore}iff\ insert{\isacharunderscore}subset\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}hide{\isacharunderscore}lams{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ \ \ {\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isacharequal}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{2}}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasymsubseteq}\ a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}{\isacharquery}d\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}Yi\ {\isasyminter}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ {\isacharquery}Xi{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{0}}\ {\isadigit{1}}\ \isanewline
\ \ \ \ Diff{\isacharunderscore}disjoint\ intersectionEmptyRelationIntersectionEmpty\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ {\isacharquery}Yi\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharquery}Yi\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharbraceleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ \ \isanewline
IntI\ Int{\isacharunderscore}commute\ empty{\isacharunderscore}iff\ insert{\isacharunderscore}iff\ subsetI\ subset{\isacharunderscore}empty\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharbraceleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}\ {\isasymsubseteq}\ {\isacharquery}r\ a{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}U\ {\isacharbraceleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isachardoublequoteopen}{\isadigit{1}}{\isachardoublequoteclose}\ Outside{\isacharunderscore}def\ subset{\isacharunderscore}is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharparenright}\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}U{\isacharbackquote}{\isacharbraceleft}{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharbraceleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}{\isacharcomma}\ {\isacharquery}Y{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ x\ {\isasymin}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isachardot}\ {\isasymforall}\ y{\isasymin}{\isacharquery}Yi{\isachardot}\ x\ {\isasymnoteq}\ y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ IntI\ empty{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ x\ {\isasymin}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isachardot}\ {\isasymforall}\ y{\isasymin}{\isacharquery}Yi{\isachardot}\ x\ {\isasyminter}\ y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ {\isadigit{1}}\ {\isadigit{2}}\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ set{\isacharunderscore}rev{\isacharunderscore}mp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharquery}Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ unionIntersectionEmpty\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}v{\isadigit{0}}{\isachardot}\ v{\isadigit{0}}\ {\isasymin}\ Range\ {\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymtimes}\ Range\ a{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}v{\isadigit{1}}{\isachardot}\ v{\isadigit{1}}\ {\isasymin}\ a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymlongrightarrow}\ v{\isadigit{0}}\ {\isasyminter}\ v{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ {\isacharbackquoteopen}{\isasymforall}x{\isasymin}Range\ {\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymtimes}\ Range\ a{\isacharparenright}{\isachardot}\ {\isasymforall}y{\isasymin}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardot}\ x\ {\isasyminter}\ y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharbackquoteclose}{\isacharparenright}\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}Range\ {\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymtimes}\ Range\ a{\isacharparenright}\ {\isasyminter}\ {\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}d\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{3}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ allocationUniverseProperty\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
\ \ \ \ {\isacharquery}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\isanewline
\ \ \ \ {\isasymUnion}Range\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ {\isasymUnion}Range\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ Domain\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ Domain\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
{\isacharquery}t{\isadigit{1}}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{6}}\ {\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymUnion}{\isacharparenleft}Range{\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}Range\ {\isacharparenleft}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\isanewline
{\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
{\isasymUnion}\ {\isacharparenleft}Range\ {\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\isanewline
presburger\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ Int{\isacharunderscore}iff\ lm{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a{\isacharbackquote}{\isacharbackquote}X\ {\isasymsubseteq}\ {\isacharquery}r\ a{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ subset{\isacharunderscore}is{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a{\isacharbackquote}{\isacharbackquote}X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Union{\isacharunderscore}member\ all{\isacharunderscore}not{\isacharunderscore}in{\isacharunderscore}conv\ no{\isacharunderscore}empty{\isacharunderscore}in{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{5}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymUnion}{\isacharparenleft}Range{\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}{\isacharparenleft}Range{\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{have}\isamarkupfalse%
\ \isanewline
{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}t{\isadigit{1}}\ {\isacharampersand}\ {\isacharquery}t{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}b\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse\ {\isasymlongrightarrow}\ a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}b\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isachardoublequoteopen}{\isadigit{0}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isasymand}\ {\isasymUnion}Range\ {\isacharparenleft}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}Range\ a{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isadigit{0}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ lm{\isadigit{4}}{\isadigit{3}}b{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{5}}\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}bidMonotonicity\ b\ i\ {\isacharequal}{\isacharequal}\ {\isacharparenleft}{\isasymforall}\ t\ t{\isacharprime}{\isachardot}\ {\isacharparenleft}trivial\ t\ {\isacharampersand}\ trivial\ t{\isacharprime}\ {\isacharampersand}\ Union\ t\ {\isasymsubseteq}\ Union\ t{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\isanewline
setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}t{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}t{\isacharprime}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{6}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}bidMonotonicity\ b\ i{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ a{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ {\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharparenleft}a\ outside\ X{\isacharparenright}{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}R{\isacharequal}{\isachardoublequoteopen}a\ outside\ X{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Xi{\isacharequal}{\isachardoublequoteopen}X\ {\isasymunion}{\isacharquery}I{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharquery}I{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharquery}U\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharquery}Xi{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharquery}I{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharquery}I{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharquery}I{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharquery}t{\isadigit{1}}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharquery}t{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}u\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isasymsubseteq}\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}u\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subrel{\isacharunderscore}runiq\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharquery}t{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ runiq{\isacharunderscore}alt{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharquery}t{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ trivial{\isacharunderscore}singleton{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{9}}{\isacharcolon}\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}XX\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ Range\ XX{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ no{\isacharunderscore}empty{\isacharunderscore}in{\isacharunderscore}non{\isacharunderscore}overlapping\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{9}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ Range\ a{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{3}}{\isadigit{9}}\ lm{\isadigit{5}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{0}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}Range\ a\ {\isasymsubseteq}\ Pow\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{7}}\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ subset{\isacharunderscore}Pow{\isacharunderscore}Union{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{0}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}Domain\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ Pow\ G\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{0}}\ insert{\isacharunderscore}Diff{\isacharunderscore}single\ lm{\isadigit{3}}{\isadigit{9}}b\ subset{\isacharunderscore}insert\ lm{\isadigit{4}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{0}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymsubseteq}\ N\ {\isasymtimes}\ {\isacharparenleft}Pow\ G\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{0}}b\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{0}}e{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ Pow\ {\isacharparenleft}N{\isasymtimes}{\isacharparenleft}Pow\ G{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{0}}c\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ \ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}i\ {\isasymin}\ N{\isacharminus}X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}R{\isacharequal}{\isachardoublequoteopen}a\ outside\ X{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{5}}{\isadigit{0}}\ \ set{\isacharunderscore}rev{\isacharunderscore}mp\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}i\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharequal}\ {\isacharquery}d\ a\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharminus}\ X{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}aa{\isacharparenright}\ {\isacharequal}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{4}}{\isadigit{3}}c{\isacharparenright}\ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ {\isacharquery}aa{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ mono{\isacharunderscore}tags{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ {\isacharquery}aa\ {\isasymunion}\ {\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ \ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{1}}{\isadigit{9}}d{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharequal}\ {\isacharquery}d\ {\isacharquery}aa\ {\isasymunion}\ {\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ a\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharminus}\ X{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}d\ a\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharminus}\ X{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}N\ {\isacharminus}\ X{\isacharparenright}\ {\isacharequal}\ N\ {\isacharminus}\ X{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}N\ {\isacharminus}\ X{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}b\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}\ in{\isacharunderscore}mono{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}bidMonotonicity\ {\isacharparenleft}b{\isacharcolon}{\isacharcolon}{\isacharunderscore}\ {\isacharequal}{\isachargreater}\ real{\isacharparenright}\ i{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}finite\ a{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}a\ outside\ X{\isacharparenright}\ {\isasymle}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setsum\ b\ {\isacharparenleft}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}R{\isacharequal}{\isachardoublequoteopen}a\ outside\ X{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}u\ a{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isasymsubseteq}\ a\ {\isacharampersand}\ {\isacharquery}R{\isacharminus}{\isacharminus}i\ {\isasymsubseteq}\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}u\ {\isacharparenleft}{\isacharquery}R{\isacharminus}{\isacharminus}i{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}u\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ finite{\isacharunderscore}subset\ subrel{\isacharunderscore}runiq\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ assms{\isacharparenleft}{\isadigit{4}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}def\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ trivial{\isacharunderscore}cartesian\ trivial{\isacharunderscore}singleton{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}X{\isachardot}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}X{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ outside{\isacharunderscore}reduces{\isacharunderscore}domain\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isacharquery}R{\isacharminus}{\isacharminus}i{\isacharparenright}\ {\isacharampersand}\ finite\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ \isanewline
\ \ finite\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ trivial{\isacharunderscore}implies{\isacharunderscore}finite\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ outsideUnion{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}R\ {\isacharequal}\ setsum\ b\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isacharplus}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ setsum{\isachardot}union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}\ setsum{\isachardot}union{\isacharunderscore}disjoint{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{6}}\ \isanewline
\ \ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}R\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isacharplus}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ setsum\ b\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ setsum{\isachardot}union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ setsum\ b\ {\isacharquery}aa{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ outsideOutside{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}XX\ {\isasymin}\ all{\isacharunderscore}partitions\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}finite\ XX{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ all{\isacharunderscore}partitions{\isacharunderscore}def\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ finite{\isacharunderscore}UnionD\ mem{\isacharunderscore}Collect{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{8}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}finite\ a{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ finiteRelationCharacterization\ rev{\isacharunderscore}finite{\isacharunderscore}subset\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{2}}{\isadigit{8}}b\ lm{\isadigit{5}}{\isadigit{5}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{9}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}possibleAllocationsRel\ N\ G{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}Pow{\isacharparenleft}N{\isasymtimes}{\isacharparenleft}Pow\ G{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ finite{\isacharunderscore}Pow{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{0}}e\ rev{\isacharunderscore}finite{\isacharunderscore}subset\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}bidMonotonicity\ {\isacharparenleft}b{\isacharcolon}{\isacharcolon}{\isacharunderscore}\ {\isacharequal}{\isachargreater}\ real{\isacharparenright}\ i{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}i\ {\isasymin}\ N{\isacharminus}X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}finite\ N{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}Max\ {\isacharparenleft}{\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isacharparenright}\ {\isasymge}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setsum\ b\ {\isacharparenleft}a\ outside\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}bidMonotonicity\ {\isacharparenleft}b{\isacharcolon}{\isacharcolon}{\isacharunderscore}\ {\isacharequal}{\isachargreater}\ real{\isacharparenright}\ i{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ lm{\isadigit{5}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{5}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ metis\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}a\ outside\ X{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharquery}aa{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{5}}{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{5}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{7}}\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}aa\ {\isasymin}\ {\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ imageI{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{5}}{\isadigit{9}}\ assms{\isacharparenleft}{\isadigit{5}}{\isacharcomma}{\isadigit{6}}{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ finite{\isacharunderscore}Diff\ finite{\isacharunderscore}imageI{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}aa\ {\isasymle}\ Max\ {\isacharparenleft}{\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cardinalityPreservation{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ XX{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}X\ {\isasymin}\ XX{\isachardot}\ finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ XX{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}\ {\isacharequal}\ setsum\ card\ XX{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ card{\isacharunderscore}Union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{3}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}XX\ partitions\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ XX{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}\ {\isacharequal}\ setsum\ card\ XX{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cardinalityPreservation\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ familyUnionFiniteEverySetFinite{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ setsumUnionDisjoint{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}A{\isasymin}C{\isachardot}\ finite\ A{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}A{\isasymin}C{\isachardot}\ {\isasymforall}B{\isasymin}C{\isachardot}\ A\ {\isasymnoteq}\ B\ {\isasymlongrightarrow}\ A\ Int\ B\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ {\isacharparenleft}Union\ C{\isacharparenright}\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ C{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsum{\isachardot}Union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsumUnionDisjoint{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x{\isasymin}X{\isachardot}\ finite\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}non{\isacharunderscore}overlapping\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ {\isacharparenleft}{\isasymUnion}\ X{\isacharparenright}\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsumUnionDisjoint{\isadigit{1}}\ is{\isacharunderscore}non{\isacharunderscore}overlapping{\isacharunderscore}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsumUnionDisjoint{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x{\isasymin}X{\isachardot}\ finite\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ partitions\ XX{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ XX\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ setsumUnionDisjoint{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsum{\isacharunderscore}associativity{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ partitions\ x{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ {\isachardoublequoteopen}setsum\ f\ x\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsumUnionDisjoint{\isadigit{3}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ familyUnionFiniteEverySetFinite{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}e{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{9}}c\ lm{\isadigit{3}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}a{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}allocationsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharparenleft}{\isasymUnion}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isacharbraceright}{\isacharparenright}\ {\isasymsubseteq}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}e\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}f{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasymsubseteq}\ N{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}g{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ {\isacharparenleft}{\isasymUnion}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ lm{\isadigit{4}}{\isadigit{7}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ subsetI\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}mono{\isacharunderscore}tags{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}e{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ \ {\isasymsubseteq}\ \ allocationsUniverse\ {\isacharampersand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharparenleft}{\isasymUnion}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}f\ nn{\isadigit{2}}{\isadigit{4}}g\ conj{\isacharunderscore}subset{\isacharunderscore}def\ lm{\isadigit{5}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}b{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ allocationsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharparenleft}{\isasymUnion}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isadigit{1}}\ {\isasyminter}\ {\isacharquery}R{\isadigit{2}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isadigit{1}}\ {\isacharampersand}\ {\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ nn{\isadigit{2}}{\isadigit{4}}e{\isacharparenright}\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}allocationsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharparenleft}{\isasymUnion}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L\ {\isacharequal}\ {\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}b\ \isacommand{by}\isamarkupfalse%
\ metis\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isasymsubseteq}\ {\isacharquery}L{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}a\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}c{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G\ \ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}a\ {\isasymin}\ allocationsUniverse\ \ {\isacharampersand}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharparenleft}{\isasymUnion}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}\ Int{\isacharunderscore}Collect\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{5}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ outside\ X\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ mono{\isacharunderscore}tags{\isacharparenright}\ lm{\isadigit{3}}{\isadigit{5}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{Bridging theorem for injections%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}totalRels\ {\isacharbraceleft}{\isacharbraceright}\ Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ CollectI\ converse{\isacharunderscore}empty\ runiq{\isacharunderscore}emptyrel{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{7}}{\isacharcolon}\ {\isachardoublequoteopen}injectionsUniverse\ {\isasyminter}\ {\isacharparenleft}totalRels\ {\isacharbraceleft}{\isacharbraceright}\ Y{\isacharparenright}\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{4}}\ lm{\isadigit{8}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{0}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}x{\isasymnotin}Domain\ f{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}\ f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ A\ {\isacharbraceright}\ {\isasymsubseteq}\ runiqs{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ paste{\isacharunderscore}def\ runiqs{\isacharunderscore}def\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}basic\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{9}}{\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}converse\ {\isacharbackquote}\ {\isacharparenleft}converse\ {\isacharbackquote}\ X{\isacharparenright}\ \ {\isacharequal}\ \ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}f\ {\isasymin}\ converse{\isacharbackquote}runiqs{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiqs{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{8}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}A\ {\isasyminter}\ Range\ f\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}converse\ {\isacharbackquote}\ {\isacharbraceleft}\ f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ A\ {\isacharbraceright}\ {\isasymsubseteq}\ runiqs{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{6}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{8}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isasymin}converse{\isacharbackquote}runiqs{\isachardoublequoteclose}\ {\isachardoublequoteopen}A\ {\isasyminter}\ Range\ f\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isacharbar}\ y{\isachardot}\ y\ {\isasymin}\ A{\isacharbraceright}\ {\isasymsubseteq}\ converse{\isacharbackquote}runiqs{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}l\ {\isasymsubseteq}\ {\isacharquery}r{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{6}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{then}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}converse\ {\isacharbackquote}\ {\isacharquery}l\ {\isasymsubseteq}\ runiqs{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{6}}{\isadigit{8}}{\isacharparenright}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isasymsupseteq}\ converse{\isacharbackquote}{\isacharparenleft}converse{\isacharbackquote}{\isacharquery}l{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}converse{\isacharbackquote}{\isacharparenleft}converse{\isacharbackquote}{\isacharquery}l{\isacharparenright}{\isacharequal}{\isacharquery}l{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{9}}{\isadigit{5}}{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}\ R\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ A\ {\isacharbraceright}\ {\isasymsubseteq}\ totalRels\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ Domain\ R{\isacharparenright}\ {\isacharparenleft}A\ {\isasymunion}\ Range\ R{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}injectionsUniverse\ \ {\isacharequal}\ \ runiqs\ {\isasyminter}\ converse{\isacharbackquote}runiqs{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiqs{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ Domain\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}A\ {\isasyminter}\ {\isacharparenleft}Range\ f{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isacharbar}\ y{\isachardot}\ y\ {\isasymin}\ A{\isacharbraceright}\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}l\ {\isasymsubseteq}\ {\isacharquery}r{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymin}\ converse{\isacharbackquote}runiqs{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{6}}{\isadigit{9}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}l\ {\isasymsubseteq}\ converse{\isacharbackquote}runiqs{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{6}}{\isadigit{8}}b{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}l\ {\isasymsubseteq}\ runiqs{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharcomma}{\isadigit{2}}{\isacharparenright}\ lm{\isadigit{6}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ force\ \isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{9}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{6}}b{\isacharcolon}\ {\isachardoublequoteopen}injections\ X\ Y\ {\isacharequal}\ totalRels\ X\ Y\ {\isasyminter}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ lm{\isadigit{2}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{7}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}f\ outside\ A\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ Outside{\isacharunderscore}def\ lm{\isadigit{2}}{\isadigit{7}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{9}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}R\ {\isasymin}\ totalRels\ A\ B{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}R\ outside\ C\ {\isasymin}\ totalRels\ {\isacharparenleft}A{\isacharminus}C{\isacharparenright}\ B{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isasymin}\ injections{\isacharprime}\ A\ B{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}g\ outside\ C\ {\isasymin}\ injections{\isacharprime}\ {\isacharparenleft}A\ {\isacharminus}\ C{\isacharparenright}\ B{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Outside{\isacharunderscore}def\ Range{\isacharunderscore}outside{\isacharunderscore}sub\ lm{\isadigit{2}}{\isadigit{7}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ outside{\isacharunderscore}reduces{\isacharunderscore}domain\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{1}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isasymin}\ injections\ A\ B{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}g\ outside\ C\ {\isasymin}\ injections\ {\isacharparenleft}A\ {\isacharminus}\ C{\isacharparenright}\ B{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ injections{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}x{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}y{\isacharbraceright}{\isacharequal}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}x{\isacharbraceright}{\isasymtimes}f{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}f{\isacharcomma}{\isacharcomma}x{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{4}}\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{9}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}f\ {\isacharequal}\ {\isacharparenleft}f\ {\isacharminus}{\isacharminus}\ x{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}f{\isacharcomma}{\isacharcomma}x{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{5}}\ outsideUnion\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nn{\isadigit{3}}{\isadigit{0}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}Range{\isacharparenleft}f\ outside\ A{\isacharparenright}\ {\isacharequal}\ Range\ f\ {\isacharminus}\ f{\isacharbackquote}{\isacharbackquote}A{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ rangeOutside\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{6}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isasymin}\ injections{\isacharprime}\ X\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ g{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}g\ {\isasymin}\ {\isacharbraceleft}g{\isacharminus}{\isacharminus}x\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isacharbar}y{\isachardot}\ y\ {\isasymin}\ Y\ {\isacharminus}\ {\isacharparenleft}Range{\isacharparenleft}g{\isacharminus}{\isacharminus}x{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}f{\isacharequal}{\isachardoublequoteopen}g{\isacharminus}{\isacharminus}x{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g{\isasymin}injectionsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{2}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}g{\isacharcomma}{\isacharcomma}x\ {\isasymin}\ g{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval\ insertI{\isadigit{1}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g{\isacharcomma}{\isacharcomma}x\ {\isasymin}\ Y{\isacharminus}Range\ {\isacharquery}f{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ nn{\isadigit{3}}{\isadigit{0}}b\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g{\isacharequal}{\isacharquery}f{\isasymunion}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ g{\isacharcomma}{\isacharcomma}x{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{9}}{\isadigit{2}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}{\isacharparenright}\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{1}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isasymin}\ injections\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ X{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}g{\isacharminus}{\isacharminus}x\ {\isasymin}\ injections\ X\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{1}}b\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}insert{\isacharunderscore}absorb\ insert{\isacharunderscore}is{\isacharunderscore}Un{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{7}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isasymin}\ injections\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ X{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}g\ {\isasymin}\ injections\ {\isacharparenleft}{\isacharquery}X{\isacharparenright}\ Y{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isasymexists}\ f\ {\isasymin}\ injections\ X\ Y{\isachardot}\ g\ {\isasymin}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isacharbar}y{\isachardot}\ y\ {\isasymin}\ Y\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}f{\isacharequal}{\isachardoublequoteopen}g{\isacharminus}{\isacharminus}x{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}g{\isasymin}injections{\isacharprime}\ {\isacharquery}X\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ Universes{\isachardot}lm{\isadigit{2}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ metis\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ g{\isacharequal}{\isacharquery}X{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ Universes{\isachardot}lm{\isadigit{2}}{\isadigit{4}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ g{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}f\ {\isasymin}\ injections\ X\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{1}}c\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g{\isasymin}{\isacharbraceleft}{\isacharquery}f{\isasymunion}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isacharbar}y{\isachardot}\ y{\isasymin}Y{\isacharminus}Range\ {\isacharquery}f{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{6}}{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{7}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ {\isachardoublequoteopen}injections\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ X{\isacharparenright}\ Y\ {\isasymsubseteq}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ injections\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{3}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ f{\isasymin}injections{\isacharprime}\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}\ {\isasymsubseteq}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ injections{\isacharprime}\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ X{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{3}}\ injections{\isacharunderscore}def\ lm{\isadigit{2}}{\isadigit{6}}b\ lm{\isadigit{0}}{\isadigit{1}}\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\ \isacommand{fix}\isamarkupfalse%
\ f\ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymin}\ injections{\isacharprime}\ X\ Y{\isachardoublequoteclose}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}f\ {\isasymin}\ injectionsUniverse\ {\isacharampersand}\ x\ {\isasymnotin}\ Domain\ f\ {\isacharampersand}\ Domain\ f\ {\isacharequal}\ X\ {\isacharampersand}\ Range\ f\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ {\isasymnotin}\ Domain\ f{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}Y{\isacharminus}Range\ f{\isacharparenright}\ {\isasyminter}\ Range\ f\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}Y{\isacharminus}Range\ f{\isacharparenright}{\isacharbraceright}\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{3}}{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}Y{\isacharminus}Range\ f{\isacharparenright}{\isacharbraceright}\ {\isasymsubseteq}\ totalRels\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ X{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}Y{\isacharminus}Range\ f{\isacharparenright}{\isacharbraceright}\ {\isasymsubseteq}\ injectionsUniverse\ {\isasyminter}\ totalRels\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}{\isasymunion}X{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{8}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ f{\isasymin}injections\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ injections\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ X{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}r{\isacharequal}injections\ {\isacharquery}X\ {\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}r{\isacharequal}{\isacharparenleft}{\isasymUnion}\ f{\isasymin}injections{\isacharprime}\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharunderscore}{\isacharequal}{\isacharquery}r{\isacharprime}{\isachardoublequoteclose}{\isacharparenright}\ \isacommand{unfolding}\isamarkupfalse%
\ Universes{\isachardot}lm{\isadigit{2}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r{\isacharprime}\ {\isasymsubseteq}\ injections{\isacharprime}\ {\isacharquery}X\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{3}}b{\isacharparenright}\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ injections\ {\isacharquery}X\ Y{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ Universes{\isachardot}lm{\isadigit{2}}{\isadigit{4}}\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isasymsubseteq}\ injections\ {\isacharquery}X\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}injections\ {\isacharquery}X\ Y\ {\isasymsubseteq}\ {\isacharquery}r{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{7}}b{\isacharparenright}\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{9}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}\ x{\isachardot}\ {\isacharparenleft}P\ x\ {\isasymlongrightarrow}\ {\isacharparenleft}f\ x\ {\isacharequal}\ g\ x{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}Union\ {\isacharbraceleft}f\ x{\isacharbar}x{\isachardot}\ P\ x{\isacharbraceright}\ {\isacharequal}\ Union\ {\isacharbraceleft}g\ x\ {\isacharbar}\ x{\isachardot}\ P\ x{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\ \isacommand{try{\isadigit{0}}}\isamarkupfalse%
%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{8}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ Domain\ R{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ R\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}erased{\isacharcomma}\ lifting{\isacharparenright}\ Domain{\isacharunderscore}empty\ Domain{\isacharunderscore}insert\ Int{\isacharunderscore}insert{\isacharunderscore}right{\isacharunderscore}if{\isadigit{0}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disjoint{\isacharunderscore}iff{\isacharunderscore}not{\isacharunderscore}equal\ ex{\isacharunderscore}in{\isacharunderscore}conv\ paste{\isacharunderscore}disj{\isacharunderscore}domains{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{9}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ injections\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ injections\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ \ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ \ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}l\ {\isacharequal}\ {\isacharquery}r{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}f\ {\isasymin}\ injections\ X\ Y{\isachardot}\ x\ {\isasymnotin}\ Domain\ f{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}l{\isacharequal}Union\ {\isacharbraceleft}{\isacharbraceleft}f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharbar}f\ {\isachardot}f\ {\isasymin}\ injections\ X\ Y\ {\isacharampersand}\ x\ {\isasymnotin}\ Domain\ f{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharunderscore}{\isacharequal}{\isacharquery}l{\isacharprime}{\isachardoublequoteclose}{\isacharparenright}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ auto\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}r{\isacharequal}Union\ {\isacharbraceleft}{\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharbar}f\ {\isachardot}f\ {\isasymin}\ injections\ X\ Y\ {\isacharampersand}\ x\ {\isasymnotin}\ Domain\ f{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharunderscore}{\isacharequal}{\isacharquery}r{\isacharprime}{\isachardoublequoteclose}{\isacharparenright}\ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ f{\isachardot}\ f{\isasymin}injections\ X\ Y\ {\isacharampersand}\ x\ {\isasymnotin}\ Domain\ f\ {\isasymlongrightarrow}\ \isanewline
\ \ {\isacharbraceleft}f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharequal}{\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ force\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}l{\isacharprime}{\isacharequal}{\isacharquery}r{\isacharprime}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{8}}{\isadigit{9}}{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}l\ {\isacharequal}\ {\isacharquery}r{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{8}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ injections\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ injections\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ X{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}l{\isacharequal}{\isacharquery}r{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}l{\isacharequal}{\isacharparenleft}{\isasymUnion}\ f{\isasymin}injections\ X\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{9}}{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}r{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{8}}{\isacharparenright}\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}set\ {\isacharbrackleft}\ f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isachardot}\ y\ {\isasymleftarrow}\ {\isacharparenleft}filter\ {\isacharparenleft}{\isacharpercent}y{\isachardot}\ y\ {\isasymnotin}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharparenright}\ Y{\isacharparenright}\ {\isacharbrackright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}set\ Y{\isacharparenright}\ {\isacharminus}\ \ \ \ \ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x\ {\isasymin}\ set\ L{\isachardot}\ set\ {\isacharparenleft}F\ x{\isacharparenright}\ {\isacharequal}\ G\ x{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}set\ {\isacharparenleft}concat\ {\isacharbrackleft}\ F\ x\ {\isachardot}\ x\ {\isacharless}{\isacharminus}\ L{\isacharbrackright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isasymUnion}\ x{\isasymin}set\ L{\isachardot}\ G\ x{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}set\ {\isacharparenleft}concat\ {\isacharbrackleft}\ {\isacharbrackleft}\ f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isachardot}\ y\ {\isasymleftarrow}\ {\isacharparenleft}filter\ {\isacharparenleft}{\isacharpercent}y{\isachardot}\ y\ {\isasymnotin}\ Range\ f{\isacharparenright}\ Y{\isacharparenright}\ {\isacharbrackright}{\isachardot}\ f\ {\isasymleftarrow}\ F\ {\isacharbrackright}{\isacharparenright}\ {\isacharequal}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ set\ F{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}set\ Y{\isacharparenright}\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{1}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}set\ {\isacharbrackleft}\ f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isachardot}\ y\ {\isasymleftarrow}\ sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ {\isacharparenleft}Y\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharparenright}\ {\isacharbrackright}\ {\isacharequal}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}\ \ \ \ \ \ f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Y\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{3}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}set\ {\isacharparenleft}concat\ {\isacharbrackleft}{\isacharbrackleft}f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isachardot}\ y\ {\isasymleftarrow}\ sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set{\isacharparenleft}Y\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharparenright}{\isacharbrackright}{\isachardot}\ f\ {\isasymleftarrow}\ F{\isacharbrackright}{\isacharparenright}\ {\isacharequal}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ set\ F{\isachardot}{\isacharbraceleft}f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{8}}{\isadigit{1}}b\ lm{\isadigit{8}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{computable injections%
}
\isamarkuptrue%
\isacommand{fun}\isamarkupfalse%
\ injectionsAlg\ \isanewline
\ \ \ \ \isakeyword{where}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}injectionsAlg\ {\isacharbrackleft}{\isacharbrackright}\ {\isacharparenleft}Y{\isacharcolon}{\isacharcolon}{\isacharprime}a\ list{\isacharparenright}\ {\isacharequal}\ {\isacharbrackleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbrackright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ \ \ {\isachardoublequoteopen}injectionsAlg\ {\isacharparenleft}x{\isacharhash}xs{\isacharparenright}\ Y\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ concat\ {\isacharbrackleft}\ {\isacharbrackleft}R{\isasymunion}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isachardot}\ y\ {\isasymleftarrow}\ {\isacharparenleft}filter\ {\isacharparenleft}{\isacharpercent}y{\isachardot}\ y\ {\isasymnotin}\ Range\ R{\isacharparenright}\ Y{\isacharparenright}{\isacharbrackright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardot}R\ {\isasymleftarrow}\ injectionsAlg\ xs\ Y\ {\isacharbrackright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{3}}b{\isacharcolon}\ {\isachardoublequoteopen}set\ {\isacharparenleft}injectionsAlg\ {\isacharparenleft}x\ {\isacharhash}\ xs{\isacharparenright}\ Y{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ set\ {\isacharparenleft}injectionsAlg\ xs\ Y{\isacharparenright}{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}set\ Y{\isacharparenright}\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{3}}\ injectionsAlg{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{3}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}set\ {\isacharparenleft}injectionsAlg\ xs\ Y{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ {\isacharparenleft}set\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}set\ {\isacharparenleft}injectionsAlg\ {\isacharparenleft}x\ {\isacharhash}\ xs{\isacharparenright}\ Y{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymUnion}\ f\ {\isasymin}\ injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ {\isacharparenleft}set\ Y{\isacharparenright}{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}set\ Y{\isacharparenright}\ {\isacharminus}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{8}}{\isadigit{3}}b\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
We sometimes use parallel \isa{abbreviation} and \isa{definition} for the same object to save typing `unfolding xxx' each time. There is also different behaviour in the code extraction.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{4}}{\isacharcolon}\ \ {\isachardoublequoteopen}injections{\isacharprime}\ {\isacharbraceleft}{\isacharbraceright}\ Y\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lm{\isadigit{2}}{\isadigit{6}}\ lm{\isadigit{8}}{\isadigit{4}}\ runiq{\isacharunderscore}emptyrel{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{4}}b{\isacharcolon}\ {\isachardoublequoteopen}injections\ {\isacharbraceleft}{\isacharbraceright}\ Y\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lm{\isadigit{2}}{\isadigit{6}}\ lm{\isadigit{8}}{\isadigit{4}}\ runiq{\isacharunderscore}emptyrel{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}injectionsAlg\ {\isacharbrackleft}{\isacharbrackright}\ Y\ \ {\isacharequal}\ \ {\isacharbrackleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injectionsAlg{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{6}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ set\ xs{\isachardoublequoteclose}\ {\isachardoublequoteopen}set\ {\isacharparenleft}injectionsAlg\ xs\ Y{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ {\isacharparenleft}set\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}set\ {\isacharparenleft}injectionsAlg\ {\isacharparenleft}x\ {\isacharhash}\ xs{\isacharparenright}\ Y{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ set\ xs{\isacharparenright}\ {\isacharparenleft}set\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}l{\isacharequal}{\isacharquery}r{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}l\ {\isacharequal}\ {\isacharparenleft}{\isasymUnion}\ f{\isasymin}injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ {\isacharparenleft}set\ Y{\isacharparenright}{\isachardot}\ {\isacharbraceleft}f\ {\isasymunion}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ {\isacharparenleft}set\ Y{\isacharparenright}{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{8}}{\isadigit{3}}c{\isacharparenright}\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}r{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{8}}{\isacharparenright}\ \isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{8}}{\isadigit{6}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ set\ xs{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ xs\ Y{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ \ {\isachardoublequoteopen}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ {\isacharparenleft}x{\isacharhash}xs{\isacharparenright}\ Y{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ set\ xs{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}l{\isacharequal}{\isacharquery}r{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}l\ {\isacharequal}\ {\isacharparenleft}{\isasymUnion}\ f{\isasymin}injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ Y{\isachardot}\ {\isacharbraceleft}f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y{\isacharminus}Range\ f{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharcomma}{\isadigit{3}}{\isacharparenright}\ lm{\isadigit{8}}{\isadigit{3}}d\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}r{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{8}}b{\isacharparenright}\ \isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ listInduct{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}P\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}\ xs\ x{\isachardot}\ P\ xs\ {\isasymlongrightarrow}\ P\ {\isacharparenleft}x{\isacharhash}xs{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isasymforall}x{\isachardot}\ P\ x{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ structInduct{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ injectionsFromEmptyAreEmpty{\isacharcolon}\ {\isachardoublequoteopen}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ {\isacharbrackleft}{\isacharbrackright}\ Z{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{theorem}\isamarkupfalse%
\ injections{\isacharunderscore}equiv{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}distinct\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ X\ Y{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ X{\isacharparenright}\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}\ l{\isachardot}\ {\isacharparenleft}distinct\ l\ {\isasymlongrightarrow}\ {\isacharparenleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ Y{\isacharparenright}{\isacharequal}injections\ {\isacharparenleft}set\ l{\isacharparenright}\ Y{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}P\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ injectionsFromEmptyAreEmpty\ list{\isachardot}set{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{4}}{\isadigit{4}}b\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}x\ xs{\isachardot}\ {\isacharquery}P\ xs\ {\isasymlongrightarrow}\ {\isacharquery}P\ {\isacharparenleft}x{\isacharhash}xs{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{8}}{\isadigit{6}}b\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ distinct{\isachardot}simps{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ list{\isachardot}simps{\isacharparenleft}{\isadigit{1}}{\isadigit{5}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}P\ X{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ structInduct{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{7}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}l\ {\isasymin}\ set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}distinct\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ all{\isacharunderscore}partitions{\isacharunderscore}list{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ all{\isacharunderscore}partitions{\isacharunderscore}equivalence{\isacharprime}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}l\ {\isasymin}\ set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharparenright}{\isachardot}\ set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ injections\ {\isacharparenleft}set\ l{\isacharparenright}\ N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ \ \ \ \ \ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{7}}\ injections{\isacharunderscore}equiv\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ card{\isacharunderscore}ge{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}finite{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}injections\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\ {\isacharbrackleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isachardot}\ l\ {\isasymleftarrow}\ all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}g{\isadigit{1}}{\isacharequal}all{\isacharunderscore}partitions{\isacharunderscore}list\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}f{\isadigit{2}}{\isacharequal}injections\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}g{\isadigit{2}}{\isacharequal}injections{\isacharunderscore}alg\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}l\ {\isasymin}\ set\ {\isacharparenleft}{\isacharquery}g{\isadigit{1}}\ G{\isacharparenright}{\isachardot}\ set\ {\isacharparenleft}{\isacharquery}g{\isadigit{2}}\ l\ N{\isacharparenright}\ {\isacharequal}\ {\isacharquery}f{\isadigit{2}}\ {\isacharparenleft}set\ l{\isacharparenright}\ N{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}set\ {\isacharbrackleft}set\ {\isacharparenleft}{\isacharquery}g{\isadigit{2}}\ l\ N{\isacharparenright}{\isachardot}\ l\ {\isacharless}{\isacharminus}\ {\isacharquery}g{\isadigit{1}}\ G{\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharquery}f{\isadigit{2}}\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ set\ {\isacharparenleft}map\ set\ {\isacharparenleft}{\isacharquery}g{\isadigit{1}}\ G{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ setVsList{\isacharparenright}\ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharbraceleft}{\isacharquery}f{\isadigit{2}}\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ all{\isacharunderscore}partitions{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg\isanewline
\ \ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{0}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}Union\ {\isacharbraceleft}injections\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Union\ {\isacharparenleft}set\ {\isacharbrackleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isachardot}\ l\ {\isasymleftarrow}\ all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}Union\ {\isacharquery}L\ {\isacharequal}\ Union\ {\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}L\ {\isacharequal}\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{0}}{\isadigit{5}}{\isacharparenright}\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{0}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}possibleAllocationsRel\ N\ {\isacharparenleft}set\ G{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set{\isacharparenleft}possibleAllocationsAlg\ N\ G{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}LL{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ {\isacharbraceleft}injections\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}RR{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}set\ {\isacharbrackleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isachardot}\ l\ {\isasymleftarrow}\ all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}LL\ {\isacharequal}\ {\isacharquery}RR{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{0}}{\isacharparenright}\ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}converse\ {\isacharbackquote}\ {\isacharquery}LL\ {\isacharequal}\ converse\ {\isacharbackquote}\ {\isacharquery}RR{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
