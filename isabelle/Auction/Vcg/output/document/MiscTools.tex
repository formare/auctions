%
\begin{isabellebody}%
\def\isabellecontext{MiscTools}%
%
\isamarkupheader{Toolbox of various definitions and theorems about sets, relations and lists%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ MiscTools\ \isanewline
\isanewline
\isakeyword{imports}\ \isanewline
RelationProperties\isanewline
{\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Discrete{\isachardoublequoteclose}\isanewline
Main\isanewline
RelationOperators\isanewline
{\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Code{\isacharunderscore}Target{\isacharunderscore}Nat{\isachardoublequoteclose}\isanewline
{\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Indicator{\isacharunderscore}Function{\isachardoublequoteclose}\isanewline
Argmax\isanewline
\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isamarkupsection{Facts and notations about relations, sets and functions.%
}
\isamarkuptrue%
\isacommand{notation}\isamarkupfalse%
\ paste\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharplus}{\isacharless}{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}%
\begin{isamarkuptext}%
\isa{{\isacharplus}{\isacharless}} abbreviation permits to shorten the notation for altering a function f in a single point by giving a pair (a, b) so that the new function has value b with argument a.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{abbreviation}\isamarkupfalse%
\ singlepaste\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}singlepaste\ f\ pair\ {\isacharequal}{\isacharequal}\ f\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}fst\ pair{\isacharcomma}\ snd\ pair{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{notation}\isamarkupfalse%
\ singlepaste\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharplus}{\isacharless}{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}%
\begin{isamarkuptext}%
\isa{{\isacharminus}{\isacharminus}} abbreviation permits to shorten the notation for considering a function outside a single point.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{abbreviation}\isamarkupfalse%
\ singleoutside\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharminus}{\isacharminus}{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}f\ {\isacharminus}{\isacharminus}\ x\ {\isasymequiv}\ f\ outside\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
Turns a HOL function into a set-theoretical function%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ \ \isanewline
\ \ {\isachardoublequoteopen}Graph\ f\ {\isacharequal}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ f\ x{\isacharparenright}\ {\isacharbar}\ x\ {\isachardot}\ True{\isacharbraceright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
Inverts \isa{Graph} (which is equivalently done by \isa{op\ {\isacharcomma}{\isacharcomma}}).%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ {\isachardoublequoteopen}toFunction\ R\ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}\ x\ {\isachardot}\ {\isacharparenleft}R\ {\isacharcomma}{\isacharcomma}\ x{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}toFunction\ {\isacharequal}\ eval{\isacharunderscore}rel{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ toFunction{\isacharunderscore}def\ eval{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}P\ {\isasymunion}\ Q{\isacharparenright}\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isacharparenleft}P\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}Q{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ restrict{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
update behaves like P +* Q (paste), but without enlarging P's Domain. update is the set theoretic equivalent of the lambda function update \isa{fun{\isacharunderscore}upd}%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ update\ \isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}update\ P\ Q\ {\isacharequal}\ P\ {\isacharplus}{\isacharasterisk}\ {\isacharparenleft}Q\ {\isacharbar}{\isacharbar}\ {\isacharparenleft}Domain\ P{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{notation}\isamarkupfalse%
\ update\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharplus}{\isacharcircum}{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ runiqer\ \ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ {\isacharequal}{\isachargreater}\ {\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}runiqer\ R\ {\isacharequal}\ {\isacharbraceleft}\ {\isacharparenleft}x{\isacharcomma}\ THE\ y{\isachardot}\ y\ {\isasymin}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharbar}\ x{\isachardot}\ x\ {\isasymin}\ Domain\ R\ {\isacharbraceright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
\isa{graph} is like \isa{Graph}, but with a built-in restriction to a given set \isa{X}.
This makes it computable for finite X, whereas \isa{Graph\ f\ {\isacharbar}{\isacharbar}\ X} is not computable. 
Duplicates the eponymous definition found in \isa{Function{\isacharunderscore}Order}, which is otherwise not needed.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ graph\ \isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}graph\ X\ f\ {\isacharequal}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ f\ x{\isacharparenright}\ {\isacharbar}\ x{\isachardot}\ x\ {\isasymin}\ X{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isasymsupseteq}\ graph\ {\isacharparenleft}Domain\ R{\isacharparenright}\ {\isacharparenleft}toFunction\ R{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ graph{\isacharunderscore}def\ toFunction{\isacharunderscore}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ graph{\isacharunderscore}def\ toFunction{\isacharunderscore}def\ eval{\isacharunderscore}runiq{\isacharunderscore}rel\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isasymsubseteq}\ graph\ {\isacharparenleft}Domain\ R{\isacharparenright}\ {\isacharparenleft}toFunction\ R{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ graph{\isacharunderscore}def\ toFunction{\isacharunderscore}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ eval{\isacharunderscore}runiq{\isacharunderscore}rel\ runiq{\isacharunderscore}basic\ Domain{\isachardot}DomainI\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ subrelI\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isacharequal}\ graph\ {\isacharparenleft}Domain\ R{\isacharparenright}\ {\isacharparenleft}toFunction\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{2}}\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ domainOfGraph{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}runiq{\isacharparenleft}graph\ X\ f{\isacharparenright}\ {\isacharampersand}\ Domain{\isacharparenleft}graph\ X\ f{\isacharparenright}{\isacharequal}X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ graph{\isacharunderscore}def\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ rightUniqueRestrictedGraph\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}eval{\isacharunderscore}rel{\isadigit{2}}\ {\isacharparenleft}R{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharparenleft}{\isacharprime}b\ set{\isacharparenright}{\isacharparenright}\ set{\isacharparenright}\ {\isacharparenleft}x{\isacharcolon}{\isacharcolon}{\isacharprime}a{\isacharparenright}\ {\isacharequal}{\isacharequal}\ {\isasymUnion}\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{notation}\isamarkupfalse%
\ eval{\isacharunderscore}rel{\isadigit{2}}\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharcomma}{\isacharcomma}{\isacharcomma}{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ imageEquivalence{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharparenleft}{\isacharprime}b\ set{\isacharparenright}{\isacharparenright}\ set{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f{\isacharcomma}{\isacharcomma}x\ {\isacharequal}\ f{\isacharcomma}{\isacharcomma}{\isacharcomma}x{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval\ cSup{\isacharunderscore}singleton\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Graph\ f{\isacharequal}graph\ UNIV\ f{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ Graph{\isacharunderscore}def\ graph{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ graphIntersection{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}graph\ {\isacharparenleft}X\ {\isasyminter}\ Y{\isacharparenright}\ f\ {\isasymsubseteq}\ {\isacharparenleft}{\isacharparenleft}graph\ X\ f{\isacharparenright}\ {\isacharbar}{\isacharbar}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ graph{\isacharunderscore}def\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ Int{\isacharunderscore}iff\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ restrict{\isacharunderscore}ext\ subrelI\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ runiqs\ \isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}runiqs{\isacharequal}{\isacharbraceleft}f{\isachardot}\ runiq\ f{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ outsideOutside{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}P\ outside\ X{\isacharparenright}\ outside\ Y{\isacharparenright}\ {\isacharequal}\ P\ outside\ {\isacharparenleft}X{\isasymunion}Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}P\ outside\ X{\isacharparenright}\ outside\ X{\isacharparenright}\ {\isacharequal}\ P\ outside\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ outsideOutside\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isasyminter}\ Domain\ P{\isacharparenright}\ {\isasymsubseteq}\ Domain\ Q{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}P\ {\isacharplus}{\isacharasterisk}\ Q\ {\isacharequal}\ {\isacharparenleft}P\ outside\ X{\isacharparenright}\ {\isacharplus}{\isacharasterisk}\ Q{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ paste{\isacharunderscore}def\ Outside{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}P\ {\isacharplus}{\isacharasterisk}\ Q\ {\isacharequal}\ {\isacharparenleft}P\ outside\ {\isacharparenleft}Domain\ Q{\isacharparenright}{\isacharparenright}\ {\isacharplus}{\isacharasterisk}\ Q{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ outsideUnion{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R\ {\isacharequal}\ {\isacharparenleft}R\ outside\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ restrict{\isacharunderscore}to{\isacharunderscore}singleton\ outside{\isacharunderscore}union{\isacharunderscore}restrict\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}P\ {\isacharequal}\ P\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isasymtimes}P{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ outsideUnion\ sup{\isachardot}right{\isacharunderscore}idem{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R\ {\isacharequal}\ {\isacharparenleft}R\ outside\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharplus}{\isacharasterisk}\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ paste{\isacharunderscore}outside{\isacharunderscore}restrict\ restrict{\isacharunderscore}to{\isacharunderscore}singleton{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R\ {\isasymsubseteq}\ R\ {\isacharplus}{\isacharasterisk}\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{0}}\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{8}}\ paste{\isacharunderscore}def\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R\ {\isasymsupseteq}\ R{\isacharplus}{\isacharasterisk}{\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Un{\isacharunderscore}least\ Un{\isacharunderscore}upper{\isadigit{1}}\ outside{\isacharunderscore}union{\isacharunderscore}restrict\ paste{\isacharunderscore}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ restrict{\isacharunderscore}to{\isacharunderscore}singleton\ restriction{\isacharunderscore}is{\isacharunderscore}subrel{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R\ {\isacharequal}\ R\ {\isacharplus}{\isacharasterisk}\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{1}}\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ rightUniqueTrivialCartes{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}trivial\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}X\ {\isasymtimes}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}def\ Image{\isacharunderscore}subset\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{3}}\ trivial{\isacharunderscore}subset\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharparenleft}X\ {\isasymtimes}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharplus}{\isacharasterisk}\ {\isacharparenleft}Y\ {\isasymtimes}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ rightUniqueTrivialCartes\ trivial{\isacharunderscore}singleton\ runiq{\isacharunderscore}paste{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharbar}{\isacharbar}\ {\isacharparenleft}X\ {\isasyminter}\ Y{\isacharparenright}{\isacharparenright}\ {\isasymsubseteq}\ {\isacharparenleft}P{\isacharbar}{\isacharbar}X{\isacharparenright}\ \ \ \ {\isacharampersand}\ \ \ \ P\ outside\ {\isacharparenleft}X\ {\isasymunion}\ Y{\isacharparenright}\ {\isasymsubseteq}\ P\ outside\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ restrict{\isacharunderscore}def\ Sigma{\isacharunderscore}Un{\isacharunderscore}distrib{\isadigit{1}}\ Un{\isacharunderscore}upper{\isadigit{1}}\ inf{\isacharunderscore}mono\ Diff{\isacharunderscore}mono\ subset{\isacharunderscore}refl\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}\ Sigma{\isacharunderscore}mono\ inf{\isacharunderscore}le{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}P\ {\isacharbar}{\isacharbar}\ X\ {\isasymsubseteq}\ {\isacharparenleft}P{\isacharbar}{\isacharbar}{\isacharparenleft}X\ {\isasymunion}\ Y{\isacharparenright}{\isacharparenright}\ \ \ \ \ \ \ {\isacharampersand}\ \ \ \ P\ outside\ X\ {\isasymsubseteq}\ P\ outside\ {\isacharparenleft}X\ {\isasyminter}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{5}}\ distrib{\isacharunderscore}sup{\isacharunderscore}le\ sup{\isacharunderscore}idem\ le{\isacharunderscore}inf{\isacharunderscore}iff\ subset{\isacharunderscore}antisym\ sup{\isacharunderscore}commute\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ sup{\isacharunderscore}ge{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}P{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasyminter}\ Domain\ P{\isacharparenright}\ {\isacharequal}\ P{\isacharbackquote}{\isacharbackquote}X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cardinalityOneSubset{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ X{\isacharequal}{\isadigit{1}}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}Union\ X\ {\isasymin}\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cardinalityOneTheElemIdentity\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ cSup{\isacharunderscore}singleton\ insert{\isacharunderscore}subset{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cardinalityOneTheElem{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ X{\isacharequal}{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ X\ {\isasymin}\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}full{\isacharunderscore}types{\isacharparenright}\ insert{\isacharunderscore}subset\ cardinalityOneTheElemIdentity{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}R\ outside\ X{\isadigit{1}}{\isacharparenright}\ outside\ X{\isadigit{2}}\ {\isacharequal}\ {\isacharparenleft}R\ outside\ X{\isadigit{2}}{\isacharparenright}\ outside\ X{\isadigit{1}}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ outsideOutside\ sup{\isacharunderscore}commute{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{ordered relations%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ X{\isasymge}{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}x{\isasymin}X{\isachardot}\ y\ {\isachargreater}\ x{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}y\ {\isachargreater}\ Max\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}poly{\isacharunderscore}guards{\isacharunderscore}query{\isacharparenright}\ Max{\isacharunderscore}in\ One{\isacharunderscore}nat{\isacharunderscore}def\ card{\isacharunderscore}eq{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}iff\ lessI\ not{\isacharunderscore}le{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}mx\ {\isasymin}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ x\ {\isacharless}\ f\ mx{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}{\isachardoublequoteopen}x\ {\isasymnotin}\ argmax\ f\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ not{\isacharunderscore}less\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}mx\ {\isasymin}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}x\ {\isasymin}\ X{\isacharminus}{\isacharbraceleft}mx{\isacharbraceright}{\isachardot}\ f\ x\ {\isacharless}\ f\ mx{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}argmax\ f\ X\ {\isasymsubseteq}\ {\isacharbraceleft}mx{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mk{\isacharunderscore}disjoint{\isacharunderscore}insert\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}mx\ {\isasymin}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}x\ {\isasymin}\ X{\isacharminus}{\isacharbraceleft}mx{\isacharbraceright}{\isachardot}\ f\ x\ {\isacharless}\ f\ mx{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}argmax\ f\ X\ {\isacharequal}\ {\isacharbraceleft}mx{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ argmax{\isacharunderscore}non{\isacharunderscore}empty{\isacharunderscore}iff\ equals{\isadigit{0}}D\ subset{\isacharunderscore}singletonD{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ argmaxProperty{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}finite\ X\ {\isacharampersand}\ mx\ {\isasymin}\ X\ {\isacharampersand}\ {\isacharparenleft}{\isasymforall}aa\ {\isasymin}\ X{\isacharminus}{\isacharbraceleft}mx{\isacharbraceright}{\isachardot}\ f\ aa\ {\isacharless}\ f\ mx{\isacharparenright}{\isacharparenright}\ {\isasymlongrightarrow}\ argmax\ f\ X\ {\isacharequal}\ {\isacharbraceleft}mx{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}mx\ {\isasymin}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}x\ {\isasymin}\ X{\isachardot}\ x\ {\isasymnoteq}\ mx\ {\isasymlongrightarrow}\ f\ x\ {\isacharless}\ f\ mx{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}argmax\ f\ X\ {\isacharequal}\ {\isacharbraceleft}mx{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}iff\ insertI{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isasymcirc}\ g\ {\isacharequal}\ id{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ g\ UNIV{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ inj{\isacharunderscore}on{\isacharunderscore}id\ inj{\isacharunderscore}on{\isacharunderscore}imageI{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ f\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ {\isacharparenleft}image\ f{\isacharparenright}\ {\isacharparenleft}Pow\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ inj{\isacharunderscore}on{\isacharunderscore}image{\isacharunderscore}eq{\isacharunderscore}iff\ inj{\isacharunderscore}onI\ PowD\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ injectionPowerset{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ f\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ {\isacharparenleft}image\ f{\isacharparenright}\ {\isacharparenleft}Pow\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ subset{\isacharunderscore}inj{\isacharunderscore}on{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ finestpart\ \isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}finestpart\ X\ {\isacharequal}\ {\isacharparenleft}{\isacharpercent}x{\isachardot}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharbackquote}\ X{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ finestPart{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}finestpart\ X\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceleft}x{\isacharbraceright}{\isacharbar}x\ {\isachardot}\ x{\isasymin}X{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ finestPartUnion{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}X{\isacharequal}{\isasymUnion}\ {\isacharparenleft}finestpart\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finestPart\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Union\ {\isasymcirc}\ finestpart\ {\isacharequal}\ id{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ finestPartUnion\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}inj{\isacharunderscore}on\ Union\ {\isacharparenleft}finestpart\ {\isacharbackquote}\ UNIV{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ inj{\isacharunderscore}on{\isacharunderscore}id\ inj{\isacharunderscore}on{\isacharunderscore}imageI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nonEqualitySetOfSets{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\ {\isasymnoteq}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceleft}x{\isacharbraceright}{\isacharbar}\ x{\isachardot}\ x\ {\isasymin}\ X{\isacharbraceright}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceleft}x{\isacharbraceright}{\isacharbar}\ x{\isachardot}\ x\ {\isasymin}\ Y{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}inj{\isacharunderscore}on\ finestpart\ UNIV{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ nonEqualitySetOfSets\ finestPart\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}\ injI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ unionFinestPart{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharbraceleft}Y\ {\isacharbar}\ Y{\isachardot}\ EX\ x{\isachardot}{\isacharparenleft}{\isacharparenleft}Y\ {\isasymin}\ finestpart\ x{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}x\ {\isasymin}\ X{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}finestpart{\isacharbackquote}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ rangeSetOfPairs{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Range\ {\isacharbraceleft}{\isacharparenleft}fst\ pair{\isacharcomma}\ Y{\isacharparenright}{\isacharbar}\ Y\ pair{\isachardot}\ Y\ {\isasymin}\ finestpart\ {\isacharparenleft}snd\ pair{\isacharparenright}\ {\isacharampersand}\ pair\ {\isasymin}\ X{\isacharbraceright}\ {\isacharequal}\ \isanewline
\ \ \ {\isacharbraceleft}Y{\isachardot}\ EX\ x{\isachardot}\ {\isacharparenleft}{\isacharparenleft}Y\ {\isasymin}\ finestpart\ x{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}x\ {\isasymin}\ Range\ X{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ setOfPairsEquality{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}fst\ pair{\isacharcomma}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}{\isacharbar}\ y\ pair{\isachardot}\ y\ {\isasymin}\ snd\ pair\ {\isacharampersand}\ pair\ {\isasymin}\ X{\isacharbraceright}\ {\isacharequal}\ \isanewline
\ \ \ {\isacharbraceleft}{\isacharparenleft}fst\ pair{\isacharcomma}\ Y{\isacharparenright}{\isacharbar}\ Y\ pair{\isachardot}\ Y\ {\isasymin}\ finestpart\ {\isacharparenleft}snd\ pair{\isacharparenright}\ {\isacharampersand}\ pair\ {\isasymin}\ X{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ setOfPairs{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}fst\ pair{\isacharcomma}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}{\isacharbar}\ y{\isachardot}\ y\ {\isasymin}\ \ snd\ pair{\isacharbraceright}\ {\isacharequal}\ \isanewline
\ \ \ {\isacharbraceleft}fst\ pair{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharbraceleft}y{\isacharbraceright}{\isacharbar}\ y{\isachardot}\ y\ {\isasymin}\ snd\ pair{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}x\ {\isasymin}\ X\ {\isacharequal}\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymin}\ finestpart\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pairDifference{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}X{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}Y{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}x{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}X{\isacharbraceright}{\isacharminus}{\isacharbraceleft}Y{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymUnion}\ P\ {\isacharequal}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ Pow\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}argmax\ f\ {\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ argmax{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sortingSameSet{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}set\ {\isacharparenleft}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ X{\isacharparenright}\ {\isacharequal}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ A\ {\isacharequal}\ setsum\ f\ {\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}\ {\isacharplus}\ setsum\ f\ {\isacharparenleft}A\ {\isacharminus}\ B{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ DiffD{\isadigit{2}}\ Int{\isacharunderscore}iff\ Un{\isacharunderscore}Diff{\isacharunderscore}Int\ Un{\isacharunderscore}commute\ finite{\isacharunderscore}Un\ setsum{\isachardot}union{\isacharunderscore}inter{\isacharunderscore}neutral{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsumOutside{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ g{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ g\ {\isacharequal}\ setsum\ f\ {\isacharparenleft}g\ outside\ X{\isacharparenright}\ {\isacharplus}\ {\isacharparenleft}setsum\ f\ {\isacharparenleft}g{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ restrict{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ add{\isachardot}commute\ inf{\isacharunderscore}commute\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}Domain\ P\ {\isasymsubseteq}\ Domain\ Q{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}\ {\isacharequal}\ Q{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ paste{\isacharunderscore}def\ Outside{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharequal}Q{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}Domain\ P\ {\isasymsubseteq}\ Domain\ Q{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ paste{\isacharunderscore}def\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}Domain\ P\ {\isasymsubseteq}\ Domain\ Q{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharequal}Q{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{3}}\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}P{\isacharbar}{\isacharbar}{\isacharparenleft}Domain\ Q{\isacharparenright}{\isacharparenright}\ {\isacharplus}{\isacharasterisk}\ Q\ {\isacharequal}\ Q{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}lower{\isadigit{2}}\ restrictedDomain\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{5}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}P{\isacharbar}{\isacharbar}X\ \ \ {\isacharequal}\ \ \ P\ outside\ {\isacharparenleft}Domain\ P\ {\isacharminus}\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ restrict{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}P\ outside\ X{\isacharparenright}\ {\isasymsubseteq}\ \ \ \ P\ {\isacharbar}{\isacharbar}\ {\isacharparenleft}{\isacharparenleft}Domain\ P{\isacharparenright}{\isacharminus}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{6}}\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}commute\ restrictedDomain\ outside{\isacharunderscore}reduces{\isacharunderscore}domain{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Domain\ {\isacharparenleft}P\ outside\ X{\isacharparenright}\ {\isasyminter}\ Domain\ {\isacharparenleft}Q\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{6}}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}disjoint\ Domain{\isacharunderscore}empty{\isacharunderscore}iff\ Int{\isacharunderscore}Diff\ inf{\isacharunderscore}commute\ restrictedDomain\ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ outside{\isacharunderscore}reduces{\isacharunderscore}domain\ restrict{\isacharunderscore}empty{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}P\ outside\ X{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Q\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}P\ outside\ {\isacharparenleft}X\ {\isasymunion}\ Y{\isacharparenright}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Q\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ \ \ {\isacharampersand}\ \ \ {\isacharparenleft}P\ outside\ X{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Q\ {\isacharbar}{\isacharbar}\ {\isacharparenleft}X\ {\isasyminter}\ Z{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Outside{\isacharunderscore}def\ restrict{\isacharunderscore}def\ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{9}}\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}P\ outside\ X\ \ \ \ {\isacharequal}\ \ \ \ P\ {\isacharbar}{\isacharbar}\ {\isacharparenleft}{\isacharparenleft}Domain\ P{\isacharparenright}\ {\isacharminus}\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ restrict{\isacharunderscore}def\ \ lm{\isadigit{0}}{\isadigit{3}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isacharminus}Y{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}R{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isacharminus}Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ restrict{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymUnion}\ XX\ {\isasymsubseteq}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\ XX{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}l\ {\isasymin}\ set\ L{\isadigit{1}}{\isachardot}\ set\ L{\isadigit{2}}\ {\isacharequal}\ f{\isadigit{2}}\ {\isacharparenleft}set\ l{\isacharparenright}\ N{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}set\ {\isacharbrackleft}set\ L{\isadigit{2}}{\isachardot}\ l\ {\isacharless}{\isacharminus}\ L{\isadigit{1}}{\isacharbrackright}\ \ {\isacharequal}\ \ {\isacharbraceleft}f{\isadigit{2}}\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ set\ {\isacharparenleft}map\ set\ L{\isadigit{1}}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ setVsList{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}l\ {\isasymin}\ set\ {\isacharparenleft}g{\isadigit{1}}\ G{\isacharparenright}{\isachardot}\ set\ {\isacharparenleft}g{\isadigit{2}}\ l\ N{\isacharparenright}\ {\isacharequal}\ f{\isadigit{2}}\ {\isacharparenleft}set\ l{\isacharparenright}\ N{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}set\ {\isacharbrackleft}set\ {\isacharparenleft}g{\isadigit{2}}\ l\ N{\isacharparenright}{\isachardot}\ l\ {\isacharless}{\isacharminus}\ {\isacharparenleft}g{\isadigit{1}}\ G{\isacharparenright}{\isacharbrackright}\ \ {\isacharequal}\ \ {\isacharbraceleft}f{\isadigit{2}}\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ set\ {\isacharparenleft}map\ set\ {\isacharparenleft}g{\isadigit{1}}\ G{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymforall}l\ {\isasymin}\ set\ {\isacharparenleft}g{\isadigit{1}}\ G{\isacharparenright}{\isachardot}\ set\ {\isacharparenleft}g{\isadigit{2}}\ l\ N{\isacharparenright}\ {\isacharequal}\ f{\isadigit{2}}\ {\isacharparenleft}set\ l{\isacharparenright}\ N{\isacharparenright}\ {\isacharminus}{\isacharminus}{\isachargreater}\ \ \isanewline
\ \ \ \ \ {\isacharbraceleft}f{\isadigit{2}}\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ set\ {\isacharparenleft}map\ set\ {\isacharparenleft}g{\isadigit{1}}\ G{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ set\ {\isacharbrackleft}set\ {\isacharparenleft}g{\isadigit{2}}\ l\ N{\isacharparenright}{\isachardot}\ l\ {\isacharless}{\isacharminus}\ g{\isadigit{1}}\ G{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\ {\isasyminter}\ Y\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R{\isacharbackquote}{\isacharbackquote}X\ {\isacharequal}\ {\isacharparenleft}R\ outside\ Y{\isacharparenright}{\isacharbackquote}{\isacharbackquote}X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Outside{\isacharunderscore}def\ Image{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}Range\ P{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Range\ Q{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}Q{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharparenleft}P\ {\isasymunion}\ Q{\isacharparenright}{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Domain{\isacharunderscore}converse\ converse{\isacharunderscore}Un\ disj{\isacharunderscore}Un{\isacharunderscore}runiq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}Range\ P{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Range\ Q{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}Q{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{7}}\ assms\ subrel{\isacharunderscore}runiq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ converse{\isacharunderscore}converse\ converse{\isacharunderscore}subset{\isacharunderscore}swap\ paste{\isacharunderscore}sub{\isacharunderscore}Un{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}card\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}a{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isadigit{1}}\ {\isasymlongleftrightarrow}\ a\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ card{\isacharunderscore}Suc{\isacharunderscore}eq\ One{\isacharunderscore}nat{\isacharunderscore}def\ \ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}within{\isacharunderscore}domain{\isacharprime}\ Suc{\isacharunderscore}neq{\isacharunderscore}Zero\ assms\ rightUniqueSetCardinality{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}inj{\isacharunderscore}on\ \ {\isacharparenleft}{\isacharpercent}a{\isachardot}\ {\isacharparenleft}{\isacharparenleft}fst\ a{\isacharcomma}\ fst\ {\isacharparenleft}snd\ a{\isacharparenright}{\isacharparenright}{\isacharcomma}\ snd\ {\isacharparenleft}snd\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ UNIV{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ mono{\isacharunderscore}tags{\isacharparenright}\ Pair{\isacharunderscore}fst{\isacharunderscore}snd{\isacharunderscore}eq\ Pair{\isacharunderscore}inject\ injI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isachargreater}\ Max\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Max{\isachardot}coboundedI\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ leD{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ A{\isachardoublequoteclose}\ {\isachardoublequoteopen}A\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}Max\ {\isacharparenleft}f{\isacharbackquote}A{\isacharparenright}\ {\isasymin}\ f{\isacharbackquote}A{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Max{\isacharunderscore}in\ finite{\isacharunderscore}imageI\ image{\isacharunderscore}is{\isacharunderscore}empty{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}argmax\ f\ A\ {\isasymsubseteq}\ f\ {\isacharminus}{\isacharbackquote}\ {\isacharbraceleft}Max\ {\isacharparenleft}f\ {\isacharbackquote}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}argmax\ f\ A\ {\isacharequal}\ A\ {\isasyminter}\ {\isacharbraceleft}\ x\ {\isachardot}\ f\ x\ {\isacharequal}\ Max\ {\isacharparenleft}f\ {\isacharbackquote}\ A{\isacharparenright}\ {\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}x\ {\isasymin}\ argmax\ f\ X{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}x\ {\isasymin}\ X\ {\isacharampersand}\ f\ x\ {\isacharequal}\ Max\ {\isacharparenleft}f\ {\isacharbackquote}\ X{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ argmax{\isachardot}simps\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ rangeEmpty{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ finitePairSecondRange{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymforall}\ pair\ {\isasymin}\ R{\isachardot}\ finite\ {\isacharparenleft}snd\ pair{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isasymforall}\ y\ {\isasymin}\ Range\ R{\isachardot}\ finite\ y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}fst\ {\isacharbackquote}\ P\ {\isacharequal}\ snd\ {\isacharbackquote}\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}fst\ pair\ {\isacharequal}\ snd\ {\isacharparenleft}flip\ pair{\isacharparenright}\ {\isacharampersand}\ snd\ pair\ {\isacharequal}\ fst\ {\isacharparenleft}flip\ pair{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ flip{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ flip{\isacharunderscore}flip{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}flip\ {\isasymcirc}\ flip\ \ \ {\isacharequal}\ \ \ id{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ flip{\isacharunderscore}flip\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}fst\ {\isacharequal}\ {\isacharparenleft}snd{\isasymcirc}flip{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}snd\ {\isacharequal}\ {\isacharparenleft}fst{\isasymcirc}flip{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}inj{\isacharunderscore}on\ fst\ P\ {\isacharequal}\ inj{\isacharunderscore}on\ {\isacharparenleft}snd{\isasymcirc}flip{\isacharparenright}\ P{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}inj{\isacharunderscore}on\ fst\ P\ {\isacharequal}\ inj{\isacharunderscore}on\ snd\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{0}}\ flip{\isacharunderscore}conv\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ converse{\isacharunderscore}converse\ inj{\isacharunderscore}on{\isacharunderscore}imageI\ lm{\isadigit{0}}{\isadigit{5}}{\isadigit{9}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ setsumPairsInverse{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}f\ {\isasymcirc}\ snd{\isacharparenright}\ P\ {\isacharequal}\ setsum\ f\ {\isacharparenleft}Range\ P{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{2}}\ converse{\isacharunderscore}converse\ rightUniqueInjectiveOnFirst\ rightUniqueInjectiveOnFirst\isanewline
\ \ \ \ \ \ \ \ setsum{\isachardot}reindex\ snd{\isacharunderscore}eq{\isacharunderscore}Range\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ notEmptyFinestpart{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}finestpart\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ g\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ {\isacharparenleft}g{\isacharbackquote}X{\isacharparenright}\ {\isacharequal}\ setsum\ {\isacharparenleft}f\ {\isasymcirc}\ g{\isacharparenright}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ setsum{\isachardot}reindex{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ functionOnFirstEqualsSecond{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ {\isachardoublequoteopen}z\ {\isasymin}\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R{\isacharcomma}{\isacharcomma}{\isacharparenleft}fst\ z{\isacharparenright}\ {\isacharequal}\ snd\ z{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ rightUniquePair\ surjective{\isacharunderscore}pairing{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}toFunction\ R{\isacharparenright}\ {\isacharparenleft}Domain\ R{\isacharparenright}\ {\isacharequal}\ setsum\ snd\ R{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ toFunction{\isacharunderscore}def\ setsum{\isachardot}reindex{\isacharunderscore}cong\ functionOnFirstEqualsSecond\isanewline
\ \ \ \ \ \ \ \ rightUniqueInjectiveOnFirst\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ fst{\isacharunderscore}eq{\isacharunderscore}Domain{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}toFunction\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}X\ {\isasyminter}\ Domain\ f{\isacharparenright}\ {\isacharequal}\ setsum\ snd\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}commute\ restrictedDomain{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Range\ {\isacharparenleft}R\ outside\ X{\isacharparenright}\ {\isacharequal}\ R{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}{\isacharparenleft}Domain\ R{\isacharparenright}\ {\isacharminus}\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}idemp\ ImageE\ Range{\isachardot}intros\ Range{\isacharunderscore}outside{\isacharunderscore}sub{\isacharunderscore}Image{\isacharunderscore}Domain\ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ lm{\isadigit{0}}{\isadigit{4}}{\isadigit{2}}\ order{\isacharunderscore}class{\isachardot}order{\isachardot}antisym\ subsetI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}R{\isacharbar}{\isacharbar}X{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ X\ {\isacharequal}\ R{\isacharbackquote}{\isacharbackquote}X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ Int{\isacharunderscore}absorb\ doubleRestriction\ restrictedRange\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ f{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ doubleRestriction\ restrictedRange\ Int{\isacharunderscore}empty{\isacharunderscore}right\ Int{\isacharunderscore}iff\ \isanewline
\ \ \ \ \ \ \ \ Int{\isacharunderscore}insert{\isacharunderscore}right{\isacharunderscore}if{\isadigit{1}}\ restrictedDomain\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ X\ {\isasyminter}\ Domain\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharcomma}{\isacharcomma}x\ {\isacharequal}\ f{\isacharcomma}{\isacharcomma}x{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ doubleRestriction\ restrictedRange\ Int{\isacharunderscore}empty{\isacharunderscore}right\ Int{\isacharunderscore}iff\ Int{\isacharunderscore}insert{\isacharunderscore}right{\isacharunderscore}if{\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ eval{\isacharunderscore}rel{\isachardot}simps\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}toFunction\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}X\ {\isasyminter}\ Domain\ f{\isacharparenright}\ {\isacharequal}\ setsum\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ {\isacharparenleft}X\ {\isasyminter}\ Domain\ f{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsum{\isachardot}cong\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{9}}\ toFunction{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsumRestrictedToDomainInvariant{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ {\isacharparenleft}X\ {\isasyminter}\ Domain\ f{\isacharparenright}\ {\isacharequal}\ setsum\ snd\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{5}}\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsumRestrictedOnFunction{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}toFunction\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}X\ {\isasyminter}\ Domain\ f{\isacharparenright}\ {\isacharequal}\ setsum\ snd\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{4}}\ restrictedDomain\ Int{\isacharunderscore}commute\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cardFinestpart{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}card\ {\isacharparenleft}finestpart\ X{\isacharparenright}\ {\isacharequal}\ card\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}\ card{\isacharunderscore}image\ inj{\isacharunderscore}on{\isacharunderscore}inverseI\ the{\isacharunderscore}elem{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}finestpart\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ \ \ \ {\isacharampersand}\ \ \ \ card\ {\isasymcirc}\ finestpart\ {\isacharequal}\ card{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ cardFinestpart\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ finiteFinestpart{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}finite\ {\isacharparenleft}finestpart\ X{\isacharparenright}\ {\isacharequal}\ finite\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{1}}\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ card{\isacharunderscore}eq{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}iff\ empty{\isacharunderscore}is{\isacharunderscore}image\ finite{\isachardot}simps\ cardFinestpart{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}finite\ {\isasymcirc}\ finestpart\ {\isacharequal}\ finite{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finiteFinestpart\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ finestpartSubset{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}finestpart\ X\ {\isasymsubseteq}\ finestpart\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ image{\isacharunderscore}mono{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}finestpart\ x\ {\isasymsubseteq}\ finestpart\ {\isacharparenleft}{\isasymUnion}\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ finestpartSubset\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Union{\isacharunderscore}upper{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}finestpart\ {\isacharbackquote}\ XX{\isacharparenright}\ {\isasymsubseteq}\ finestpart\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}finestpart\ {\isacharbackquote}\ XX{\isacharparenright}\ {\isasymsupseteq}\ finestpart\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L\ {\isasymsupseteq}\ {\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ finestpart{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ commuteUnionFinestpart{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}finestpart\ {\isacharbackquote}\ XX{\isacharparenright}\ {\isacharequal}\ finestpart\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{4}}\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ unionImage{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ a{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}{\isacharbar}\ x\ y{\isachardot}\ y\ {\isasymin}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharampersand}\ x\ {\isasymin}\ Domain\ a{\isacharbraceright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}{\isacharbar}\ x\ y{\isachardot}\ y\ {\isasymin}\ a{\isacharcomma}{\isacharcomma}x\ {\isacharampersand}\ x\ {\isasymin}\ Domain\ a{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}\ cSup{\isacharunderscore}singleton{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}card\ {\isacharparenleft}Domain\ P{\isacharparenright}\ {\isacharequal}\ card\ P{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ rightUniqueInjectiveOnFirst\ card{\isacharunderscore}image\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Domain{\isacharunderscore}fst{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ finiteDomainImpliesFinite{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}Domain\ f{\isacharparenright}\ {\isacharequal}\ finite\ f{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Domain{\isacharunderscore}empty{\isacharunderscore}iff\ card{\isacharunderscore}eq{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}iff\ finite{\isachardot}emptyI\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sumCurry{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}setsum\ {\isacharparenleft}{\isacharparenleft}curry\ f{\isacharparenright}\ x{\isacharparenright}\ Y\ {\isacharequal}\ setsum\ f\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymtimes}\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}f{\isacharequal}{\isachardoublequoteopen}{\isacharpercent}\ y{\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}g{\isacharequal}{\isachardoublequoteopen}{\isacharparenleft}curry\ f{\isacharparenright}\ x{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}h{\isacharequal}f\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ {\isacharquery}f\ Y{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ Pair{\isacharunderscore}inject\ inj{\isacharunderscore}onI{\isacharparenright}\ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymtimes}\ Y\ {\isacharequal}\ {\isacharquery}f\ {\isacharbackquote}\ Y{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ y{\isachardot}\ y\ {\isasymin}\ Y\ {\isasymlongrightarrow}\ {\isacharquery}g\ y\ {\isacharequal}\ {\isacharquery}h\ {\isacharparenleft}{\isacharquery}f\ y{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ setsum{\isachardot}reindex{\isacharunderscore}cong\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}setsum\ {\isacharparenleft}{\isacharpercent}y{\isachardot}\ f\ {\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharparenright}\ Y\ {\isacharequal}\ setsum\ f\ {\isacharparenleft}{\isacharbraceleft}x{\isacharbraceright}{\isasymtimes}Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ sumCurry\ Sigma{\isacharunderscore}cong\ curry{\isacharunderscore}def\ setsum{\isachardot}cong\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ X\ {\isacharequal}\ setsum\ f\ {\isacharparenleft}X{\isacharminus}Y{\isacharparenright}\ {\isacharplus}\ {\isacharparenleft}setsum\ f\ {\isacharparenleft}X\ {\isasyminter}\ Y{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Diff{\isacharunderscore}iff\ IntD{\isadigit{2}}\ Un{\isacharunderscore}Diff{\isacharunderscore}Int\ finite{\isacharunderscore}Un\ inf{\isacharunderscore}commute\ setsum{\isachardot}union{\isacharunderscore}inter{\isacharunderscore}neutral\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}Domain\ Q{\isasyminter}X{\isacharparenright}\ \ {\isacharequal}\ \ Q{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}Domain\ Q{\isasyminter}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ paste{\isacharunderscore}def\ Outside{\isacharunderscore}def\ Image{\isacharunderscore}def\ Domain{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasyminter}{\isacharparenleft}Domain\ Q{\isacharparenright}{\isacharparenright}\ \ {\isacharequal}\ \ Q{\isacharbackquote}{\isacharbackquote}X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ Int{\isacharunderscore}commute\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{9}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{7}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\ {\isasyminter}\ {\isacharparenleft}Domain\ Q{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ X\ {\isacharequal}\ {\isacharparenleft}P\ outside\ {\isacharparenleft}Domain\ Q{\isacharparenright}{\isacharparenright}{\isacharbackquote}{\isacharbackquote}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ paste{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X{\isasyminter}Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}P\ outside\ Y{\isacharparenright}{\isacharbackquote}{\isacharbackquote}X{\isacharequal}P{\isacharbackquote}{\isacharbackquote}X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X{\isasyminter}\ {\isacharparenleft}Domain\ Q{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isacharbackquote}{\isacharbackquote}X{\isacharequal}P{\isacharbackquote}{\isacharbackquote}X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{1}}\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}card{\isacharparenleft}X{\isasyminter}Y{\isacharparenright}\ {\isacharequal}\ card\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}lower{\isadigit{1}}\ Int{\isacharunderscore}lower{\isadigit{2}}\ card{\isacharunderscore}seteq\ order{\isacharunderscore}refl{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cardinalityIntersectionEquality{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}card\ X\ {\isacharequal}\ card\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}card\ {\isacharparenleft}X{\isasyminter}Y{\isacharparenright}\ {\isacharequal}\ card\ X{\isacharparenright}\ \ \ \ \ {\isacharequal}\ \ \ \ {\isacharparenleft}X\ {\isacharequal}\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ card{\isacharunderscore}seteq\ le{\isacharunderscore}iff{\isacharunderscore}inf\ order{\isacharunderscore}refl{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{5}}{\isacharcolon}\ \ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}P\ xx{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}f\ x{\isacharparenright}{\isacharbar}\ x{\isachardot}\ P\ x{\isacharbraceright}{\isacharcomma}{\isacharcomma}xx\ \ \ {\isacharequal}\ \ \ f\ xx{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}F{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}f\ x{\isacharparenright}{\isacharbar}\ x{\isachardot}\ P\ x{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}X{\isacharequal}{\isachardoublequoteopen}{\isacharquery}F{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}xx{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}X{\isacharequal}{\isacharbraceleft}f\ xx{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Image{\isacharunderscore}def\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ fastforce\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ graphEqImage{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}graph\ X\ f{\isacharcomma}{\isacharcomma}x\ \ \ {\isacharequal}\ \ \ f\ x{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ graph{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharparenright}\ Gr{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Graph\ f{\isacharcomma}{\isacharcomma}x\ \ \ \ {\isacharequal}\ \ \ \ f\ x{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ UNIV{\isacharunderscore}I\ graphEqImage\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}toFunction\ {\isacharparenleft}Graph\ f{\isacharparenright}\ \ \ \ {\isacharequal}\ \ \ \ f{\isachardoublequoteclose}\ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L{\isacharequal}{\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isacommand{fix}\isamarkupfalse%
\ x\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}L\ x{\isacharequal}f\ x{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ toFunction{\isacharunderscore}def\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ metis\isacommand{{\isacharbraceright}}\isamarkupfalse%
\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R\ outside\ X\ {\isasymsubseteq}\ R{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ outside{\isacharunderscore}union{\isacharunderscore}restrict\ subset{\isacharunderscore}Un{\isacharunderscore}eq\ sup{\isacharunderscore}left{\isacharunderscore}idem{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}Range{\isacharparenleft}f\ outside\ X{\isacharparenright}\ {\isasymsupseteq}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharminus}{\isacharparenleft}f{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}P{\isasyminverse}{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}{\isacharparenleft}Range\ P{\isacharparenright}{\isacharminus}Y{\isacharparenright}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharparenleft}P{\isasyminverse}{\isacharparenright}{\isacharbackquote}{\isacharbackquote}Y{\isacharparenright}\ \ \ {\isacharequal}\ \ \ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ rightUniqueFunctionAfterInverse\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}P{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}{\isacharparenleft}Domain\ P{\isacharparenright}\ {\isacharminus}\ X{\isacharparenright}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}P{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}\ \ {\isacharequal}\ \ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ rightUniqueFunctionAfterInverse\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}Range{\isacharparenleft}f\ outside\ X{\isacharparenright}\ {\isasymsubseteq}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharminus}{\isacharparenleft}f{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Diff{\isacharunderscore}triv\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{1}}\ lm{\isadigit{0}}{\isadigit{6}}{\isadigit{6}}\ Diff{\isacharunderscore}iff\ ImageE\ Range{\isacharunderscore}iff\ subsetI\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ rangeOutside{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}Range{\isacharparenleft}f\ outside\ X{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}Range\ f{\isacharparenright}{\isacharminus}{\isacharparenleft}f{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{8}}{\isadigit{9}}\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ order{\isacharunderscore}class{\isachardot}order{\isachardot}antisym{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ unionIntersectionEmpty{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymforall}x{\isasymin}X{\isachardot}\ {\isasymforall}y{\isasymin}Y{\isachardot}\ x{\isasyminter}y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isacharparenleft}{\isasymUnion}X{\isacharparenright}{\isasyminter}{\isacharparenleft}{\isasymUnion}\ Y{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ setEqualityAsDifference{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharbraceleft}x{\isacharbraceright}{\isacharminus}{\isacharbraceleft}y{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ \ {\isacharequal}\ \ {\isacharparenleft}x\ {\isacharequal}\ y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}R\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ R\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R{\isacharbackquote}{\isacharbackquote}X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}{\isacharbraceright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}empty{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}R\ {\isasymsubseteq}\ {\isacharparenleft}Domain\ R{\isacharparenright}\ {\isasymtimes}\ {\isacharparenleft}Range\ R{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ finiteRelationCharacterization{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}finite\ {\isacharparenleft}Domain\ Q{\isacharparenright}\ {\isacharampersand}\ finite\ {\isacharparenleft}Range\ Q{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ finite\ Q{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ rev{\isacharunderscore}finite{\isacharunderscore}subset\ finite{\isacharunderscore}SigmaI\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{5}}\ finite{\isacharunderscore}Domain\ finite{\isacharunderscore}Range\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ familyUnionFiniteEverySetFinite{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}X\ {\isasymin}\ XX{\isachardot}\ finite\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Union{\isacharunderscore}upper\ finite{\isacharunderscore}subset{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharbackquote}{\isacharbackquote}Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f{\isacharbackquote}{\isacharbackquote}X\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ rightUniqueFunctionAfterInverse\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}mono\ order{\isacharunderscore}refl\ subset{\isacharunderscore}trans{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}y\ {\isasymin}\ f{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f{\isacharcomma}{\isacharcomma}x\ {\isacharequal}\ y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}singleton{\isacharunderscore}iff\ rightUniquePair{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{Indicator function in set-theoretical form.%
}
\isamarkuptrue%
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}Outside{\isacharprime}\ X\ f\ {\isacharequal}{\isacharequal}\ f\ outside\ X{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}Chi\ X\ Y\ {\isacharequal}{\isacharequal}\ {\isacharparenleft}Y\ {\isasymtimes}\ {\isacharbraceleft}{\isadigit{0}}{\isacharcolon}{\isacharcolon}nat{\isacharbraceright}{\isacharparenright}\ {\isacharplus}{\isacharasterisk}\ {\isacharparenleft}X\ {\isasymtimes}\ {\isacharbraceleft}{\isadigit{1}}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{notation}\isamarkupfalse%
\ Chi\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharless}{\isacharbar}{\isacharbar}{\isachardoublequoteclose}\ {\isadigit{8}}{\isadigit{0}}{\isacharparenright}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}chii\ X\ Y\ {\isacharequal}{\isacharequal}\ toFunction\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}{\isacharbar}\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{notation}\isamarkupfalse%
\ chii\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharless}{\isacharbar}{\isachardoublequoteclose}\ {\isadigit{8}}{\isadigit{0}}{\isacharparenright}\isanewline
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}chi\ X\ {\isacharequal}{\isacharequal}\ indicator\ X{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}runiq\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}{\isacharbar}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{4}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isadigit{1}}\ {\isasymin}\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}{\isacharbar}\ Y{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ toFunction{\isacharunderscore}def\ paste{\isacharunderscore}def\ Outside{\isacharunderscore}def\ runiq{\isacharunderscore}def\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ Y{\isacharminus}X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymin}\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}{\isacharbar}\ Y{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ toFunction{\isacharunderscore}def\ paste{\isacharunderscore}def\ Outside{\isacharunderscore}def\ runiq{\isacharunderscore}def\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharless}{\isacharbar}{\isacharbar}\ Y{\isacharparenright}{\isacharcomma}{\isacharcomma}x\ {\isacharequal}\ chi\ X\ x{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L{\isacharequal}{\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{4}}\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{9}}\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}\ lm{\isadigit{0}}{\isadigit{9}}{\isadigit{7}}\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ DiffI\ Un{\isacharunderscore}iff\ indicator{\isacharunderscore}simps{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ indicator{\isacharunderscore}simps{\isacharparenleft}{\isadigit{2}}{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ x\ {\isacharequal}\ chi\ X\ x{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ toFunction{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ {\isacharparenleft}X{\isasymunion}Y{\isacharparenright}\ {\isacharequal}\ setsum\ {\isacharparenleft}chi\ X{\isacharparenright}\ {\isacharparenleft}X{\isasymunion}Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{2}}\ setsum{\isachardot}cong\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x{\isasymin}X{\isachardot}\ f\ x\ {\isacharequal}\ g\ x{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ X\ {\isacharequal}\ setsum\ g\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}poly{\isacharunderscore}guards{\isacharunderscore}query{\isacharparenright}\ setsum{\isachardot}cong{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x{\isasymin}X{\isachardot}\ f\ x\ {\isacharequal}\ g\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}Y{\isasymsubseteq}X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ Y\ {\isacharequal}\ setsum\ g\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ contra{\isacharunderscore}subsetD{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Z\ {\isasymsubseteq}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ Z\ {\isacharequal}\ setsum\ {\isacharparenleft}chi\ X{\isacharparenright}\ Z{\isachardoublequoteclose}\ \ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbang}x{\isacharcolon}Z{\isachardot}{\isacharparenleft}X{\isacharless}{\isacharbar}Y{\isacharparenright}\ x{\isacharequal}{\isacharparenleft}chi\ X{\isacharparenright}\ x{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{2}}\ in{\isacharunderscore}mono\ \isacommand{by}\isamarkupfalse%
\ metis\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}setsum\ {\isacharparenleft}chi\ X{\isacharparenright}\ {\isacharparenleft}Z\ {\isacharminus}\ X{\isacharparenright}\ {\isacharequal}\ {\isadigit{0}}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Z\ {\isasymsubseteq}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ {\isacharparenleft}Z\ {\isacharminus}\ X{\isacharparenright}\ {\isacharequal}\ {\isadigit{0}}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{7}}\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{6}}\ Diff{\isacharunderscore}iff\ in{\isacharunderscore}mono\ subsetI\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ Z\ \ \ \ {\isacharequal}\ \ \ \ setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ {\isacharparenleft}Z\ {\isacharminus}\ X{\isacharparenright}\ \ \ {\isacharplus}\ \ {\isacharparenleft}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ {\isacharparenleft}Z\ {\isasyminter}\ X{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{8}}\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Z\ {\isasymsubseteq}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ Z\ {\isacharequal}\ setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ {\isacharparenleft}Z\ {\isasyminter}\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{8}}\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{8}}\ comm{\isacharunderscore}monoid{\isacharunderscore}add{\isacharunderscore}class{\isachardot}add{\isachardot}left{\isacharunderscore}neutral\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}chi\ X{\isacharparenright}\ Z\ {\isacharequal}\ card\ {\isacharparenleft}X\ {\isasyminter}\ Z{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsum{\isacharunderscore}indicator{\isacharunderscore}eq{\isacharunderscore}card\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}commute{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Z\ {\isasymsubseteq}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ Z\ {\isacharequal}\ card\ {\isacharparenleft}Z\ {\isasyminter}\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{1}}{\isadigit{0}}{\isadigit{6}}\ setsum{\isacharunderscore}indicator{\isacharunderscore}eq{\isacharunderscore}card{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ subsetCardinality{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Z\ {\isasymsubseteq}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ X{\isacharparenright}\ {\isacharminus}\ {\isacharparenleft}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ Z{\isacharparenright}\ {\isacharequal}\ card\ X\ {\isacharminus}\ card\ {\isacharparenleft}Z\ {\isasyminter}\ X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}absorb{\isadigit{2}}\ Un{\isacharunderscore}upper{\isadigit{1}}\ card{\isacharunderscore}infinite\ equalityE\ setsum{\isachardot}infinite{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ differenceSetsumVsCardinality{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Z\ {\isasymsubseteq}\ X\ {\isasymunion}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}int\ {\isacharparenleft}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ X{\isacharparenright}\ {\isacharminus}\ int\ {\isacharparenleft}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ Z{\isacharparenright}\ {\isacharequal}\ \ int\ {\isacharparenleft}card\ X{\isacharparenright}\ {\isacharminus}\ int\ {\isacharparenleft}card\ {\isacharparenleft}Z\ {\isasyminter}\ X{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}absorb{\isadigit{2}}\ Un{\isacharunderscore}upper{\isadigit{1}}\ card{\isacharunderscore}infinite\ equalityE\ setsum{\isachardot}infinite{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}int\ {\isacharparenleft}n{\isacharcolon}{\isacharcolon}nat{\isacharparenright}\ {\isacharequal}\ real\ n{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ differenceSetsumVsCardinalityReal{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Z{\isasymsubseteq}X{\isasymunion}Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}real\ {\isacharparenleft}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ X{\isacharparenright}\ {\isacharminus}\ real\ {\isacharparenleft}setsum\ {\isacharparenleft}X\ {\isacharless}{\isacharbar}\ Y{\isacharparenright}\ Z{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ \ \ \ real\ {\isacharparenleft}card\ X{\isacharparenright}\ {\isacharminus}\ real\ {\isacharparenleft}card\ {\isacharparenleft}Z\ {\isasyminter}\ X{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}absorb{\isadigit{2}}\ Un{\isacharunderscore}upper{\isadigit{1}}\ card{\isacharunderscore}infinite\ equalityE\ setsum{\isachardot}infinite{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{Lists%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymexists}\ n\ {\isasymin}\ {\isacharbraceleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ l{\isacharbraceright}{\isachardot}\ P\ {\isacharparenleft}l{\isacharbang}n{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbrackleft}n{\isachardot}\ n\ {\isasymleftarrow}\ {\isacharbrackleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ l{\isacharbrackright}{\isacharcomma}\ P\ {\isacharparenleft}l{\isacharbang}n{\isacharparenright}{\isacharbrackright}\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}ll\ {\isasymin}\ set\ {\isacharparenleft}l{\isacharcolon}{\isacharcolon}{\isacharprime}a\ list{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ n{\isasymin}\ {\isacharparenleft}nth\ l{\isacharparenright}\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}set\ l{\isacharparenright}{\isachardot}\ ll{\isacharequal}l{\isacharbang}n{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ in{\isacharunderscore}set{\isacharunderscore}conv{\isacharunderscore}nth\ vimageI{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}ll\ {\isasymin}\ set\ {\isacharparenleft}l{\isacharcolon}{\isacharcolon}{\isacharprime}a\ list{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ n{\isachardot}\ ll{\isacharequal}l{\isacharbang}n\ {\isacharampersand}\ n\ {\isacharless}\ size\ l\ {\isacharampersand}\ n\ {\isachargreater}{\isacharequal}\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ in{\isacharunderscore}set{\isacharunderscore}conv{\isacharunderscore}nth\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ le{\isadigit{0}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}P\ {\isacharminus}{\isacharbackquote}\ {\isacharbraceleft}True{\isacharbraceright}\ {\isasyminter}\ set\ l\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ n\ {\isasymin}\ {\isacharbraceleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ l{\isacharbraceright}{\isachardot}\ P\ {\isacharparenleft}l{\isacharbang}n{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nonEmptyListFiltered{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}P\ {\isacharminus}{\isacharbackquote}\ {\isacharbraceleft}True{\isacharbraceright}\ {\isasyminter}\ set\ l\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbrackleft}n{\isachardot}\ n\ {\isasymleftarrow}\ {\isacharbrackleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ l{\isacharbrackright}{\isacharcomma}\ P\ {\isacharparenleft}l{\isacharbang}n{\isacharparenright}{\isacharbrackright}\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ filterpositions{\isadigit{2}}{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{7}}\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}nth\ l{\isacharparenright}\ {\isacharbackquote}\ set\ {\isacharparenleft}{\isacharbrackleft}n{\isachardot}\ n\ {\isasymleftarrow}\ {\isacharbrackleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ l{\isacharbrackright}{\isacharcomma}\ {\isacharparenleft}{\isacharpercent}x{\isachardot}\ x{\isasymin}X{\isacharparenright}\ {\isacharparenleft}l{\isacharbang}n{\isacharparenright}{\isacharbrackright}{\isacharparenright}\ {\isasymsubseteq}\ X{\isasyminter}set\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}nth\ l{\isacharparenright}{\isacharbackquote}\ set\ {\isacharparenleft}filterpositions{\isadigit{2}}\ {\isacharparenleft}{\isacharpercent}x{\isachardot}{\isacharparenleft}x{\isasymin}X{\isacharparenright}{\isacharparenright}\ l{\isacharparenright}\ {\isasymsubseteq}\ X\ {\isasyminter}\ \ set\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ filterpositions{\isadigit{2}}{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}n{\isasymin}{\isacharbraceleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}N{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isacharparenleft}n{\isacharcolon}{\isacharcolon}nat{\isacharparenright}\ {\isacharless}\ N{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ atLeast{\isadigit{0}}LessThan\ lessThan{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ {\isacharbraceleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ list{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}nth\ list{\isacharparenright}{\isacharbackquote}X\ {\isasymsubseteq}\ set\ list{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ atLeastLessThan{\isacharunderscore}def\ atLeast{\isadigit{0}}LessThan\ lessThan{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}{\isacharbrackleft}n{\isachardot}\ n\ {\isasymleftarrow}\ {\isacharbrackleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ l{\isacharbrackright}{\isacharcomma}\ P\ {\isacharparenleft}l{\isacharbang}n{\isacharparenright}{\isacharbrackright}{\isacharparenright}\ {\isasymsubseteq}\ {\isacharbraceleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ l{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}filterpositions{\isadigit{2}}\ pre\ list{\isacharparenright}\ {\isasymsubseteq}\ {\isacharbraceleft}{\isadigit{0}}{\isachardot}{\isachardot}{\isacharless}size\ list{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ filterpositions{\isadigit{2}}{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Computing all the permutations of a list%
}
\isamarkuptrue%
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}rotateLeft\ {\isacharequal}{\isacharequal}\ rotate{\isachardoublequoteclose}\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}rotateRight\ n\ l\ {\isacharequal}{\isacharequal}\ rotateLeft\ {\isacharparenleft}size\ l\ {\isacharminus}\ {\isacharparenleft}n\ mod\ {\isacharparenleft}size\ l{\isacharparenright}{\isacharparenright}{\isacharparenright}\ l{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}insertAt\ x\ l\ n\ {\isacharequal}{\isacharequal}\ rotateRight\ n\ {\isacharparenleft}x{\isacharhash}{\isacharparenleft}rotateLeft\ n\ l{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{fun}\isamarkupfalse%
\ perm{\isadigit{2}}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}perm{\isadigit{2}}\ {\isacharbrackleft}{\isacharbrackright}\ {\isacharequal}\ {\isacharparenleft}{\isacharpercent}n{\isachardot}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\ \isanewline
\ \ {\isachardoublequoteopen}perm{\isadigit{2}}\ {\isacharparenleft}x{\isacharhash}l{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isacharpercent}n{\isachardot}\ insertAt\ x\ {\isacharparenleft}{\isacharparenleft}perm{\isadigit{2}}\ l{\isacharparenright}\ {\isacharparenleft}n\ div\ {\isacharparenleft}{\isadigit{1}}{\isacharplus}size\ l{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}n\ mod\ {\isacharparenleft}{\isadigit{1}}{\isacharplus}size\ l{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}takeAll\ P\ list\ {\isacharequal}{\isacharequal}\ map\ {\isacharparenleft}nth\ list{\isacharparenright}\ {\isacharparenleft}filterpositions{\isadigit{2}}\ P\ list{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ permutationNotEmpty{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}l\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}perm{\isadigit{2}}\ l\ n\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ perm{\isadigit{2}}{\isacharunderscore}def\ perm{\isadigit{2}}{\isachardot}simps{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ rotate{\isacharunderscore}is{\isacharunderscore}Nil{\isacharunderscore}conv\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ neq{\isacharunderscore}Nil{\isacharunderscore}conv{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}takeAll\ P\ list{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isacharparenleft}nth\ list{\isacharparenright}\ {\isacharbackquote}\ set\ {\isacharparenleft}filterpositions{\isadigit{2}}\ P\ list{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ listIntersectionWithSet{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}takeAll\ {\isacharparenleft}{\isacharpercent}x{\isachardot}{\isacharparenleft}x{\isasymin}X{\isacharparenright}{\isacharparenright}\ l{\isacharparenright}\ {\isasymsubseteq}\ \ {\isacharparenleft}X\ {\isasyminter}\ set\ l{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isadigit{9}}\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}takeAll\ P\ list{\isacharparenright}\ {\isasymsubseteq}\ set\ list{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{3}}\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{4}}\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}insertAt\ x\ l\ n{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ set\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ set\ {\isacharparenleft}perm{\isadigit{2}}\ {\isacharbrackleft}{\isacharbrackright}\ n{\isacharparenright}\ {\isacharequal}\ set\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isacharparenleft}set\ {\isacharparenleft}perm{\isadigit{2}}\ l\ n{\isacharparenright}\ {\isacharequal}\ set\ l{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}set\ {\isacharparenleft}perm{\isadigit{2}}\ {\isacharparenleft}x{\isacharhash}l{\isacharparenright}\ n{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ set\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ perm{\isadigit{2}}{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\ \isanewline
\isacommand{corollary}\isamarkupfalse%
\ permutationInvariance{\isacharcolon}\ \isanewline
\ \ \ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ set\ {\isacharparenleft}perm{\isadigit{2}}\ {\isacharparenleft}l{\isacharcolon}{\isacharcolon}{\isacharprime}a\ list{\isacharparenright}\ n{\isacharparenright}\ {\isacharequal}\ set\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ l{\isacharparenright}\isanewline
\ \ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P\ {\isacharequal}\ {\isachardoublequoteopen}{\isacharpercent}l{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}a\ list{\isacharparenright}{\isachardot}\ {\isacharparenleft}{\isasymforall}n{\isachardot}\ set\ {\isacharparenleft}perm{\isadigit{2}}\ l\ n{\isacharparenright}\ \ {\isacharequal}\ \ set\ l{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}P\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ \isacommand{fix}\isamarkupfalse%
\ l\ \isanewline
\ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}P\ l{\isachardoublequoteclose}\ \isacommand{then}\isamarkupfalse%
\ \isanewline
\ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}P\ {\isacharparenleft}x{\isacharhash}l{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ takeAllPermutation{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}set\ {\isacharparenleft}perm{\isadigit{2}}\ {\isacharparenleft}takeAll\ {\isacharparenleft}{\isacharpercent}x{\isachardot}{\isacharparenleft}x{\isasymin}X{\isacharparenright}{\isacharparenright}\ l{\isacharparenright}\ n{\isacharparenright}\ \ {\isasymsubseteq}\ \ X\ {\isasyminter}\ set\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ listIntersectionWithSet\ permutationInvariance\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{A more computable version of \isa{toFunction}.%
}
\isamarkuptrue%
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}toFunctionWithFallback\ R\ fallback\ {\isacharequal}{\isacharequal}\ {\isacharparenleft}{\isacharpercent}\ x{\isachardot}\ if\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}R{\isacharcomma}{\isacharcomma}x{\isacharbraceright}{\isacharparenright}\ then\ {\isacharparenleft}R{\isacharcomma}{\isacharcomma}x{\isacharparenright}\ else\ fallback{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{notation}\isamarkupfalse%
\ \isanewline
\ \ toFunctionWithFallback\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}Else{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}setsum{\isacharprime}\ R\ X\ {\isacharequal}{\isacharequal}\ setsum\ {\isacharparenleft}R\ Else\ {\isadigit{0}}{\isacharparenright}\ X{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ x\ {\isacharequal}\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ x{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval\ toFunction{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ {\isacharparenleft}X{\isasyminter}{\isacharparenleft}Domain\ f{\isacharparenright}{\isacharparenright}\ \ {\isacharequal}\ \ setsum\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ {\isacharparenleft}X{\isasyminter}{\isacharparenleft}Domain\ f{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsum{\isachardot}cong\ lm{\isadigit{1}}{\isadigit{2}}{\isadigit{9}}\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Y\ {\isasymsubseteq}\ f{\isacharminus}{\isacharbackquote}{\isacharbraceleft}{\isadigit{0}}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ Y\ \ {\isacharequal}\ \ {\isadigit{0}}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ set{\isacharunderscore}rev{\isacharunderscore}mp\ setsum{\isachardot}neutral\ vimage{\isacharunderscore}singleton{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Y\ {\isasymsubseteq}\ f{\isacharminus}{\isacharbackquote}{\isacharbraceleft}{\isadigit{0}}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ X\ {\isacharequal}\ setsum\ f\ {\isacharparenleft}X{\isacharminus}Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Int{\isacharunderscore}lower{\isadigit{2}}\ comm{\isacharunderscore}monoid{\isacharunderscore}add{\isacharunderscore}class{\isachardot}add{\isachardot}right{\isacharunderscore}neutral\ inf{\isachardot}boundedE\ inf{\isachardot}orderE\ lm{\isadigit{0}}{\isadigit{7}}{\isadigit{8}}\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{1}}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharminus}{\isacharparenleft}Domain\ f{\isacharparenright}\ {\isasymsubseteq}\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}{\isacharminus}{\isacharbackquote}{\isacharbraceleft}{\isadigit{0}}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ X\ \ \ \ {\isacharequal}\ \ \ setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ {\isacharparenleft}X{\isasyminter}Domain\ f{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}X{\isasyminter}Domain\ f{\isacharequal}X{\isacharminus}{\isacharparenleft}{\isacharminus}Domain\ f{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{3}}\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ {\isacharparenleft}X{\isasyminter}Domain\ f{\isacharparenright}\ \ \ {\isacharequal}\ \ \ setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ X{\isachardoublequoteclose}\isanewline
\ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L{\isacharequal}{\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R{\isacharequal}{\isacharquery}L{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{4}}{\isacharparenright}\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ X\ {\isacharequal}\ setsum\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ {\isacharparenleft}X{\isasyminter}Domain\ f{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L{\isacharequal}{\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isacharequal}\ setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ {\isacharparenleft}X{\isasyminter}Domain\ f{\isacharparenright}\ {\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}L{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{5}}{\isacharparenright}\ \isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}setsum\ {\isacharparenleft}f\ Else\ {\isadigit{0}}{\isacharparenright}\ X\ {\isacharequal}\ setsum{\isacharprime}\ f\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}setsum\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ {\isacharparenleft}X{\isasyminter}Domain\ f{\isacharparenright}\ \ \ {\isacharequal}\ \ \ setsum{\isacharprime}\ f\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{7}}\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}argmax\ {\isacharparenleft}setsum{\isacharprime}\ b{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}argmax\ {\isasymcirc}\ setsum{\isacharprime}{\isacharparenright}\ b{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{cardinalities of sets.%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}A{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}B{\isacharparenright}\ {\isacharequal}\ R{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}A{\isasyminter}B{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ rightUniqueInjectiveOnFirst\ converse{\isacharunderscore}Image\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ intersectionEmptyRelationIntersectionEmpty{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ {\isachardoublequoteopen}X{\isadigit{1}}\ {\isasyminter}\ X{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}X{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}X{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ disj{\isacharunderscore}Domain{\isacharunderscore}imp{\isacharunderscore}disj{\isacharunderscore}Image\ inf{\isacharunderscore}assoc\ inf{\isacharunderscore}bot{\isacharunderscore}right{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}trivial\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}trivial\ {\isacharparenleft}f\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isacharbackquote}{\isacharbackquote}\ Y{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ rightUniqueFunctionAfterInverse\ trivial{\isacharunderscore}subset{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}trivial\ X{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}card\ {\isacharparenleft}Pow\ X{\isacharparenright}{\isasymin}{\isacharbraceleft}{\isadigit{1}}{\isacharcomma}{\isadigit{2}}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ trivial{\isacharunderscore}empty{\isacharunderscore}or{\isacharunderscore}singleton\ card{\isacharunderscore}Pow\ Pow{\isacharunderscore}empty\ assms\ trivial{\isacharunderscore}implies{\isacharunderscore}finite\isanewline
\ \ \ \ \ \ \ \ cardinalityOneTheElemIdentity\ power{\isacharunderscore}one{\isacharunderscore}right\ the{\isacharunderscore}elem{\isacharunderscore}eq\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ insert{\isacharunderscore}iff{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ {\isacharparenleft}Pow\ A{\isacharparenright}\ {\isacharequal}\ {\isadigit{1}}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}A\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Pow{\isacharunderscore}bottom\ Pow{\isacharunderscore}top\ cardinalityOneTheElemIdentity\ singletonD{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymnot}\ {\isacharparenleft}finite\ A{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}card\ {\isacharparenleft}Pow\ A{\isacharparenright}\ {\isacharequal}\ {\isadigit{0}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}finite\ A{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}card\ {\isacharparenleft}Pow\ A{\isacharparenright}\ {\isasymnoteq}\ {\isadigit{0}}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ {\isacharparenleft}Pow\ A{\isacharparenright}\ {\isasymnoteq}\ {\isadigit{0}}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}card\ A{\isacharequal}Discrete{\isachardot}log\ {\isacharparenleft}card\ {\isacharparenleft}Pow\ A{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ log{\isacharunderscore}exp\ card{\isacharunderscore}Pow\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ card{\isacharunderscore}infinite\ finite{\isacharunderscore}Pow{\isacharunderscore}iff{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ {\isacharparenleft}Pow\ A{\isacharparenright}\ {\isacharequal}\ {\isadigit{2}}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}card\ A\ {\isacharequal}\ {\isadigit{1}}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{6}}\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ comm{\isacharunderscore}semiring{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}class{\isachardot}normalizing{\isacharunderscore}semiring{\isacharunderscore}rules{\isacharparenleft}{\isadigit{3}}{\isadigit{3}}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ log{\isacharunderscore}exp\ zero{\isacharunderscore}neq{\isacharunderscore}numeral{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ {\isacharparenleft}Pow\ X{\isacharparenright}\ {\isacharequal}\ {\isadigit{1}}\ {\isasymor}\ card\ {\isacharparenleft}Pow\ X{\isacharparenright}\ {\isacharequal}\ {\isadigit{2}}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}trivial\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ trivial{\isacharunderscore}empty{\isacharunderscore}or{\isacharunderscore}singleton\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{3}}\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{7}}\ cardinalityOneTheElemIdentity\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}trivial\ A\ {\isacharequal}\ {\isacharparenleft}card\ {\isacharparenleft}Pow\ A{\isacharparenright}\ {\isasymin}\ {\isacharbraceleft}{\isadigit{1}}{\isacharcomma}{\isadigit{2}}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{8}}\ lm{\isadigit{1}}{\isadigit{4}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}R\ {\isasymsubseteq}\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ f\ {\isacharequal}\ Domain\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ subrel{\isacharunderscore}runiq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isasymsubseteq}\ g{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ g{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ f\ {\isacharequal}\ Domain\ g{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}g\ {\isasymsubseteq}\ f{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Domain{\isacharunderscore}iff\ contra{\isacharunderscore}subsetD\ runiq{\isacharunderscore}wrt{\isacharunderscore}ex{\isadigit{1}}\ subrelI\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}full{\isacharunderscore}types{\isacharcomma}hide{\isacharunderscore}lams{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}R\ {\isasymsubseteq}\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ f\ {\isasymsubseteq}\ Domain\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isacharequal}\ R{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Domain{\isacharunderscore}mono\ dual{\isacharunderscore}order{\isachardot}antisym{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{3}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}graph\ X\ f\ {\isacharequal}\ {\isacharparenleft}Graph\ f{\isacharparenright}\ {\isacharbar}{\isacharbar}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ inf{\isacharunderscore}top{\isachardot}left{\isacharunderscore}neutral\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{5}}\ domainOfGraph\ restrictedDomain\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{2}}\ graphIntersection\isanewline
\ \ \ \ \ \ \ \ restriction{\isacharunderscore}is{\isacharunderscore}subrel\ subrel{\isacharunderscore}runiq\ subset{\isacharunderscore}iff\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}erased{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{4}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}graph\ {\isacharparenleft}X\ {\isasyminter}\ Y{\isacharparenright}\ f\ {\isacharequal}\ {\isacharparenleft}graph\ X\ f{\isacharparenright}\ {\isacharbar}{\isacharbar}\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ doubleRestriction\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ restrictionVsIntersection{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ f\ x{\isacharparenright}{\isacharbar}\ x{\isachardot}\ x\ {\isasymin}\ X{\isadigit{2}}{\isacharbraceright}\ {\isacharbar}{\isacharbar}\ X{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ f\ x{\isacharparenright}{\isacharbar}\ x{\isachardot}\ x\ {\isasymin}\ X{\isadigit{2}}\ {\isasyminter}\ X{\isadigit{1}}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ graph{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{5}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Domain\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}graph\ X\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}f{\isacharbar}{\isacharbar}X{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}v\ w{\isachardot}\ {\isacharparenleft}v{\isasymColon}{\isacharprime}a\ set{\isacharparenright}\ {\isasymsubseteq}\ w\ {\isasymlongrightarrow}\ w\ {\isasyminter}\ v\ {\isacharequal}\ v{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Int{\isacharunderscore}commute\ inf{\isachardot}absorb{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}graph\ X\ {\isacharparenleft}toFunction\ f{\isacharparenright}\ {\isacharequal}\ f\ {\isacharbar}{\isacharbar}\ X{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ doubleRestriction\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{4}}\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{3}}{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{6}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}Graph\ f{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ X\ {\isacharequal}\ f\ {\isacharbackquote}\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ Graph{\isacharunderscore}def\ image{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{7}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Domain\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f{\isacharbackquote}{\isacharbackquote}X\ {\isacharequal}\ {\isacharparenleft}eval{\isacharunderscore}rel\ f{\isacharparenright}{\isacharbackquote}X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ restrictedRange\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{3}}\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{5}}\ toFunction{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cardOneImageCardOne{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ A\ {\isacharequal}\ {\isadigit{1}}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}card\ {\isacharparenleft}f{\isacharbackquote}A{\isacharparenright}\ {\isacharequal}\ {\isadigit{1}}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ card{\isacharunderscore}image\ card{\isacharunderscore}image{\isacharunderscore}le\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}f{\isacharbackquote}A{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ One{\isacharunderscore}nat{\isacharunderscore}def\ Suc{\isacharunderscore}not{\isacharunderscore}Zero\ card{\isacharunderscore}infinite\ finite{\isacharunderscore}imageI\ \isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f{\isacharbackquote}A\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}card\ {\isacharparenleft}f{\isacharbackquote}A{\isacharparenright}\ {\isasymle}\ {\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ card{\isacharunderscore}image{\isacharunderscore}le\ One{\isacharunderscore}nat{\isacharunderscore}def\ Suc{\isacharunderscore}not{\isacharunderscore}Zero\ card{\isacharunderscore}infinite\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ assms\ image{\isacharunderscore}empty\ image{\isacharunderscore}insert\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cardinalityOneTheElemIdentity\ the{\isacharunderscore}elem{\isacharunderscore}eq{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cardOneTheElem{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ A\ {\isacharequal}\ {\isadigit{1}}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}f{\isacharbackquote}A{\isacharparenright}\ {\isacharequal}\ f\ {\isacharparenleft}the{\isacharunderscore}elem\ A{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ image{\isacharunderscore}empty\ image{\isacharunderscore}insert\ the{\isacharunderscore}elem{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ cardinalityOneTheElemIdentity{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}swap\ f\ {\isacharequal}{\isacharequal}\ curry\ {\isacharparenleft}{\isacharparenleft}split\ f{\isacharparenright}\ {\isasymcirc}\ flip{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{8}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}finite\ X\ \ \ {\isacharequal}\ \ {\isacharparenleft}X\ {\isasymin}\ range\ set{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ List{\isachardot}finite{\isacharunderscore}set\ finite{\isacharunderscore}list\ image{\isacharunderscore}iff\ rangeI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{9}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}finite\ {\isacharequal}\ {\isacharparenleft}{\isacharpercent}X{\isachardot}\ X{\isasymin}range\ set{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{6}}{\isadigit{0}}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}swap\ f\ {\isacharequal}\ {\isacharparenleft}{\isacharpercent}x{\isachardot}\ {\isacharpercent}y{\isachardot}\ f\ y\ x{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ comp{\isacharunderscore}eq{\isacharunderscore}dest{\isacharunderscore}lhs\ curry{\isacharunderscore}def\ flip{\isacharunderscore}def\ fst{\isacharunderscore}conv\ old{\isachardot}prod{\isachardot}case\ snd{\isacharunderscore}conv{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{some easy properties on real numbers%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{6}}{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{fixes}\ a{\isacharcolon}{\isacharcolon}real\ \isanewline
\ \ \isakeyword{fixes}\ b\ c\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}a{\isacharasterisk}b\ {\isacharminus}\ a{\isacharasterisk}c{\isacharequal}a{\isacharasterisk}{\isacharparenleft}b{\isacharminus}c{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ real{\isacharunderscore}scaleR{\isacharunderscore}def\ real{\isacharunderscore}vector{\isachardot}scale{\isacharunderscore}right{\isacharunderscore}diff{\isacharunderscore}distrib{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{6}}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{fixes}\ a{\isacharcolon}{\isacharcolon}real\ \isanewline
\ \ \isakeyword{fixes}\ b\ c\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}a{\isacharasterisk}b\ {\isacharminus}\ c{\isacharasterisk}b{\isacharequal}{\isacharparenleft}a{\isacharminus}c{\isacharparenright}{\isacharasterisk}b{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{6}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ comm{\isacharunderscore}semiring{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}class{\isachardot}normalizing{\isacharunderscore}semiring{\isacharunderscore}rules{\isacharparenleft}{\isadigit{7}}{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
