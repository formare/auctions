%
\begin{isabellebody}%
\def\isabellecontext{RelationProperties}%
%
\isamarkupheader{Additional properties of relations, and operators on relations,
  as they have been defined by Relations.thy%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ RelationProperties\isanewline
\isakeyword{imports}\isanewline
\ \ Main\isanewline
\ \ RelationOperators\isanewline
\ \ SetUtils\isanewline
\ \ Conditionally{\isacharunderscore}Complete{\isacharunderscore}Lattices\ \isanewline
\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isamarkupsection{right-uniqueness%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ injflip{\isacharcolon}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ flip\ A{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ flip{\isacharunderscore}flip\ inj{\isacharunderscore}on{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}card\ P\ {\isacharequal}\ card\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ card{\isacharunderscore}image\ flip{\isacharunderscore}conv\ injflip\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nn{\isadigit{5}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}card\ X{\isacharequal}{\isadigit{1}}\ {\isacharequal}\ {\isacharparenleft}X{\isacharequal}{\isacharbraceleft}the{\isacharunderscore}elem\ X{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ One{\isacharunderscore}nat{\isacharunderscore}def\ card{\isacharunderscore}Suc{\isacharunderscore}eq\ card{\isacharunderscore}empty\ empty{\isacharunderscore}iff\ the{\isacharunderscore}elem{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{7}}b{\isacharcolon}\ {\isachardoublequoteopen}trivial\ X\ {\isacharequal}\ {\isacharparenleft}X{\isacharequal}{\isacharbraceleft}{\isacharbraceright}\ {\isasymor}\ card\ X{\isacharequal}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ \isanewline
nn{\isadigit{5}}{\isadigit{6}}\ order{\isacharunderscore}refl\ subset{\isacharunderscore}singletonD\ trivial{\isacharunderscore}def\ trivial{\isacharunderscore}empty\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}trivial\ P\ {\isacharequal}\ trivial\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ trivial{\isacharunderscore}def\ subset{\isacharunderscore}singletonD\ \isanewline
subset{\isacharunderscore}refl\ subset{\isacharunderscore}insertI\ nn{\isadigit{5}}{\isadigit{6}}\ converse{\isacharunderscore}inject\ converse{\isacharunderscore}empty\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}Range\ {\isacharparenleft}P{\isacharbar}{\isacharbar}X{\isacharparenright}\ {\isacharequal}\ P{\isacharbackquote}{\isacharbackquote}X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ restrict{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{0}}{\isadigit{2}}{\isacharcolon}\ \ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isacharbar}{\isacharbar}\ Y\ {\isacharequal}\ P\ {\isacharbar}{\isacharbar}\ {\isacharparenleft}X\ {\isasyminter}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ restrict{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isacommand{lemma}\isamarkupfalse%
\ ll{\isadigit{4}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}Domain\ {\isacharparenleft}R{\isacharbar}{\isacharbar}X{\isacharparenright}\ {\isacharequal}\ Domain\ R\ {\isasyminter}\ X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ restrict{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
A subrelation of a right-unique relation is right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ subrel{\isacharunderscore}runiq{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ Q{\isachardoublequoteclose}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ Q{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}mono\ subsetI\ trivial{\isacharunderscore}subset{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{3}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ fst\ P{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ inj{\isacharunderscore}on{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}def\ trivial{\isacharunderscore}def\ trivial{\isacharunderscore}imp{\isacharunderscore}no{\isacharunderscore}distinct\ \isanewline
the{\isacharunderscore}elem{\isacharunderscore}eq\ surjective{\isacharunderscore}pairing\ subsetI\ Image{\isacharunderscore}singleton{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
alternative characterisation of right-uniqueness: the image of a singleton set is
   \isa{trivial}, i.e.\ an empty or singleton set.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}alt{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ x\ {\isachardot}\ trivial\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ Image{\isacharunderscore}empty\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{7}}\ the{\isacharunderscore}elem{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
an alternative definition of right-uniqueness in terms of \isa{op\ {\isacharcomma}{\isacharcomma}}%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}wrt{\isacharunderscore}eval{\isacharunderscore}rel{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R\ {\isacharequal}\ {\isacharparenleft}{\isasymforall}x\ {\isachardot}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymsubseteq}\ {\isacharbraceleft}R\ {\isacharcomma}{\isacharcomma}\ x{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ eval{\isacharunderscore}rel{\isachardot}simps\ runiq{\isacharunderscore}alt\ trivial{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ l{\isadigit{3}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isasymin}f{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}y{\isacharequal}f{\isacharcomma}{\isacharcomma}x{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ \isanewline
assms\ runiq{\isacharunderscore}wrt{\isacharunderscore}eval{\isacharunderscore}rel\ subset{\isacharunderscore}singletonD\ Image{\isacharunderscore}singleton{\isacharunderscore}iff\ equals{\isadigit{0}}D\ singletonE\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}basic{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ x\ y\ y{\isacharprime}\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R\ {\isasymand}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharprime}{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ y\ {\isacharequal}\ y{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}alt\ lm{\isadigit{0}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ll{\isadigit{7}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}f{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharbackquote}{\isacharbackquote}Y{\isacharparenright}\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}basic\ ImageE\ converse{\isacharunderscore}iff\ subsetI\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ll{\isadigit{6}}{\isadigit{8}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}y{\isadigit{1}}\ {\isasymin}\ Range\ f{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}{\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}y{\isadigit{1}}{\isacharbraceright}\ {\isasyminter}\ f{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}y{\isadigit{2}}{\isacharbraceright}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}y{\isadigit{1}}{\isacharbraceright}{\isacharequal}f{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}y{\isadigit{2}}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ ll{\isadigit{7}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ converse{\isacharunderscore}Image{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}R{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ R\ {\isacharbackquote}{\isacharbackquote}\ X\ {\isasymsubseteq}\ X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ converse{\isacharunderscore}converse\ ll{\isadigit{7}}{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{3}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}inj{\isacharunderscore}on\ fst\ P{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}basic\ \isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ fst{\isacharunderscore}conv\ inj{\isacharunderscore}on{\isacharunderscore}def\ old{\isachardot}prod{\isachardot}inject\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{3}}{\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}runiq\ P{\isacharequal}inj{\isacharunderscore}on\ fst\ P{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lll{\isadigit{3}}{\isadigit{1}}\ lll{\isadigit{3}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ disj{\isacharunderscore}Un{\isacharunderscore}runiq{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ Q{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ P\ {\isasyminter}\ {\isacharparenleft}Domain\ Q{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P\ Un\ Q{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lll{\isadigit{3}}{\isadigit{3}}\ fst{\isacharunderscore}eq{\isacharunderscore}Domain\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{0}}b\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}paste{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ Q{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P\ outside\ Domain\ Q{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ paste{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ disj{\isacharunderscore}Un{\isacharunderscore}runiq\ Diff{\isacharunderscore}disjoint\ Un{\isacharunderscore}commute\ outside{\isacharunderscore}reduces{\isacharunderscore}domain\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}poly{\isacharunderscore}guards{\isacharunderscore}query{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ runiq{\isacharunderscore}paste{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ Q{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}paste{\isadigit{1}}\ subrel{\isacharunderscore}runiq\ Diff{\isacharunderscore}subset\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ l{\isadigit{1}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}f\ x{\isacharparenright}{\isacharbar}\ x{\isachardot}\ P\ x{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}basic\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}alt{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R\ {\isacharequal}\ {\isacharparenleft}{\isasymforall}\ x\ {\isasymin}\ Domain\ R{\isachardot}\ trivial\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Domain{\isachardot}DomainI\ Image{\isacharunderscore}singleton{\isacharunderscore}iff\ lm{\isadigit{0}}{\isadigit{1}}\ runiq{\isacharunderscore}alt{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}card\ {\isacharparenleft}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isacharequal}{\isadigit{1}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}alt{\isadigit{2}}\ lm{\isadigit{0}}{\isadigit{0}}{\isadigit{7}}b\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ DomainE\ Image{\isacharunderscore}singleton{\isacharunderscore}iff\ empty{\isacharunderscore}iff{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The image of a singleton set under a right-unique relation is a singleton set.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}R\ {\isacharcomma}{\isacharcomma}\ x{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{1}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ eval{\isacharunderscore}rel{\isachardot}simps\ nn{\isadigit{5}}{\isadigit{6}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
the image of a singleton set under a right-unique relation is
   \isa{trivial}, i.e.\ an empty or singleton set.%
\end{isamarkuptext}%
\isamarkuptrue%
%
\begin{isamarkuptext}%
If all images of singleton sets under a relation are
   \isa{trivial}, i.e.\ an empty or singleton set, the relation is right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ Image{\isacharunderscore}within{\isacharunderscore}runiq{\isacharunderscore}domain{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ x\ R\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymexists}\ y\ {\isachardot}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}imp{\isacharunderscore}singleton{\isacharunderscore}image{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ dom{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}THE\ y\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharquery}y{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ the{\isacharunderscore}elem{\isacharunderscore}def\isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ Image{\isacharunderscore}singleton{\isacharunderscore}iff\ Image{\isacharunderscore}within{\isacharunderscore}runiq{\isacharunderscore}domain\ singletonD\ singletonI\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}conv{\isacharunderscore}imp{\isacharunderscore}singleton{\isacharunderscore}preimage{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ ran{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymin}\ Range\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}{\isacharparenleft}R{\isasyminverse}{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}THE\ x\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ ran\ \isacommand{have}\isamarkupfalse%
\ dom{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymin}\ Domain\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ runiq{\isacharunderscore}conv\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}{\isacharparenleft}R{\isasyminverse}{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}THE\ x\ {\isachardot}\ {\isacharparenleft}y{\isacharcomma}\ x{\isacharparenright}\ {\isasymin}\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ runiq{\isacharunderscore}imp{\isacharunderscore}singleton{\isacharunderscore}image{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isacharequal}\ {\isacharparenleft}THE\ x\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
another alternative definition of right-uniqueness in terms of \isa{op\ {\isacharcomma}{\isacharcomma}}%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}wrt{\isacharunderscore}eval{\isacharunderscore}rel{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ R\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ R\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}x\ {\isasymin}\ Domain\ R\ {\isachardot}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}R\ {\isacharcomma}{\isacharcomma}\ x{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}wrt{\isacharunderscore}eval{\isacharunderscore}rel\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}wrt{\isacharunderscore}ex{\isadigit{1}}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}runiq\ R\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ a\ {\isasymin}\ Domain\ R\ {\isachardot}\ {\isasymexists}{\isacharbang}\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}basic\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Domain{\isachardot}DomainI\ Domain{\isachardot}cases{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ a\ \isakeyword{and}\ b\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ aRb{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}b\ {\isacharequal}\ {\isacharparenleft}THE\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ runiq{\isacharunderscore}basic\ the{\isacharunderscore}equality{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ in{\isacharunderscore}Domain{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}a{\isacharcomma}\ THE\ b{\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ in{\isacharunderscore}Domain\ \isacommand{obtain}\isamarkupfalse%
\ b\ \isakeyword{where}\ {\isacharasterisk}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ runiq\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}b\ {\isacharequal}\ {\isacharparenleft}THE\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ runiq{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isacharasterisk}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharunderscore}imp{\isacharunderscore}runiq{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ b\ {\isacharequal}\ {\isacharparenleft}THE\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ DomainE\ runiq{\isacharunderscore}wrt{\isacharunderscore}ex{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
another alternative definition of right-uniqueness in terms of \isa{The}%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}wrt{\isacharunderscore}THE{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}runiq\ R\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ b\ {\isacharequal}\ {\isacharparenleft}THE\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ b\ {\isacharequal}\ {\isacharparenleft}THE\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ runiq{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ b\ {\isacharequal}\ {\isacharparenleft}THE\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharunderscore}imp{\isacharunderscore}runiq{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}conv{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}left{\isacharunderscore}comp{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{and}\ aRb{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isacharequal}\ {\isacharparenleft}THE\ a\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ aRb\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}b{\isacharcomma}\ a{\isacharparenright}\ {\isasymin}\ R{\isasyminverse}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ runiq{\isacharunderscore}conv\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isacharequal}\ {\isacharparenleft}THE\ a\ {\isachardot}\ {\isacharparenleft}b{\isacharcomma}\ a{\isacharparenright}\ {\isasymin}\ R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ runiq{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}conv{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}left{\isacharunderscore}comp{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ in{\isacharunderscore}Range{\isacharcolon}\ {\isachardoublequoteopen}b\ {\isasymin}\ Range\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}THE\ a{\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ in{\isacharunderscore}Range\ \isacommand{obtain}\isamarkupfalse%
\ a\ \isakeyword{where}\ {\isacharasterisk}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ runiq{\isacharunderscore}conv\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isacharequal}\ {\isacharparenleft}THE\ a\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ runiq{\isacharunderscore}conv{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}left{\isacharunderscore}comp{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isacharasterisk}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ THE{\isacharunderscore}left{\isacharunderscore}comp{\isacharunderscore}imp{\isacharunderscore}runiq{\isacharunderscore}conv{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ a\ {\isacharequal}\ {\isacharparenleft}THE\ a\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ assms\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ b\ a\ {\isachardot}\ {\isacharparenleft}b{\isacharcomma}\ a{\isacharparenright}\ {\isasymin}\ R{\isasyminverse}\ {\isasymlongrightarrow}\ a\ {\isacharequal}\ {\isacharparenleft}THE\ a\ {\isachardot}\ {\isacharparenleft}b{\isacharcomma}\ a{\isacharparenright}\ {\isasymin}\ R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ THE{\isacharunderscore}right{\isacharunderscore}comp{\isacharunderscore}imp{\isacharunderscore}runiq{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}conv{\isacharunderscore}wrt{\isacharunderscore}THE{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ a\ {\isacharequal}\ {\isacharparenleft}THE\ a\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isasyminverse}\ {\isasymlongrightarrow}\ b\ {\isacharequal}\ {\isacharparenleft}THE\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isasyminverse}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ runiq{\isacharunderscore}wrt{\isacharunderscore}THE{\isacharparenright}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ a\ b\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ a\ {\isacharequal}\ {\isacharparenleft}THE\ a\ {\isachardot}\ {\isacharparenleft}a{\isacharcomma}\ b{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{2}}{\isacharcolon}\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}trivial\ f{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ f{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}erased{\isacharcomma}\ hide{\isacharunderscore}lams{\isacharparenright}\ lm{\isadigit{0}}{\isadigit{1}}\ runiq{\isacharunderscore}basic\ snd{\isacharunderscore}conv{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
A singleton relation is right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{corollary}\isamarkupfalse%
\ runiq{\isacharunderscore}singleton{\isacharunderscore}rel{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}runiq\ {\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ trivial{\isacharunderscore}singleton\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The empty relation is right-unique%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}emptyrel{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ trivial{\isacharunderscore}empty\ lm{\isadigit{0}}{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
alternative characterisation of the fact that, if a relation \isa{R} is right-unique,
  its evaluation \isa{R\ {\isacharcomma}{\isacharcomma}\ x} on some argument \isa{x} in its domain, occurs in \isa{R}'s
  range.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ eval{\isacharunderscore}runiq{\isacharunderscore}rel{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ domain{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}\ R{\isacharcomma}{\isacharcomma}x{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ l{\isadigit{3}}{\isadigit{1}}\ runiq{\isacharunderscore}wrt{\isacharunderscore}ex{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Evaluating a right-unique relation as a function on the relation's domain yields an
  element from its range.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ eval{\isacharunderscore}runiq{\isacharunderscore}in{\isacharunderscore}Range{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}a\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isacharcomma}{\isacharcomma}\ a\ {\isasymin}\ Range\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Range{\isacharunderscore}iff\ eval{\isacharunderscore}runiq{\isacharunderscore}rel{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
right-uniqueness of a restricted relation expressed using basic set theory%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}restrict{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ x\ {\isasymin}\ X\ {\isachardot}\ {\isasymforall}\ y\ y{\isacharprime}\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R\ {\isasymand}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharprime}{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ y\ {\isacharequal}\ y{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ x\ y\ y{\isacharprime}\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R\ {\isacharbar}{\isacharbar}\ X\ {\isasymand}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharprime}{\isacharparenright}\ {\isasymin}\ R\ {\isacharbar}{\isacharbar}\ X\ {\isasymlongrightarrow}\ y\ {\isacharequal}\ y{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ runiq{\isacharunderscore}basic{\isacharparenright}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ x\ y\ y{\isacharprime}\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ {\isacharbraceleft}\ p\ {\isachardot}\ fst\ p\ {\isasymin}\ X\ {\isasymand}\ p\ {\isasymin}\ R\ {\isacharbraceright}\ {\isasymand}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharprime}{\isacharparenright}\ {\isasymin}\ {\isacharbraceleft}\ p\ {\isachardot}\ fst\ p\ {\isasymin}\ X\ {\isasymand}\ p\ {\isasymin}\ R\ {\isacharbraceright}\ {\isasymlongrightarrow}\ y\ {\isacharequal}\ y{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ restrict{\isacharunderscore}ext{\isacharprime}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ x\ {\isasymin}\ X\ {\isachardot}\ {\isasymforall}\ y\ y{\isacharprime}\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R\ {\isasymand}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharprime}{\isacharparenright}\ {\isasymin}\ R\ {\isasymlongrightarrow}\ y\ {\isacharequal}\ y{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{paste%
}
\isamarkuptrue%
%
\begin{isamarkuptext}%
Pasting a singleton relation on some other right-unique relation \isa{R} yields a
  right-unique relation if the single element of the singleton's domain is not yet in the 
  domain of \isa{R}.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}paste{\isadigit{3}}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ Domain\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}paste{\isadigit{2}}\ runiq{\isacharunderscore}singleton{\isacharunderscore}rel\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{difference%
}
\isamarkuptrue%
%
\begin{isamarkuptext}%
Removing one pair from a right-unique relation still leaves it right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}except{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R\ {\isacharminus}\ {\isacharbraceleft}tup{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ subrel{\isacharunderscore}runiq{\isacharparenright}\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}Diff{\isacharunderscore}singleton{\isacharunderscore}Domain{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ in{\isacharunderscore}rel{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ Domain\ {\isacharparenleft}R\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ DomainE\ Domain{\isacharunderscore}Un{\isacharunderscore}eq\ UnI{\isadigit{1}}\ Un{\isacharunderscore}Diff{\isacharunderscore}Int\ member{\isacharunderscore}remove\ remove{\isacharunderscore}def\ runiq{\isacharunderscore}wrt{\isacharunderscore}ex{\isadigit{1}}\isanewline
\isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{converse%
}
\isamarkuptrue%
%
\begin{isamarkuptext}%
The inverse image of the image of a singleton set under some relation is the same
  singleton set, if both the relation and its converse are right-unique and the singleton set
  is in the relation's domain.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ converse{\isacharunderscore}Image{\isacharunderscore}singleton{\isacharunderscore}Domain{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ domain{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}R{\isasyminverse}\ {\isacharbackquote}{\isacharbackquote}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ sup{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymsubseteq}\ R{\isasyminverse}\ {\isacharbackquote}{\isacharbackquote}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ domain\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq\ domain\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ runiq{\isacharunderscore}def\ trivial{\isacharunderscore}singleton{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharparenleft}R{\isasyminverse}\ {\isacharbackquote}{\isacharbackquote}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ runiq{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ sup\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ singleton{\isacharunderscore}sub{\isacharunderscore}trivial{\isacharunderscore}uniq\ subset{\isacharunderscore}antisym\ trivial{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The inverse image of the image of a singleton set under some relation is the same
  singleton set or empty, if both the relation and its converse are right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{corollary}\isamarkupfalse%
\ converse{\isacharunderscore}Image{\isacharunderscore}singleton{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R{\isasyminverse}\ {\isacharbackquote}{\isacharbackquote}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymsubseteq}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ converse{\isacharunderscore}Image{\isacharunderscore}singleton{\isacharunderscore}Domain\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The inverse image of the image of a set under some relation is a subset of that set,
  if both the relation and its converse are right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ disj{\isacharunderscore}Domain{\isacharunderscore}imp{\isacharunderscore}disj{\isacharunderscore}Image{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}Domain\ R\ {\isasyminter}\ X\ {\isasyminter}\ Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isacharbackquote}{\isacharbackquote}\ X\ {\isasyminter}\ R\ {\isacharbackquote}{\isacharbackquote}\ Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}basic\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}imp{\isacharunderscore}Dom{\isacharunderscore}rel{\isacharunderscore}Range{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}THE\ y\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}\ {\isasymin}\ Range\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Range{\isachardot}intros\ runiq{\isacharunderscore}imp{\isacharunderscore}THE{\isacharunderscore}right{\isacharunderscore}comp\ runiq{\isacharunderscore}wrt{\isacharunderscore}ex{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}conv{\isacharunderscore}imp{\isacharunderscore}Range{\isacharunderscore}rel{\isacharunderscore}Dom{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ y{\isacharunderscore}Range{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymin}\ Range\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}THE\ x\ {\isachardot}\ {\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ R{\isacharparenright}\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ y{\isacharunderscore}Range\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}y\ {\isasymin}\ Domain\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}THE\ x\ {\isachardot}\ {\isacharparenleft}y{\isacharcomma}\ x{\isacharparenright}\ {\isasymin}\ R{\isasyminverse}{\isacharparenright}\ {\isasymin}\ Range\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}conv\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ runiq{\isacharunderscore}imp{\isacharunderscore}Dom{\isacharunderscore}rel{\isacharunderscore}Range{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The converse relation of two pasted relations is right-unique, if 
  the relations have disjoint domains and ranges, and if their converses are both
  right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}converse{\isacharunderscore}paste{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharunderscore}P{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}Q{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}Q{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ disj{\isacharunderscore}D{\isacharcolon}\ {\isachardoublequoteopen}Domain\ P\ {\isasyminter}\ Domain\ Q\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ disj{\isacharunderscore}R{\isacharcolon}\ {\isachardoublequoteopen}Range\ P\ {\isasyminter}\ Range\ Q\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}P\ {\isacharplus}{\isacharasterisk}\ Q\ {\isacharequal}\ P\ {\isasymunion}\ Q{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ disj{\isacharunderscore}D\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ paste{\isacharunderscore}disj{\isacharunderscore}domains{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isasyminverse}\ {\isacharequal}\ P{\isasyminverse}\ {\isasymunion}\ Q{\isasyminverse}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isacharequal}\ P{\isasyminverse}\ {\isacharplus}{\isacharasterisk}\ Q{\isasyminverse}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ disj{\isacharunderscore}R\ paste{\isacharunderscore}disj{\isacharunderscore}domains\ Domain{\isacharunderscore}converse\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}P{\isacharunderscore}conv\ runiq{\isacharunderscore}Q{\isacharunderscore}conv\ runiq{\isacharunderscore}paste{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The converse relation of a singleton relation pasted on some other relation \isa{R} is right-unique,
  if the singleton pair is not in \isa{Domain\ R\ {\isasymtimes}\ Range\ R}, and if \isa{R{\isasyminverse}} is right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}converse{\isacharunderscore}paste{\isacharunderscore}singleton{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isakeyword{and}\ y{\isacharunderscore}notin{\isacharunderscore}R{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymnotin}\ Range\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ x{\isacharunderscore}notin{\isacharunderscore}D{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharparenleft}R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isasyminverse}\ {\isacharequal}\ {\isacharbraceleft}{\isacharparenleft}y{\isacharcomma}x{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}singleton{\isacharunderscore}rel\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ R\ {\isasyminter}\ Domain\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}Range\ R\ {\isasyminter}\ {\isacharparenleft}Range\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ y{\isacharunderscore}notin{\isacharunderscore}R\ x{\isacharunderscore}notin{\isacharunderscore}D\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharunderscore}all\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ runiq\ runiq{\isacharunderscore}converse{\isacharunderscore}paste\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
If a relation is known to be right-unique, it is easier to know when we can evaluate it
  like a function, using \isa{eval{\isacharunderscore}rel{\isacharunderscore}or}.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ eval{\isacharunderscore}runiq{\isacharunderscore}rel{\isacharunderscore}or{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}eval{\isacharunderscore}rel{\isacharunderscore}or\ R\ a\ z\ {\isacharequal}\ {\isacharparenleft}if\ a\ {\isasymin}\ Domain\ R\ then\ the{\isacharunderscore}elem\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}a{\isacharbraceright}{\isacharparenright}\ else\ z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ assms\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}card\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}a{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isadigit{1}}\ {\isasymlongleftrightarrow}\ a\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Image{\isacharunderscore}within{\isacharunderscore}runiq{\isacharunderscore}domain\ card{\isacharunderscore}Suc{\isacharunderscore}eq\ card{\isacharunderscore}empty\ ex{\isacharunderscore}in{\isacharunderscore}conv\ One{\isacharunderscore}nat{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{injectivity%
}
\isamarkuptrue%
%
\begin{isamarkuptext}%
A relation \isa{R} is injective on its domain iff any two domain elements having the same image
  are equal.  This definition on its own is of limited utility, as it does not assume that \isa{R}
  is a function, i.e.\ right-unique.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ injective\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\isakeyword{where}\ {\isachardoublequoteopen}injective\ R\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymforall}\ a\ {\isasymin}\ Domain\ R\ {\isachardot}\ {\isasymforall}\ b\ {\isasymin}\ Domain\ R\ {\isachardot}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}a{\isacharbraceright}\ {\isacharequal}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}b{\isacharbraceright}\ {\isasymlongrightarrow}\ a\ {\isacharequal}\ b{\isacharparenright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
If both a relation and its converse are right-unique, it is injective on its domain.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ runiq{\isacharunderscore}and{\isacharunderscore}conv{\isacharunderscore}imp{\isacharunderscore}injective{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R\ {\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}injective\ R{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ a\ \isacommand{assume}\isamarkupfalse%
\ a{\isacharunderscore}Dom{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ b\ \isacommand{assume}\isamarkupfalse%
\ b{\isacharunderscore}Dom{\isacharcolon}\ {\isachardoublequoteopen}b\ {\isasymin}\ Domain\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}a{\isacharbraceright}\ {\isacharequal}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}b{\isacharbraceright}\ {\isasymlongrightarrow}\ a\ {\isacharequal}\ b{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ eq{\isacharunderscore}Im{\isacharcolon}\ {\isachardoublequoteopen}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}a{\isacharbraceright}\ {\isacharequal}\ R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}b{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ runiq\ a{\isacharunderscore}Dom\ \isacommand{obtain}\isamarkupfalse%
\ Ra\ \isakeyword{where}\ Ra{\isacharcolon}\ {\isachardoublequoteopen}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}a{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}Ra{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ runiq\ b{\isacharunderscore}Dom\ \isacommand{obtain}\isamarkupfalse%
\ Rb\ \isakeyword{where}\ Rb{\isacharcolon}\ {\isachardoublequoteopen}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}b{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}Rb{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ eq{\isacharunderscore}Im\ Ra\ Rb\ \isacommand{have}\isamarkupfalse%
\ eq{\isacharunderscore}Im{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}Ra\ {\isacharequal}\ Rb{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ eq{\isacharunderscore}Im{\isacharprime}\ Ra\ a{\isacharunderscore}Dom\ runiq{\isacharunderscore}conv\ \isacommand{have}\isamarkupfalse%
\ a{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}R\ {\isasyminverse}{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}Ra{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}a{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ converse{\isacharunderscore}Image{\isacharunderscore}singleton{\isacharunderscore}Domain\ runiq\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ eq{\isacharunderscore}Im{\isacharprime}\ Rb\ b{\isacharunderscore}Dom\ runiq{\isacharunderscore}conv\ \isacommand{have}\isamarkupfalse%
\ b{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}R\ {\isasyminverse}{\isacharparenright}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}Rb{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}b{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ converse{\isacharunderscore}Image{\isacharunderscore}singleton{\isacharunderscore}Domain\ runiq\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ eq{\isacharunderscore}Im{\isacharprime}\ a{\isacharprime}\ b{\isacharprime}\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isacharequal}\ b{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{unfolding}\isamarkupfalse%
\ injective{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
the set of all injective functions from \isa{X} to \isa{Y}.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ injections\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharprime}a\ set\ {\isasymRightarrow}\ {\isacharprime}b\ set\ {\isasymRightarrow}\ {\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ set{\isachardoublequoteclose}\isanewline
\isakeyword{where}\ {\isachardoublequoteopen}injections\ X\ Y\ {\isacharequal}\ {\isacharbraceleft}R\ {\isachardot}\ Domain\ R\ {\isacharequal}\ X\ {\isasymand}\ Range\ R\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ R\ {\isasymand}\ runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
introduction rule that establishes the injectivity of a relation%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ injectionsI{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ R{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}Domain\ R\ {\isacharequal}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}Range\ R\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}R\ {\isasymin}\ injections\ X\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ CollectI\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
the set of all injective partial functions (including total ones) from \isa{X} to \isa{Y}.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ partial{\isacharunderscore}injections\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharprime}a\ set\ {\isasymRightarrow}\ {\isacharprime}b\ set\ {\isasymRightarrow}\ {\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ set{\isachardoublequoteclose}\isanewline
\isakeyword{where}\ {\isachardoublequoteopen}partial{\isacharunderscore}injections\ X\ Y\ {\isacharequal}\ {\isacharbraceleft}R\ {\isachardot}\ Domain\ R\ {\isasymsubseteq}\ X\ {\isasymand}\ Range\ R\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ R\ {\isasymand}\ runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
Given a relation \isa{R}, an element \isa{x} of the relation's domain type and
  a set \isa{Y} of the relation's range type, this function constructs the list of all 
  superrelations of \isa{R} that extend \isa{R} by a pair \isa{{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}} for some
  \isa{y} not yet covered by \isa{R}.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{fun}\isamarkupfalse%
\ sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}alg\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isasymColon}linorder{\isacharparenright}\ set\ {\isasymRightarrow}\ {\isacharprime}a\ {\isasymRightarrow}\ {\isacharprime}b\ set\ {\isasymRightarrow}\ {\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ list{\isachardoublequoteclose}\isanewline
\isakeyword{where}\ \isanewline
{\isachardoublequoteopen}sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}alg\ R\ x\ Y\ {\isacharequal}\ {\isacharbrackleft}\ R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isachardot}\ y\ {\isasymleftarrow}\ sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ {\isacharparenleft}Y\ {\isacharminus}\ Range\ R{\isacharparenright}\ {\isacharbrackright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
set-based variant of \isa{sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}alg}%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ sup{\isacharunderscore}rels{\isacharunderscore}from\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ {\isasymRightarrow}\ {\isacharprime}a\ {\isasymRightarrow}\ {\isacharprime}b\ set\ {\isasymRightarrow}\ {\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ set{\isachardoublequoteclose}\isanewline
\isakeyword{where}\ {\isachardoublequoteopen}sup{\isacharunderscore}rels{\isacharunderscore}from\ R\ x\ Y\ {\isacharequal}\ {\isacharbraceleft}\ R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ Y\ {\isacharminus}\ Range\ R\ {\isacharbraceright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
On finite sets, \isa{sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}alg} and \isa{sup{\isacharunderscore}rels{\isacharunderscore}from} are equivalent.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}set\ {\isacharparenleft}sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}alg\ R\ x\ Y{\isacharparenright}\ {\isacharequal}\ sup{\isacharunderscore}rels{\isacharunderscore}from\ R\ x\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}distinct\ {\isacharparenleft}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ {\isacharparenleft}Y\ {\isacharminus}\ Range\ R{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}set\ {\isacharbrackleft}\ R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isachardot}\ y\ {\isasymleftarrow}\ sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ {\isacharparenleft}Y\ {\isacharminus}\ Range\ R{\isacharparenright}\ {\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}\ R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isacharbar}\ y\ {\isachardot}\ y\ {\isasymin}\ set\ {\isacharparenleft}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ {\isacharparenleft}Y\ {\isacharminus}\ Range\ R{\isacharparenright}{\isacharparenright}\ {\isacharbraceright}{\isachardoublequoteclose}\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}set\ {\isacharparenleft}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ {\isacharparenleft}Y\ {\isacharminus}\ Range\ R{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ Y\ {\isacharminus}\ Range\ R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{unfolding}\isamarkupfalse%
\ sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
the list of all injective functions (represented as relations) from one set 
  (represented as a list) to another set%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{fun}\isamarkupfalse%
\ injections{\isacharunderscore}alg\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharprime}a\ list\ {\isasymRightarrow}\ {\isacharprime}b{\isasymColon}linorder\ set\ {\isasymRightarrow}\ {\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ list{\isachardoublequoteclose}\isanewline
\isakeyword{where}\ {\isachardoublequoteopen}injections{\isacharunderscore}alg\ {\isacharbrackleft}{\isacharbrackright}\ Y\ {\isacharequal}\ {\isacharbrackleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbrackright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}injections{\isacharunderscore}alg\ {\isacharparenleft}x\ {\isacharhash}\ xs{\isacharparenright}\ Y\ {\isacharequal}\ concat\ {\isacharbrackleft}\ {\isacharbrackleft}\ R\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isachardot}\ y\ {\isasymleftarrow}\ sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ {\isacharparenleft}Y\ {\isacharminus}\ Range\ R{\isacharparenright}\ {\isacharbrackright}\isanewline
\ \ \ \ \ \ {\isachardot}\ R\ {\isasymleftarrow}\ injections{\isacharunderscore}alg\ xs\ Y\ {\isacharbrackright}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
the set-theoretic variant of the recursive rule of \isa{injections{\isacharunderscore}alg}%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ injections{\isacharunderscore}paste{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ new{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}injections\ {\isacharparenleft}insert\ x\ A{\isacharparenright}\ Y\ {\isacharequal}\ {\isacharparenleft}{\isasymUnion}\ {\isacharbraceleft}\ sup{\isacharunderscore}rels{\isacharunderscore}from\ P\ x\ Y\ {\isacharbar}\ P\ {\isachardot}\ P\ {\isasymin}\ injections\ A\ Y\ {\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ equalitySubsetI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ R\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ injections\ {\isacharparenleft}insert\ x\ A{\isacharparenright}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ injections{\isacharunderscore}unfolded{\isacharcolon}\ {\isachardoublequoteopen}Domain\ R\ {\isacharequal}\ insert\ x\ A\ {\isasymand}\ Range\ R\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ R\ {\isasymand}\ runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ Domain{\isacharcolon}\ {\isachardoublequoteopen}Domain\ R\ {\isacharequal}\ insert\ x\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ Range{\isacharcolon}\ {\isachardoublequoteopen}Range\ R\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharcolon}\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharunderscore}all\isanewline
\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P\ {\isacharequal}\ {\isachardoublequoteopen}R\ outside\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ subrel{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}P\ {\isasymsubseteq}\ R{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ subrel{\isacharunderscore}conv{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}P{\isasyminverse}\ {\isasymsubseteq}\ R{\isasyminverse}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subrel\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Domain\ new\ \isacommand{have}\isamarkupfalse%
\ Domain{\isacharunderscore}pre{\isacharcolon}\ {\isachardoublequoteopen}Domain\ {\isacharquery}P\ {\isacharequal}\ A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Domain{\isacharunderscore}outside{\isacharunderscore}singleton{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ P{\isacharunderscore}inj{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}P\ {\isasymin}\ injections\ A\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ injectionsI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ {\isacharquery}P\ {\isacharequal}\ A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Domain{\isacharunderscore}pre{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}Range\ {\isacharquery}P\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Range\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Range{\isacharunderscore}outside{\isacharunderscore}sub{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharquery}P{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq\ subrel\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ subrel{\isacharunderscore}runiq{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharquery}P{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}conv\ subrel{\isacharunderscore}conv\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ subrel{\isacharunderscore}runiq{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ y\ \isakeyword{where}\ y{\isacharcolon}\ {\isachardoublequoteopen}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}y{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Image{\isacharunderscore}runiq{\isacharunderscore}eq{\isacharunderscore}eval\ Domain\ runiq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ insertI{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ y\ Range\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}y\ {\isasymin}\ Y{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}y\ {\isasymnotin}\ Range\ {\isacharquery}P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ assm{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymin}\ Range\ {\isacharquery}P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ x{\isacharprime}\ \isakeyword{where}\ x{\isacharprime}{\isacharunderscore}Domain{\isacharcolon}\ {\isachardoublequoteopen}x{\isacharprime}\ {\isasymin}\ Domain\ {\isacharquery}P{\isachardoublequoteclose}\ \isakeyword{and}\ x{\isacharprime}{\isacharunderscore}P{\isacharunderscore}y{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharprime}{\isacharcomma}\ y{\isacharparenright}\ {\isasymin}\ {\isacharquery}P{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ x{\isacharprime}{\isacharunderscore}img{\isacharcolon}\ {\isachardoublequoteopen}x{\isacharprime}\ {\isasymin}\ R{\isasyminverse}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}y{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subrel\ x{\isacharprime}{\isacharunderscore}P{\isacharunderscore}y\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ x{\isacharunderscore}img{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymin}\ R{\isasyminverse}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}y{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ y\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}x{\isacharprime}\ {\isasymnoteq}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ x{\isacharprime}{\isacharunderscore}Domain\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}x{\isacharprime}\ {\isasymin}\ A{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Domain{\isacharunderscore}pre\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ new\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharparenleft}R{\isasyminverse}\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}y{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}conv\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ runiq{\isacharunderscore}alt{\isacharparenright}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}x{\isacharprime}\ {\isacharequal}\ x{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ x{\isacharprime}{\isacharunderscore}img\ x{\isacharunderscore}img\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ trivial{\isacharunderscore}imp{\isacharunderscore}no{\isacharunderscore}distinct{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ {\isacharbackquoteopen}x{\isacharprime}\ {\isasymnoteq}\ x{\isacharbackquoteclose}\ \isacommand{show}\isamarkupfalse%
\ False\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ y{\isacharunderscore}in{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymin}\ Y\ {\isacharminus}\ Range\ {\isacharquery}P{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ DiffI{\isacharparenright}\isanewline
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ y\ \isacommand{have}\isamarkupfalse%
\ x{\isacharunderscore}rel{\isacharcolon}\ {\isachardoublequoteopen}R\ {\isacharbar}{\isacharbar}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ restrict{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ x{\isacharunderscore}rel\ \isacommand{have}\isamarkupfalse%
\ Dom{\isacharunderscore}restrict{\isacharcolon}\ {\isachardoublequoteopen}Domain\ {\isacharparenleft}R\ {\isacharbar}{\isacharbar}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ x{\isacharunderscore}rel\ \isacommand{have}\isamarkupfalse%
\ P{\isacharunderscore}paste{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}P\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isacharquery}P\ {\isasymunion}\ R\ {\isacharbar}{\isacharbar}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ outside{\isacharunderscore}union{\isacharunderscore}restrict\ paste{\isacharunderscore}outside{\isacharunderscore}restrict\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Dom{\isacharunderscore}restrict\ Domain{\isacharunderscore}pre\ new\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ {\isacharquery}P\ {\isasyminter}\ Domain\ {\isacharparenleft}R\ {\isacharbar}{\isacharbar}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}P\ {\isacharplus}{\isacharasterisk}\ {\isacharparenleft}R\ {\isacharbar}{\isacharbar}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isacharquery}P\ {\isasymunion}\ {\isacharparenleft}R\ {\isacharbar}{\isacharbar}\ {\isacharbraceleft}x{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ paste{\isacharunderscore}disj{\isacharunderscore}domains{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ P{\isacharunderscore}paste{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}P\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}paste{\isacharprime}\ outside{\isacharunderscore}union{\isacharunderscore}restrict\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ P{\isacharunderscore}inj\ y{\isacharunderscore}in\ P{\isacharunderscore}paste\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ P\ {\isasymin}\ injections\ A\ Y\ {\isachardot}\ {\isasymexists}\ y\ {\isasymin}\ Y\ {\isacharminus}\ Range\ P\ {\isachardot}\ R\ {\isacharequal}\ P\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ Q\ {\isasymin}\ {\isacharbraceleft}\ sup{\isacharunderscore}rels{\isacharunderscore}from\ P\ x\ Y\ {\isacharbar}\ P\ {\isachardot}\ P\ {\isasymin}\ injections\ A\ Y\ {\isacharbraceright}\ {\isachardot}\ R\ {\isasymin}\ Q{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ {\isasymUnion}\ {\isacharbraceleft}\ sup{\isacharunderscore}rels{\isacharunderscore}from\ P\ x\ Y\ {\isacharbar}\ P\ {\isachardot}\ P\ {\isasymin}\ injections\ A\ Y\ {\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Union{\isacharunderscore}member\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ rev{\isacharunderscore}iffD{\isadigit{1}}{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ R\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ {\isasymUnion}\ {\isacharbraceleft}\ sup{\isacharunderscore}rels{\isacharunderscore}from\ P\ x\ Y\ {\isacharbar}\ P\ {\isachardot}\ P\ {\isasymin}\ injections\ A\ Y\ {\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ Q\ {\isasymin}\ {\isacharbraceleft}\ sup{\isacharunderscore}rels{\isacharunderscore}from\ P\ x\ Y\ {\isacharbar}\ P\ {\isachardot}\ P\ {\isasymin}\ injections\ A\ Y\ {\isacharbraceright}\ {\isachardot}\ R\ {\isasymin}\ Q{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Union{\isacharunderscore}member\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ rev{\isacharunderscore}iffD{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ P\ \isakeyword{and}\ y\ \isakeyword{where}\ P{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymin}\ injections\ A\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{and}\ y{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymin}\ Y\ {\isacharminus}\ Range\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{and}\ R{\isacharcolon}\ {\isachardoublequoteopen}R\ {\isacharequal}\ P\ {\isacharplus}{\isacharasterisk}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ P{\isacharunderscore}unfolded{\isacharcolon}\ {\isachardoublequoteopen}Domain\ P\ {\isacharequal}\ A\ {\isasymand}\ Range\ P\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ P\ {\isasymand}\ runiq\ {\isacharparenleft}P{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ CollectE{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ Domain{\isacharunderscore}pre{\isacharcolon}\ {\isachardoublequoteopen}Domain\ P\ {\isacharequal}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ Range{\isacharunderscore}pre{\isacharcolon}\ {\isachardoublequoteopen}Range\ P\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}pre{\isacharcolon}\ {\isachardoublequoteopen}runiq\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ runiq{\isacharunderscore}conv{\isacharunderscore}pre{\isacharcolon}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharunderscore}all\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ injections\ {\isacharparenleft}insert\ x\ A{\isacharparenright}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ injectionsI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ R\ {\isacharequal}\ insert\ x\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ R\ {\isacharequal}\ Domain\ P\ {\isasymunion}\ Domain\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ paste{\isacharunderscore}Domain\ R\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isacharequal}\ A\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Domain{\isacharunderscore}pre\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}Range\ R\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Range\ R\ {\isasymsubseteq}\ Range\ P\ {\isasymunion}\ Range\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isasymand}\ Range\ P\ {\isasymunion}\ Range\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}y{\isacharparenright}{\isacharbraceright}\ {\isasymsubseteq}\ Y\ {\isasymunion}\ {\isacharbraceleft}y{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ paste{\isacharunderscore}Range\ R\ Range{\isacharunderscore}pre\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ y\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}pre\ R\ runiq{\isacharunderscore}singleton{\isacharunderscore}rel\ runiq{\isacharunderscore}paste{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}conv{\isacharunderscore}pre\ R\ y\ new\ \isakeyword{and}\ runiq{\isacharunderscore}converse{\isacharunderscore}paste{\isacharunderscore}singleton\ DiffE\ Domain{\isacharunderscore}pre\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
There are finitely many injective function from a finite set to another finite set.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ finite{\isacharunderscore}injections{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ X{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharprime}a\ set{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{and}\ Y{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharprime}b\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}injections\ X\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ rev{\isacharunderscore}finite{\isacharunderscore}subset{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ assms\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}Pow\ {\isacharparenleft}X\ {\isasymtimes}\ Y{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}injections\ X\ Y\ {\isasymsubseteq}\ Pow\ {\isacharparenleft}X\ {\isasymtimes}\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ R\ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ {\isacharparenleft}injections\ X\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ R\ {\isacharequal}\ X\ {\isasymand}\ Range\ R\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymsubseteq}\ X\ {\isasymtimes}\ Y{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ Pow\ {\isacharparenleft}X\ {\isasymtimes}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The paper-like definition \isa{injections} and the algorithmic definition 
  \isa{injections{\isacharunderscore}alg} are equivalent.%
\end{isamarkuptext}%
\isamarkuptrue%
\isacommand{theorem}\isamarkupfalse%
\ injections{\isacharunderscore}equiv{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ xs{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharprime}a\ list{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{and}\ Y{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharprime}b{\isasymColon}linorder\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ non{\isacharunderscore}empty{\isacharcolon}\ {\isachardoublequoteopen}card\ Y\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}distinct\ xs\ {\isasymLongrightarrow}\ {\isacharparenleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ xs\ Y{\isacharparenright}{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set\ set{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ xs{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Nil\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ {\isacharbrackleft}{\isacharbrackright}\ Y{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}R{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set{\isacharparenright}\ {\isachardot}\ Domain\ R\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymand}\ Range\ R\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ R\ {\isasymand}\ runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}LHS\ {\isacharequal}\ {\isacharquery}RHS{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Domain{\isacharunderscore}empty{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Range\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{note}\isamarkupfalse%
\ runiq{\isacharunderscore}emptyrel\isanewline
\ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}{\isacharbraceleft}{\isacharbraceright}{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ runiq{\isacharunderscore}emptyrel{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymand}\ Range\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymand}\ runiq\ {\isacharparenleft}{\isacharbraceleft}{\isacharbraceright}{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymin}\ {\isacharbraceleft}R\ {\isachardot}\ Domain\ R\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymand}\ Range\ R\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ R\ {\isasymand}\ runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ CollectI{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}LHS\ {\isasymsubseteq}\ {\isacharquery}RHS{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ empty{\isacharunderscore}subsetI\ insert{\isacharunderscore}subset\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}RHS\ {\isasymsubseteq}\ {\isacharquery}LHS{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ R\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ {\isacharbraceleft}R{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharparenleft}{\isacharprime}a\ {\isasymtimes}\ {\isacharprime}b{\isacharparenright}\ set{\isacharparenright}\ {\isachardot}\ Domain\ R\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymand}\ Range\ R\ {\isasymsubseteq}\ Y\ {\isasymand}\ runiq\ R\ {\isasymand}\ runiq\ {\isacharparenleft}R{\isasyminverse}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isasymin}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Domain{\isacharunderscore}empty{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Cons\ x\ xs{\isacharparenright}\isanewline
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ non{\isacharunderscore}empty\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ Y{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ card{\isacharunderscore}ge{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}finite{\isacharparenright}\isanewline
\ \ \isanewline
\ \ \isanewline
\isanewline
\ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ {\isacharparenleft}x\ {\isacharhash}\ xs{\isacharparenright}\ Y{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isasymUnion}\ {\isacharbraceleft}\ set\ {\isacharparenleft}sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}alg\ R\ x\ Y{\isacharparenright}\ {\isacharbar}\ R\ {\isachardot}\ R\ {\isasymin}\ injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ Y\ {\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Cons{\isachardot}hyps\ Cons{\isachardot}prems\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ image{\isacharunderscore}Collect{\isacharunderscore}mem{\isacharparenright}\isanewline
\ \ \isanewline
\ \ \isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isacharequal}\ {\isacharparenleft}{\isasymUnion}\ {\isacharbraceleft}\ sup{\isacharunderscore}rels{\isacharunderscore}from\ R\ x\ Y\ {\isacharbar}\ R\ {\isachardot}\ R\ {\isasymin}\ injections\ {\isacharparenleft}set\ xs{\isacharparenright}\ Y\ {\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacharbackquoteopen}finite\ Y{\isacharbackquoteclose}\ sup{\isacharunderscore}rels{\isacharunderscore}from{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymdots}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ {\isacharparenleft}x\ {\isacharhash}\ xs{\isacharparenright}{\isacharparenright}\ Y{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Cons{\isachardot}prems\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ injections{\isacharunderscore}paste{\isacharparenright}\isanewline
\ \ \isanewline
\ \ \isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Image{\isacharunderscore}within{\isacharunderscore}domain{\isacharprime}{\isacharcolon}\ \isakeyword{fixes}\ x\ R\ \isakeyword{shows}\ {\isachardoublequoteopen}x\ {\isasymin}\ Domain\ R\ {\isacharequal}\ {\isacharparenleft}R\ {\isacharbackquote}{\isacharbackquote}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
