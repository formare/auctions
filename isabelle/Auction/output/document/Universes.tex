%
\begin{isabellebody}%
\def\isabellecontext{Universes}%
%
\isamarkupheader{Sets of injections, partitions, allocations expressed as suitable subsets of the corresponding universes%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Universes\isanewline
\isanewline
\isakeyword{imports}\ \isanewline
{\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Code{\isacharunderscore}Target{\isacharunderscore}Nat{\isachardoublequoteclose}\isanewline
StrictCombinatorialAuction\ \isanewline
MiscTools\isanewline
{\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Indicator{\isacharunderscore}Function{\isachardoublequoteclose}\isanewline
\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isamarkupsection{Preliminary lemmas%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}Y\ {\isasymin}\ set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}alg\ X{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}distinct\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ distinct{\isacharunderscore}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ all{\isacharunderscore}partitions{\isacharunderscore}alg{\isacharunderscore}def\ all{\isacharunderscore}partitions{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg{\isacharprime}\isanewline
\isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}all{\isacharunderscore}partitions\ G\ {\isacharequal}\ set\ {\isacharbackquote}\ {\isacharparenleft}set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}alg\ G{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{6}}{\isadigit{4}}\ all{\isacharunderscore}partitions{\isacharunderscore}alg{\isacharunderscore}def\ all{\isacharunderscore}partitions{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg\isanewline
distinct{\isacharunderscore}sorted{\isacharunderscore}list{\isacharunderscore}of{\isacharunderscore}set\ image{\isacharunderscore}set\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isakeyword{assumes}\ {\isachardoublequoteopen}Y\ {\isasymin}\ set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}alg\ G{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ \isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}injections\ {\isacharparenleft}set\ Y{\isacharparenright}\ N\ {\isacharequal}\ set\ {\isacharparenleft}injections{\isacharunderscore}alg\ Y\ N{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ injections{\isacharunderscore}equiv\ lm{\isadigit{6}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{7}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}l\ {\isasymin}\ set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}distinct\ l{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ all{\isacharunderscore}partitions{\isacharunderscore}list{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ all{\isacharunderscore}partitions{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg{\isacharprime}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{8}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}{\isasymforall}l\ {\isasymin}\ set\ {\isacharparenleft}all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharparenright}{\isachardot}\ set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isacharequal}\ injections\ {\isacharparenleft}set\ l{\isacharparenright}\ N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{7}}\ injections{\isacharunderscore}equiv\ assms\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{6}}{\isadigit{9}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}injections\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\isanewline
set\ {\isacharbrackleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isachardot}\ l\ {\isasymleftarrow}\ all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharbrackright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{6}}{\isadigit{6}}\ lm{\isadigit{6}}{\isadigit{8}}\ lm{\isadigit{6}}{\isadigit{6}}b\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}g{\isadigit{1}}{\isacharequal}all{\isacharunderscore}partitions{\isacharunderscore}list\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}f{\isadigit{2}}{\isacharequal}injections\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}g{\isadigit{2}}{\isacharequal}injections{\isacharunderscore}alg\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}l\ {\isasymin}\ set\ {\isacharparenleft}{\isacharquery}g{\isadigit{1}}\ G{\isacharparenright}{\isachardot}\ set\ {\isacharparenleft}{\isacharquery}g{\isadigit{2}}\ l\ N{\isacharparenright}\ {\isacharequal}\ {\isacharquery}f{\isadigit{2}}\ {\isacharparenleft}set\ l{\isacharparenright}\ N{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{6}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}set\ {\isacharbrackleft}set\ {\isacharparenleft}{\isacharquery}g{\isadigit{2}}\ l\ N{\isacharparenright}{\isachardot}\ l\ {\isacharless}{\isacharminus}\ {\isacharquery}g{\isadigit{1}}\ G{\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharquery}f{\isadigit{2}}\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ set\ {\isacharparenleft}map\ set\ {\isacharparenleft}{\isacharquery}g{\isadigit{1}}\ G{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{6}}{\isadigit{6}}{\isacharparenright}\ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharbraceleft}{\isacharquery}f{\isadigit{2}}\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ all{\isacharunderscore}partitions{\isacharunderscore}paper{\isacharunderscore}equiv{\isacharunderscore}alg\isanewline
\ \ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{0}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}Union\ {\isacharbraceleft}injections\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\isanewline
Union\ {\isacharparenleft}set\ {\isacharbrackleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isachardot}\ l\ {\isasymleftarrow}\ all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}Union\ {\isacharquery}L\ {\isacharequal}\ Union\ {\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}L\ {\isacharequal}\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{6}}{\isadigit{9}}{\isacharparenright}\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\ \isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{0}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}card\ N\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}distinct\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}possibleAllocationsRel\ N\ {\isacharparenleft}set\ G{\isacharparenright}\ {\isacharequal}\ possibleAllocationsAlg{\isadigit{2}}\ N\ G{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L\ {\isacharequal}\ {\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{7}}{\isadigit{0}}\ \isanewline
possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}LL{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ {\isacharbraceleft}injections\ P\ N{\isacharbar}\ P{\isachardot}\ P\ {\isasymin}\ all{\isacharunderscore}partitions\ {\isacharparenleft}set\ G{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}RR{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}set\ {\isacharbrackleft}set\ {\isacharparenleft}injections{\isacharunderscore}alg\ l\ N{\isacharparenright}\ {\isachardot}\ l\ {\isasymleftarrow}\ all{\isacharunderscore}partitions{\isacharunderscore}list\ G{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}LL\ {\isacharequal}\ {\isacharquery}RR{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{7}}{\isadigit{0}}{\isacharparenright}\ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}converse\ {\isacharbackquote}\ {\isacharquery}LL\ {\isacharequal}\ converse\ {\isacharbackquote}\ {\isacharquery}RR{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsection{Definitions of various subsets of \isa{UNIV}.%
}
\isamarkuptrue%
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}isChoice\ R\ {\isacharequal}{\isacharequal}\ {\isasymforall}x{\isachardot}\ R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}x{\isacharbraceright}\ {\isasymsubseteq}\ x{\isachardoublequoteclose}\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}dualOutside\ R\ Y\ {\isacharequal}{\isacharequal}\ R\ {\isacharminus}\ {\isacharparenleft}Domain\ R\ {\isasymtimes}\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{notation}\isamarkupfalse%
\ dualOutside\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharbar}{\isacharminus}{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}\isanewline
\isacommand{notation}\isamarkupfalse%
\ Outside\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isacharminus}{\isacharbar}{\isachardoublequoteclose}\ {\isadigit{7}}{\isadigit{5}}{\isacharparenright}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionsUniverse\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}X{\isachardot}\ is{\isacharunderscore}partition\ X{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionsUniverse\ {\isasymsubseteq}\ Pow\ UNIV{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\ \ \ \ \ \ \ \isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionValuedUniverse\ {\isacharequal}{\isacharequal}\ {\isasymUnion}\ P\ {\isasymin}\ partitionsUniverse{\isachardot}\ Pow\ {\isacharparenleft}UNIV\ {\isasymtimes}\ P{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}partitionValuedUniverse\ {\isasymsubseteq}\ Pow\ {\isacharparenleft}UNIV\ {\isasymtimes}\ {\isacharparenleft}Pow\ UNIV{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}injectionsUniverse\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}R{\isachardot}\ {\isacharparenleft}runiq\ R{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}runiq\ {\isacharparenleft}R{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}allocationsUniverse\ {\isacharequal}{\isacharequal}\ injectionsUniverse\ {\isasyminter}\ partitionValuedUniverse{\isachardoublequoteclose}\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}totalRels\ X\ Y\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}R{\isachardot}\ Domain\ R\ {\isacharequal}\ X\ {\isacharampersand}\ Range\ R\ {\isasymsubseteq}\ Y{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}strictCovers\ G\ {\isacharequal}{\isacharequal}\ Union\ {\isacharminus}{\isacharbackquote}\ {\isacharbraceleft}G{\isacharbraceright}{\isachardoublequoteclose}%
\isamarkupsection{Results about the sets defined in the previous section%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{1}}a{\isacharcolon}\ {\isachardoublequoteopen}partitionsUniverse\ {\isasymsubseteq}\ \ {\isacharbraceleft}P{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharbar}\ P{\isachardot}\ {\isasymInter}P\ {\isasymin}\ {\isacharbraceleft}{\isasymUnion}P{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{4}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharbang}x{\isadigit{1}}\ {\isacharcolon}\ X{\isachardot}\ {\isacharparenleft}x{\isadigit{1}}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharparenleft}{\isacharbang}\ x{\isadigit{2}}\ {\isacharcolon}\ X{\isacharminus}{\isacharbraceleft}x{\isadigit{1}}{\isacharbraceright}{\isachardot}\ x{\isadigit{1}}\ {\isasyminter}\ x{\isadigit{2}}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ X{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{7}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x\ {\isasymin}\ X{\isachardot}\ t\ x\ {\isasymin}\ x{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}isChoice\ {\isacharparenleft}graph\ X\ t{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Image{\isacharunderscore}within{\isacharunderscore}domain{\isacharprime}\ empty{\isacharunderscore}subsetI\ insert{\isacharunderscore}subset\ ll{\isadigit{3}}{\isadigit{3}}\ ll{\isadigit{3}}{\isadigit{7}}\ runiq{\isacharunderscore}wrt{\isacharunderscore}eval{\isacharunderscore}rel\ subset{\isacharunderscore}trans{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}R\ {\isacharbar}{\isacharminus}\ Y\ {\isacharequal}\ {\isacharparenleft}R{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isacharminus}{\isacharbar}\ Y{\isacharparenright}{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}injections{\isacharprime}\ X\ Y\ {\isacharequal}\ injections\ X\ Y{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}injections{\isacharprime}\ X\ Y\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{5}}b{\isacharcolon}\ {\isachardoublequoteopen}injections\ X\ Y\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}injections{\isacharprime}\ X\ Y\ {\isacharequal}\ totalRels\ X\ Y\ {\isasyminter}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{7}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N\ {\isacharampersand}\ Range\ a\ partitions\ G\ {\isacharampersand}\ Domain\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ all{\isacharunderscore}partitions{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{0}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ XX{\isachardoublequoteclose}\ {\isachardoublequoteopen}YY\ {\isasymsubseteq}\ XX{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}XX\ {\isacharminus}\ YY{\isacharparenright}\ partitions\ {\isacharparenleft}{\isasymUnion}\ XX\ {\isacharminus}\ {\isasymUnion}\ YY{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ is{\isacharunderscore}partition{\isacharunderscore}def\ assms\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}xx{\isacharequal}{\isachardoublequoteopen}XX\ {\isacharminus}\ YY{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}X{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ XX{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Y{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}\ YY{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}x{\isacharequal}{\isachardoublequoteopen}{\isacharquery}X\ {\isacharminus}\ {\isacharquery}Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ y\ {\isasymin}\ YY{\isachardot}\ {\isasymforall}\ x{\isasymin}{\isacharquery}xx{\isachardot}\ y\ {\isasyminter}\ x{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}iff\ set{\isacharunderscore}rev{\isacharunderscore}mp{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharquery}xx\ {\isasymsubseteq}\ {\isacharquery}x{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharquery}xx\ {\isacharequal}\ {\isacharquery}x{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ {\isacharquery}xx{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subset{\isacharunderscore}is{\isacharunderscore}partition\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}subset\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}a{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N{\isachardoublequoteclose}\ \isakeyword{shows}\isanewline
{\isachardoublequoteopen}runiq\ a\ {\isacharampersand}\ runiq\ {\isacharparenleft}a{\isasyminverse}{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ partitions\ G\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ Y\ \isakeyword{where}\isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ Y\ N\ {\isacharampersand}\ Y\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ injections{\isacharunderscore}def\ all{\isacharunderscore}partitions{\isacharunderscore}def\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ a{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}a{\isasyminverse}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}Domain\ a{\isacharparenright}\ partitions\ G{\isachardoublequoteclose}\ {\isachardoublequoteopen}Range\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ N{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ injections{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \ assms{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ all{\isacharunderscore}partitions{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymlongleftrightarrow}\isanewline
runiq\ a\ {\isacharampersand}\ runiq\ {\isacharparenleft}a{\isasyminverse}{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}Domain\ a{\isacharparenright}\ partitions\ G\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lll{\isadigit{8}}{\isadigit{1}}a\ lll{\isadigit{8}}{\isadigit{1}}b\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ \isakeyword{assumes}\ {\isachardoublequoteopen}runiq\ {\isacharparenleft}P{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}Range\ {\isacharparenleft}P\ outside\ X{\isacharparenright}\ {\isasyminter}\ Range\ {\isacharparenleft}P\ {\isacharbar}{\isacharbar}\ X{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lll{\isadigit{7}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lll{\isadigit{0}}{\isadigit{1}}\ lll{\isadigit{8}}{\isadigit{5}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharprime}\ G\ N\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{0}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ Range\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}injections\ X\ Y\ {\isacharequal}\ injections{\isacharprime}\ X\ Y{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\isanewline
\isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}all{\isacharunderscore}partitions\ X\ {\isacharequal}\ all{\isacharunderscore}partitions{\isacharprime}\ X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ all{\isacharunderscore}partitions{\isacharunderscore}def\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharprime}\ A\ B\ {\isacharequal}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel\ A\ B{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}A{\isacharequal}{\isacharquery}B{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}B{\isacharequal}{\isasymUnion}\ {\isacharbraceleft}\ injections\ Y\ B\ {\isacharbar}\ Y\ {\isachardot}\ Y\ {\isasymin}\ all{\isacharunderscore}partitions\ A\ {\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}A{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ injections{\isacharunderscore}def\ lm{\isadigit{1}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymsubseteq}\ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Range\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{0}}{\isadigit{9}}\ lm{\isadigit{1}}{\isadigit{0}}\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isasymsupseteq}\ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ N{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}allocations{\isacharunderscore}rel{\isacharunderscore}def\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}converse\ {\isacharbackquote}\ injectionsUniverse\ {\isacharequal}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{7}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N\ {\isacharequal}\ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ N{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{4}}\ lm{\isadigit{1}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{8}}{\isacharcolon}\ {\isachardoublequoteopen}converse{\isacharbackquote}{\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}{\isacharequal}converse{\isacharbackquote}A\ {\isasyminter}\ {\isacharparenleft}converse{\isacharbackquote}B{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ injectionsUniverse\ {\isasyminter}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}A{\isacharequal}{\isachardoublequoteopen}possible{\isacharunderscore}allocations{\isacharunderscore}rel\ G\ N{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}c{\isacharequal}converse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}injectionsUniverse\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}{\isachardoublequoteopen}all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}c{\isacharbackquote}{\isacharquery}A\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}c{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasyminter}\ {\isacharquery}c{\isacharbackquote}\ {\isacharparenleft}{\isacharbraceleft}a{\isachardot}\ {\isacharquery}r\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharquery}d\ a\ {\isasymin}\ {\isacharquery}P{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}c{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasyminter}\ {\isacharbraceleft}aa{\isachardot}\ {\isacharquery}d\ aa\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharquery}r\ aa\ {\isasymin}\ {\isacharquery}P{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharquery}I\ {\isasyminter}\ {\isacharbraceleft}aa{\isachardot}\ {\isacharquery}d\ aa\ {\isasymsubseteq}\ N\ {\isacharampersand}\ {\isacharquery}r\ aa\ {\isasymin}\ {\isacharquery}P{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}c{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G\ {\isacharequal}\ \isanewline
{\isacharparenleft}a\ {\isasymin}\ injectionsUniverse\ {\isacharampersand}\ Domain\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}\ Int{\isacharunderscore}Collect\ Int{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N{\isadigit{1}}\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}N{\isadigit{1}}\ {\isasymunion}\ N{\isadigit{2}}{\isacharparenright}\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ a\ {\isasymsubseteq}\ N{\isadigit{1}}\ {\isasymunion}\ N{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ le{\isacharunderscore}supI{\isadigit{1}}{\isacharparenright}\ \isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}b{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N{\isadigit{1}}\ G\ {\isasymsubseteq}\ possibleAllocationsRel\ {\isacharparenleft}N{\isadigit{1}}\ {\isasymunion}\ N{\isadigit{2}}{\isacharparenright}\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}d\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ subsetI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isakeyword{assumes}\ {\isachardoublequoteopen}x{\isasymnoteq}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymUnion}\ P{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ P{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ P{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}Y\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\isanewline
{\isachardoublequoteopen}X\ {\isasyminter}\ Y\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharequal}\ Y{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}e{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymUnion}\ P{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ P{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ P{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}Y\ {\isasymin}\ P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isachardoublequoteclose}\isanewline
{\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharequal}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}X\ {\isasyminter}\ Y\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymUnion}\ P{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ P{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ P{\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ P{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ {\isacharparenleft}P{\isadigit{1}}\ {\isasymunion}\ P{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{0}}d\ lm{\isadigit{2}}{\isadigit{0}}e\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}Range\ Q\ {\isasymunion}\ {\isacharparenleft}Range\ {\isacharparenleft}P\ outside\ {\isacharparenleft}Domain\ Q{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ Range\ {\isacharparenleft}P\ {\isacharplus}{\isacharasterisk}\ Q{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ paste{\isacharunderscore}def\ Range{\isacharunderscore}Un{\isacharunderscore}eq\ Un{\isacharunderscore}commute\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lll{\isadigit{7}}{\isadigit{7}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}a{\isadigit{2}}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}Range\ a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}Range\ a{\isadigit{2}}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
{\isachardoublequoteopen}Domain\ a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}Domain\ a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymunion}\ a{\isadigit{2}}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ disj{\isacharunderscore}Un{\isacharunderscore}runiq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ Domain{\isacharunderscore}converse\ converse{\isacharunderscore}Un\ mem{\isacharunderscore}Collect{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}R\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ {\isacharparenleft}Range\ R{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ P\ \isakeyword{where}\isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymin}\ partitionsUniverse\ {\isacharampersand}\ R\ {\isasymsubseteq}\ UNIV\ {\isasymtimes}\ P{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Range\ R\ {\isasymsubseteq}\ P{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ subset{\isacharunderscore}is{\isacharunderscore}partition\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
{\isachardoublequoteopen}Domain\ a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}Domain\ a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymunion}\ a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isacharequal}{\isachardoublequoteopen}a{\isadigit{1}}\ {\isasymunion}\ a{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}a{\isadigit{1}}{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}a{\isadigit{2}}{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}injectionsUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}partitionsUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}PV{\isacharequal}partitionValuedUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isacharequal}{\isachardoublequoteopen}{\isacharquery}a{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}partition\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{then}\isamarkupfalse%
\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{2}}{\isadigit{0}}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}\ {\isasymin}\ {\isacharquery}P{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{0}}\ assms\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a\ {\isasymin}\ {\isacharquery}PV{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}\ {\isasymsubseteq}\ Pow\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}empty{\isacharunderscore}left{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}r\ a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{2}}\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a\ {\isasymin}\ {\isacharquery}I{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lll{\isadigit{7}}{\isadigit{7}}c\ assms\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{7}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isacharminus}\ b\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}\ Diff{\isacharunderscore}subset\ converse{\isacharunderscore}mono\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ subrel{\isacharunderscore}runiq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{0}}b{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}a{\isachardot}\ Domain\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharbraceright}\ {\isacharequal}\isanewline
{\isacharparenleft}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}all{\isacharunderscore}partitions\ G{\isacharparenright}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}Domain\ {\isacharminus}{\isacharbackquote}{\isacharparenleft}Pow\ N{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ injectionsUniverse\ {\isasyminter}\ {\isacharparenleft}{\isacharparenleft}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}all{\isacharunderscore}partitions\ G{\isacharparenright}{\isacharparenright}\isanewline
{\isasyminter}\ {\isacharparenleft}Domain\ {\isacharminus}{\isacharbackquote}{\isacharparenleft}Pow\ N{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}\ lm{\isadigit{3}}{\isadigit{0}}b\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}a{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ hide{\isacharunderscore}lams{\isacharparenright}\ lm{\isadigit{1}}{\isadigit{9}}c\ lm{\isadigit{4}}{\isadigit{7}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ \isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ image{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G\ {\isacharequal}\ {\isacharparenleft}a{\isacharcircum}{\isacharminus}{\isadigit{1}}\ {\isasymin}\ injections\ {\isacharparenleft}Range\ a{\isacharparenright}\ N\ {\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}a\ lm{\isadigit{2}}{\isadigit{8}}c\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}\ \isanewline
{\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\ Domain\ a\ {\isasymsubseteq}\ N{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{2}}{\isadigit{8}}a\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}erased{\isacharcomma}\ lifting{\isacharparenright}\ Domain{\isacharunderscore}converse\ converse{\isacharunderscore}converse\ injectionsI\ injections{\isacharunderscore}def\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ order{\isacharunderscore}refl{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}e{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
{\isachardoublequoteopen}Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ lm{\isadigit{1}}{\isadigit{9}}c\ injections{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}erased{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}b{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G\ {\isacharequal}\ {\isacharparenleft}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}\ \isanewline
{\isacharampersand}\ Range\ a\ {\isasymin}\ all{\isacharunderscore}partitions\ G\ {\isacharampersand}\ Domain\ a\ {\isasymsubseteq}\ N{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{8}}d\ lm{\isadigit{2}}{\isadigit{8}}e\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsupseteq}\ injectionsUniverse\ {\isasyminter}\ {\isacharparenleft}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}all{\isacharunderscore}partitions\ G{\isacharparenright}{\isacharparenright}\isanewline
{\isasyminter}\ {\isacharparenleft}Domain\ {\isacharminus}{\isacharbackquote}{\isacharparenleft}Pow\ N{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ subsetI\ Int{\isacharunderscore}assoc\ lm{\isadigit{3}}{\isadigit{0}}\isanewline
\isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\ \isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ injectionsUniverse\ {\isasyminter}\ {\isacharparenleft}Range\ {\isacharminus}{\isacharbackquote}\ {\isacharparenleft}all{\isacharunderscore}partitions\ G{\isacharparenright}{\isacharparenright}\isanewline
{\isasyminter}\ {\isacharparenleft}Domain\ {\isacharminus}{\isacharbackquote}{\isacharparenleft}Pow\ N{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{0}}\ Int{\isacharunderscore}assoc\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isacharminus}\ b\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ subset{\isacharunderscore}is{\isacharunderscore}partition\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isacharminus}\ b\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
lm{\isadigit{2}}{\isadigit{7}}\ lm{\isadigit{3}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ injections\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}\ injectionsI\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ order{\isacharunderscore}refl{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{4}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}Domain\ a{\isacharparenright}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}partition\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}all{\isacharunderscore}partitions\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ \isanewline
assms\ lm{\isadigit{2}}{\isadigit{2}}\ Int{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ a\ {\isasymin}\ {\isacharquery}P\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ all{\isacharunderscore}partitions{\isacharunderscore}def\ \isanewline
\isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ \isanewline
assms\ IntI\ Int{\isacharunderscore}lower{\isadigit{1}}\ equalityE\ lm{\isadigit{1}}{\isadigit{9}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ set{\isacharunderscore}rev{\isacharunderscore}mp\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}X{\isacharbraceright}\ {\isasymin}\ partitionsUniverse\ {\isacharequal}\ {\isacharparenleft}X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}b{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ X{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}runiq\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}X{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ runiq{\isacharunderscore}singleton{\isacharunderscore}rel{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{7}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}\ X{\isacharparenright}{\isacharbraceright}\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ runiq{\isacharunderscore}basic\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}singleton{\isacharunderscore}rel\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{8}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}X{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}x{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{6}}b\ lm{\isadigit{3}}{\isadigit{7}}\ lm{\isadigit{2}}{\isadigit{7}}\ Int{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isakeyword{assumes}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\ Y{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ subset{\isacharunderscore}is{\isacharunderscore}partition\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ PP{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ {\isacharparenleft}Union\ PP{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ {\isacharparenleft}Union\ {\isacharbackquote}\ PP{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}partition\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}U\ PP{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}U\ {\isacharbackquote}\ PP{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}\ X{\isasymin}{\isacharquery}P{\isadigit{1}}{\isachardot}\ {\isasymforall}\ Y\ {\isasymin}\ {\isacharquery}P{\isadigit{1}}{\isachardot}\ {\isacharparenleft}X\ {\isasyminter}\ Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymlongrightarrow}\ X\ {\isasymnoteq}\ Y{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}partition{\isacharunderscore}def\ Int{\isacharunderscore}absorb\ \isanewline
Int{\isacharunderscore}empty{\isacharunderscore}left\ UnionI\ Union{\isacharunderscore}disjoint\ ex{\isacharunderscore}in{\isacharunderscore}conv\ imageE\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}hide{\isacharunderscore}lams{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ X\ Y\ \isacommand{assume}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isasymin}\ {\isacharquery}P{\isadigit{1}}\ {\isacharampersand}\ Y{\isasymin}{\isacharquery}P{\isadigit{1}}\ {\isacharampersand}\ X\ {\isasymnoteq}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ XX\ YY\ \isakeyword{where}\ \isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isacharequal}\ {\isacharquery}U\ XX\ {\isacharampersand}\ Y{\isacharequal}{\isacharquery}U\ YY\ {\isacharampersand}\ XX{\isasymin}PP\ {\isacharampersand}\ YY{\isasymin}PP{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}XX\ {\isasymsubseteq}\ Union\ PP\ {\isacharampersand}\ YY\ {\isasymsubseteq}\ Union\ PP\ {\isacharampersand}\ XX\ {\isasyminter}\ YY\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ {\isadigit{1}}\ is{\isacharunderscore}partition{\isacharunderscore}def\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ Sup{\isacharunderscore}upper\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ x{\isasymin}XX{\isachardot}\ {\isasymforall}\ y{\isasymin}YY{\isachardot}\ x\ {\isasyminter}\ y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ IntI\ empty{\isacharunderscore}iff\ subsetCE{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}X\ {\isasyminter}\ Y{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{0}}\ {\isadigit{1}}\ {\isadigit{2}}\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
{\isasymUnion}\ {\isacharparenleft}Range\ {\isacharparenleft}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}partition\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharequal}partitionsUniverse\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Xi{\isacharequal}{\isachardoublequoteopen}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}b{\isacharequal}{\isachardoublequoteopen}{\isacharquery}Xi\ {\isasymtimes}\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}a\ {\isacharminus}\ {\isacharquery}b{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Yi{\isacharequal}{\isachardoublequoteopen}a{\isacharbackquote}{\isacharbackquote}{\isacharquery}Xi{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Y{\isacharequal}{\isachardoublequoteopen}{\isacharquery}U\ {\isacharquery}Yi{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}A{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isacharquery}Y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isadigit{3}}{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}a{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}A{\isadigit{2}}\ {\isacharminus}\ {\isacharquery}a{\isadigit{3}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharquery}Xi{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}c{\isacharequal}{\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymunion}\ {\isacharquery}a{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}c\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{7}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U{\isacharparenleft}{\isacharquery}r{\isacharparenleft}{\isacharquery}a{\isadigit{1}}{\isasymunion}{\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharequal}{\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Range{\isacharunderscore}Un{\isacharunderscore}eq\ Union{\isacharunderscore}Un{\isacharunderscore}distrib{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U{\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharquery}Xi{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U{\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{have}\isamarkupfalse%
\isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}u\ a\ {\isacharampersand}\ {\isacharquery}u\ {\isacharparenleft}a{\isacharcircum}{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasymsubseteq}\ {\isacharquery}r\ a\ {\isacharampersand}\ {\isacharquery}Yi\ {\isasymsubseteq}\ {\isacharquery}r\ a{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ Int{\isacharunderscore}iff\ lm{\isadigit{2}}{\isadigit{2}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ \isacommand{by}\isamarkupfalse%
\ auto\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}p\ {\isacharquery}Yi{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subset{\isacharunderscore}is{\isacharunderscore}partition\ \isacommand{by}\isamarkupfalse%
\ metis\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ {\isacharquery}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{8}}\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{3}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}a{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymor}\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isasymlongrightarrow}\ {\isacharquery}t{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Un{\isacharunderscore}empty{\isacharunderscore}left\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}\ Un{\isacharunderscore}absorb{\isadigit{2}}\ empty{\isacharunderscore}subsetI{\isacharparenright}\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}a{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymor}\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isasymlongrightarrow}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isacharequal}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}a{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymor}\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isasymlongrightarrow}\ {\isacharquery}thesis{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\isanewline
\ \ \ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}{\isasymnoteq}{\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharquery}a{\isadigit{2}}{\isasymnoteq}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isasymsupseteq}{\isacharbraceleft}{\isacharquery}Y{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Diff{\isacharunderscore}cancel\ Range{\isacharunderscore}insert\ empty{\isacharunderscore}subsetI\ \isanewline
\ \ \ \ insert{\isacharunderscore}Diff{\isacharunderscore}single\ insert{\isacharunderscore}iff\ insert{\isacharunderscore}subset\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}hide{\isacharunderscore}lams{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ \ \ {\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}\ {\isacharequal}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{2}}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasymsubseteq}\ a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}{\isacharquery}d\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}Yi\ {\isasyminter}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ {\isacharquery}Xi{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{0}}\ {\isadigit{1}}\ lm{\isadigit{4}}{\isadigit{0}}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}disjoint{\isacharparenright}\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ {\isacharquery}Yi\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ {\isacharquery}Yi\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharbraceleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ \ \isanewline
IntI\ Int{\isacharunderscore}commute\ empty{\isacharunderscore}iff\ insert{\isacharunderscore}iff\ subsetI\ subset{\isacharunderscore}empty\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharbraceleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}\ {\isasymsubseteq}\ {\isacharquery}r\ a{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}U\ {\isacharbraceleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isachardoublequoteopen}{\isadigit{1}}{\isachardoublequoteclose}\ Outside{\isacharunderscore}def\ subset{\isacharunderscore}is{\isacharunderscore}partition{\isacharparenright}\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}U{\isacharbackquote}{\isacharbraceleft}{\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}{\isacharcomma}\ {\isacharquery}Yi{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ {\isacharbraceleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}{\isacharcomma}\ {\isacharquery}Y{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ x\ {\isasymin}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isachardot}\ {\isasymforall}\ y{\isasymin}{\isacharquery}Yi{\isachardot}\ x\ {\isasymnoteq}\ y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ IntI\ empty{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ x\ {\isasymin}\ {\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isachardot}\ {\isasymforall}\ y{\isasymin}{\isacharquery}Yi{\isachardot}\ x\ {\isasyminter}\ y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ {\isadigit{1}}\ {\isadigit{2}}\ is{\isacharunderscore}partition{\isacharunderscore}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ set{\isacharunderscore}rev{\isacharunderscore}mp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharquery}Y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{2}}\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}v{\isadigit{0}}{\isachardot}\ v{\isadigit{0}}\ {\isasymin}\ Range\ {\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymtimes}\ Range\ a{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}v{\isadigit{1}}{\isachardot}\ v{\isadigit{1}}\ {\isasymin}\ a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymlongrightarrow}\ v{\isadigit{0}}\ {\isasyminter}\ v{\isadigit{1}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ {\isacharbackquoteopen}{\isasymforall}x{\isasymin}Range\ {\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymtimes}\ Range\ a{\isacharparenright}{\isachardot}\ {\isasymforall}y{\isasymin}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardot}\ x\ {\isasyminter}\ y\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isacharbackquoteclose}{\isacharparenright}\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}Range\ {\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymtimes}\ Range\ a{\isacharparenright}\ {\isasyminter}\ {\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{1}}{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ {\isacharparenleft}{\isacharquery}d\ {\isacharquery}a{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{3}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}a{\isadigit{1}}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
\ \ \ \ {\isacharquery}a{\isadigit{2}}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\isanewline
\ \ \ \ {\isasymUnion}Range\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ {\isasymUnion}Range\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ Domain\ {\isacharquery}a{\isadigit{1}}\ {\isasyminter}\ Domain\ {\isacharquery}a{\isadigit{2}}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
{\isacharquery}t{\isadigit{1}}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{2}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{6}}\ {\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\isanewline
{\isachardoublequoteopen}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}p{\isacharequal}is{\isacharunderscore}partition\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ Int{\isacharunderscore}iff\ lm{\isadigit{2}}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a{\isacharbackquote}{\isacharbackquote}X\ {\isasymsubseteq}\ {\isacharquery}r\ a{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}p\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}X{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ subset{\isacharunderscore}is{\isacharunderscore}partition\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a{\isacharbackquote}{\isacharbackquote}X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Union{\isacharunderscore}member\ all{\isacharunderscore}not{\isacharunderscore}in{\isacharunderscore}conv\ no{\isacharunderscore}empty{\isacharunderscore}eq{\isacharunderscore}class{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{5}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
{\isasymUnion}{\isacharparenleft}Range{\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}Range\ {\isacharparenleft}{\isacharparenleft}a\ {\isacharminus}\ {\isacharparenleft}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isasymtimes}{\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\isanewline
{\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
{\isasymUnion}\ {\isacharparenleft}Range\ {\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\isanewline
presburger\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}\ {\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharparenleft}i{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ \isanewline
{\isasymUnion}{\isacharparenleft}Range{\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{3}}b\ lm{\isadigit{4}}{\isadigit{5}}b\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}{\isacharparenleft}Range{\isacharparenleft}{\isacharparenleft}a\ outside\ {\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}{\isacharparenleft}Range\ a{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{have}\isamarkupfalse%
\ \isanewline
{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}t{\isadigit{1}}\ {\isacharampersand}\ {\isacharquery}t{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}b\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse\ {\isasymlongrightarrow}\ a\ {\isacharminus}{\isacharbar}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{3}}b\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isacharminus}{\isacharbar}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isachardoublequoteopen}{\isadigit{0}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isacharminus}{\isacharbar}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ allocationsUniverse\ {\isasymand}\ {\isasymUnion}Range\ {\isacharparenleft}a\ {\isacharminus}{\isacharbar}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharparenleft}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a\ {\isacharbackquote}{\isacharbackquote}\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymUnion}Range\ a{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isadigit{0}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ lm{\isadigit{4}}{\isadigit{3}}b{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{5}}\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}condition{\isadigit{1}}\ b\ i\ {\isacharequal}{\isacharequal}\ {\isacharparenleft}{\isasymforall}\ t\ t{\isacharprime}{\isachardot}\ {\isacharparenleft}trivial\ t\ {\isacharampersand}\ trivial\ t{\isacharprime}\ {\isacharampersand}\ Union\ t\ {\isasymsubseteq}\ Union\ t{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\isanewline
setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}t{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}t{\isacharprime}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}condition{\isadigit{1}}b\ b\ i\ {\isacharequal}{\isacharequal}\ {\isasymforall}\ X\ Y{\isachardot}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}X{\isacharbraceright}{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}X\ {\isasymunion}\ Y{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{6}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}condition{\isadigit{1}}\ b\ i{\isachardoublequoteclose}\ {\isachardoublequoteopen}runiq\ a{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharparenleft}a\ outside\ X{\isacharparenright}{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}R{\isacharequal}{\isachardoublequoteopen}a\ outside\ X{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}Xi{\isacharequal}{\isachardoublequoteopen}X\ {\isasymunion}{\isacharquery}I{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{1}}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharquery}I{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}t{\isadigit{2}}{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharquery}U\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharquery}Xi{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharquery}I{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharquery}I{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharquery}I{\isacharparenright}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharquery}I{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}U\ {\isacharquery}t{\isadigit{1}}\ {\isasymsubseteq}\ {\isacharquery}U\ {\isacharquery}t{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}u\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isasymsubseteq}\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}u\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ subrel{\isacharunderscore}runiq\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharquery}t{\isadigit{1}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ runiq{\isacharunderscore}alt{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharquery}t{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ trivial{\isacharunderscore}singleton{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{8}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ injectionsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ \ lm{\isadigit{1}}{\isadigit{9}}\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{9}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ partitionValuedUniverse{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{7}}\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ allocationsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{8}}\ lm{\isadigit{4}}{\isadigit{9}}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ mono{\isacharunderscore}tags{\isacharparenright}\ inf{\isachardot}bounded{\isacharunderscore}iff{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ mm{\isadigit{4}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}XX\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ Range\ XX{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
mem{\isacharunderscore}Collect{\isacharunderscore}eq\ no{\isacharunderscore}empty{\isacharunderscore}eq{\isacharunderscore}class\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ mm{\isadigit{4}}{\isadigit{5}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ Range\ a{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mm{\isadigit{4}}{\isadigit{5}}\ \isanewline
lm{\isadigit{5}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ mm{\isadigit{6}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}Range\ a\ {\isasymsubseteq}\ Pow\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{7}}\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ subset{\isacharunderscore}Pow{\isacharunderscore}Union{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isacommand{corollary}\isamarkupfalse%
\ mm{\isadigit{6}}{\isadigit{3}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}Domain\ a\ {\isasymsubseteq}\ N\ {\isacharampersand}\ Range\ a\ {\isasymsubseteq}\ Pow\ G\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\isanewline
assms\ mm{\isadigit{6}}{\isadigit{3}}\ insert{\isacharunderscore}Diff{\isacharunderscore}single\ mm{\isadigit{4}}{\isadigit{5}}b\ subset{\isacharunderscore}insert\ lm{\isadigit{4}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ metis%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ mm{\isadigit{6}}{\isadigit{3}}c{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ {\isasymsubseteq}\ N\ {\isasymtimes}\ {\isacharparenleft}Pow\ G\ {\isacharminus}\ {\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mm{\isadigit{6}}{\isadigit{3}}b\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isacommand{corollary}\isamarkupfalse%
\ mm{\isadigit{6}}{\isadigit{3}}e{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ Pow\ {\isacharparenleft}N{\isasymtimes}{\isacharparenleft}Pow\ G{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ mm{\isadigit{6}}{\isadigit{3}}c\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{1}}{\isacharcolon}\ \isakeyword{assumes}\ \ \isanewline
{\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isanewline
{\isachardoublequoteopen}i{\isasymin}N{\isacharminus}X{\isachardoublequoteclose}\ \isanewline
{\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}R{\isacharequal}{\isachardoublequoteopen}a\ outside\ X{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{5}}{\isadigit{0}}\ \ set{\isacharunderscore}rev{\isacharunderscore}mp\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}i\ {\isasymnotin}\ X{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharequal}\ {\isacharquery}d\ a\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharminus}\ X{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ allocationsUniverse\ {\isacharampersand}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ {\isacharquery}aa{\isacharparenright}\ {\isacharequal}\ {\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{4}}{\isadigit{3}}c{\isacharparenright}\ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ {\isacharquery}aa{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ mono{\isacharunderscore}tags{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ {\isacharquery}aa\ {\isasymunion}\ {\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ \ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{1}}{\isadigit{9}}d{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharequal}\ {\isacharquery}d\ {\isacharquery}aa\ {\isasymunion}\ {\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ a\ {\isacharminus}\ X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}{\isacharquery}d\ a\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharminus}\ X{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}d\ a\ {\isasymsubseteq}\ N{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ lm{\isadigit{1}}{\isadigit{9}}c\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharquery}d\ a\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}\ {\isacharminus}\ X{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}N\ {\isacharminus}\ X{\isacharparenright}\ {\isacharequal}\ N\ {\isacharminus}\ X{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}N\ {\isacharminus}\ X{\isacharparenright}\ {\isacharparenleft}{\isacharquery}U\ {\isacharparenleft}{\isacharquery}r\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}b\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ no{\isacharunderscore}types{\isacharparenright}\ in{\isacharunderscore}mono{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ \isanewline
{\isachardoublequoteopen}condition{\isadigit{1}}\ {\isacharparenleft}b{\isacharcolon}{\isacharcolon}{\isacharunderscore}\ {\isacharequal}{\isachargreater}\ real{\isacharparenright}\ i{\isachardoublequoteclose}\ \isanewline
{\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isanewline
{\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
{\isachardoublequoteopen}finite\ a{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}a\ outside\ X{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}R{\isacharequal}{\isachardoublequoteopen}a\ outside\ X{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}I{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}U{\isacharequal}Union\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}u{\isacharequal}runiq\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}r{\isacharequal}Range\ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}d{\isacharequal}Domain\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ injectionsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ fast\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharquery}u\ a{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isasymsubseteq}\ a\ {\isacharampersand}\ {\isacharquery}R{\isacharminus}{\isacharminus}i\ {\isasymsubseteq}\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}u\ {\isacharparenleft}{\isacharquery}R{\isacharminus}{\isacharminus}i{\isacharparenright}\ {\isacharampersand}\ {\isacharquery}u\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ finite{\isacharunderscore}subset\ subrel{\isacharunderscore}runiq\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ assms{\isacharparenleft}{\isadigit{4}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}trivial\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ runiq{\isacharunderscore}def\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ ll{\isadigit{4}}{\isadigit{0}}\ trivial{\isacharunderscore}singleton{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}X{\isachardot}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}X{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ outside{\isacharunderscore}reduces{\isacharunderscore}domain\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isacharquery}R{\isacharminus}{\isacharminus}i{\isacharparenright}\ {\isacharampersand}\ finite\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}\ {\isacharampersand}\ \isanewline
\ \ finite\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isacharampersand}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasyminter}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharequal}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ Outside{\isacharunderscore}def\ lm{\isadigit{5}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ fast\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isacharequal}\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ l{\isadigit{3}}{\isadigit{9}}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}R\ {\isacharequal}\ setsum\ b\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isacharplus}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ setsum{\isachardot}union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharparenright}\ setsum{\isachardot}union{\isacharunderscore}disjoint{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharparenleft}{\isacharquery}R{\isacharbackquote}{\isacharbackquote}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{6}}\ \isanewline
\ \ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}R\ {\isasymle}\ setsum\ b\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i{\isacharparenright}\ {\isacharplus}\ setsum\ b\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}{\isasymtimes}{\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ setsum\ b\ {\isacharparenleft}{\isacharquery}R\ {\isacharminus}{\isacharminus}\ i\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isacharquery}U{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ setsum{\isachardot}union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isacharequal}\ setsum\ b\ {\isacharquery}aa{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ ll{\isadigit{5}}{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{5}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}XX\ {\isasymin}\ all{\isacharunderscore}partitions\ X{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}finite\ XX{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ \isanewline
all{\isacharunderscore}partitions{\isacharunderscore}def\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ finite{\isacharunderscore}UnionD\ mem{\isacharunderscore}Collect{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{8}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}finite\ a{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{5}}{\isadigit{7}}\ rev{\isacharunderscore}finite{\isacharunderscore}subset\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{2}}{\isadigit{8}}b\ lm{\isadigit{5}}{\isadigit{5}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{9}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}possibleAllocationsRel\ N\ G{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}Pow{\isacharparenleft}N{\isasymtimes}{\isacharparenleft}Pow\ G{\isacharminus}{\isacharbraceleft}{\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ finite{\isacharunderscore}Pow{\isacharunderscore}iff\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ mm{\isadigit{6}}{\isadigit{3}}e\ rev{\isacharunderscore}finite{\isacharunderscore}subset\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{5}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}condition{\isadigit{1}}\ {\isacharparenleft}b{\isacharcolon}{\isacharcolon}{\isacharunderscore}\ {\isacharequal}{\isachargreater}\ real{\isacharparenright}\ i{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ {\isachardoublequoteopen}i{\isasymin}N{\isacharminus}X{\isachardoublequoteclose}\ \isanewline
{\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ N{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ G{\isachardoublequoteclose}\ \isakeyword{shows}\isanewline
{\isachardoublequoteopen}Max\ {\isacharparenleft}{\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isacharparenright}\ {\isasymge}\ setsum\ b\ {\isacharparenleft}a\ outside\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{let}\isamarkupfalse%
\ {\isacharquery}aa{\isacharequal}{\isachardoublequoteopen}a\ outside\ {\isacharparenleft}X\ {\isasymunion}\ {\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharbraceleft}i{\isacharbraceright}\ {\isasymtimes}\ {\isacharbraceleft}{\isasymUnion}{\isacharparenleft}a{\isacharbackquote}{\isacharbackquote}{\isacharparenleft}X{\isasymunion}{\isacharbraceleft}i{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}condition{\isadigit{1}}\ {\isacharparenleft}b{\isacharcolon}{\isacharcolon}{\isacharunderscore}\ {\isacharequal}{\isachargreater}\ real{\isacharparenright}\ i{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ lm{\isadigit{5}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Domain\ a\ {\isasyminter}\ X\ {\isasymnoteq}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{5}}{\isadigit{8}}\ \isacommand{by}\isamarkupfalse%
\ metis\ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \isanewline
{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}setsum\ b\ {\isacharparenleft}a\ outside\ X{\isacharparenright}\ {\isasymle}\ setsum\ b\ {\isacharquery}aa{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ lm{\isadigit{5}}{\isadigit{2}}{\isacharparenright}\isanewline
\isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}aa\ {\isasymin}\ possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ {\isacharparenleft}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{5}}{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}\ {\isacharparenleft}Range\ a{\isacharparenright}\ {\isacharequal}\ G{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{4}}{\isadigit{7}}\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}aa\ {\isasymin}\ {\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ imageI{\isacharparenright}\isanewline
\isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{5}}{\isadigit{9}}\ assms{\isacharparenleft}{\isadigit{5}}{\isacharcomma}{\isadigit{6}}{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ finite{\isacharunderscore}Diff\ finite{\isacharunderscore}imageI{\isacharparenright}\isanewline
\isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}setsum\ b\ {\isacharquery}aa\ {\isasymle}\ Max\ {\isacharparenleft}{\isacharparenleft}setsum\ b{\isacharparenright}{\isacharbackquote}{\isacharparenleft}possibleAllocationsRel\ {\isacharparenleft}N{\isacharminus}X{\isacharparenright}\ G{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ linarith\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isasymin}\ partitionValuedUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}\ {\isasymnotin}\ Range\ f{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lm{\isadigit{2}}{\isadigit{2}}\ no{\isacharunderscore}empty{\isacharunderscore}eq{\isacharunderscore}class{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ mm{\isadigit{3}}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ XX{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}X\ {\isasymin}\ XX{\isachardot}\ finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ XX{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}\ {\isacharequal}\ setsum\ card\ XX{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}partition{\isacharunderscore}def\ card{\isacharunderscore}Union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ mm{\isadigit{3}}{\isadigit{3}}b{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}XX\ partitions\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ XX{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymUnion}\ XX{\isacharparenright}\ {\isacharequal}\ setsum\ card\ XX{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ mm{\isadigit{3}}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ lll{\isadigit{4}}{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ setsum{\isacharunderscore}Union{\isacharunderscore}disjoint{\isacharunderscore}{\isadigit{4}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}A{\isasymin}C{\isachardot}\ finite\ A{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}A{\isasymin}C{\isachardot}\ {\isasymforall}B{\isasymin}C{\isachardot}\ A\ {\isasymnoteq}\ B\ {\isasymlongrightarrow}\ A\ Int\ B\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}setsum\ f\ {\isacharparenleft}Union\ C{\isacharparenright}\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ C{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsum{\isachardot}Union{\isacharunderscore}disjoint\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsum{\isacharunderscore}Union{\isacharunderscore}disjoint{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x{\isasymin}X{\isachardot}\ finite\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}partition\ X{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}setsum\ f\ {\isacharparenleft}{\isasymUnion}\ X{\isacharparenright}\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsum{\isacharunderscore}Union{\isacharunderscore}disjoint{\isacharunderscore}{\isadigit{4}}\ is{\isacharunderscore}partition{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsum{\isacharunderscore}Union{\isacharunderscore}disjoint{\isacharunderscore}{\isadigit{3}}{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymforall}x{\isasymin}X{\isachardot}\ finite\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ partitions\ XX{\isachardoublequoteclose}\ \isakeyword{shows}\isanewline
{\isachardoublequoteopen}setsum\ f\ XX\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ setsum{\isacharunderscore}Union{\isacharunderscore}disjoint{\isacharunderscore}{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ setsum{\isacharunderscore}associativity{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ partitions\ x{\isachardoublequoteclose}\ \isakeyword{shows}\isanewline
{\isachardoublequoteopen}setsum\ f\ x\ {\isacharequal}\ setsum\ {\isacharparenleft}setsum\ f{\isacharparenright}\ X{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ setsum{\isacharunderscore}Union{\isacharunderscore}disjoint{\isacharunderscore}{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ lll{\isadigit{4}}{\isadigit{1}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}e{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a{\isasymin}allocationsUniverse{\isachardoublequoteclose}\ {\isachardoublequoteopen}Domain\ a{\isasymsubseteq}N{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymUnion}Range\ a{\isacharequal}G{\isachardoublequoteclose}\ \isakeyword{shows}\ \isanewline
{\isachardoublequoteopen}a\ {\isasymin}possibleAllocationsRel\ N\ G{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ lm{\isadigit{1}}{\isadigit{9}}c\ lm{\isadigit{3}}{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}a{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}allocationsUniverse{\isasyminter}{\isacharbraceleft}a{\isachardot}\ Domain\ a{\isasymsubseteq}N\ {\isacharampersand}\ {\isasymUnion}Range\ a{\isacharequal}G{\isacharbraceright}{\isacharparenright}{\isasymsubseteq}possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{1}}{\isadigit{9}}e\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}f{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a{\isasymsubseteq}N{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lm{\isadigit{4}}{\isadigit{7}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}g{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ {\isasymUnion}Range\ a{\isacharequal}G{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ lm{\isadigit{4}}{\isadigit{7}}\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ subsetI\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis{\isacharparenleft}mono{\isacharunderscore}tags{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymUnion}\ Range\ a\ {\isacharequal}\ G{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ is{\isacharunderscore}partition{\isacharunderscore}of{\isacharunderscore}def\ lm{\isadigit{4}}{\isadigit{7}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}e{\isacharcolon}\ {\isachardoublequoteopen}\isanewline
possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ \ allocationsUniverse\ {\isacharampersand}\isanewline
possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ {\isacharbraceleft}a{\isachardot}\ Domain\ a{\isasymsubseteq}N\ {\isacharampersand}\ {\isasymUnion}Range\ a{\isacharequal}G{\isacharbraceright}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}f\ nn{\isadigit{2}}{\isadigit{4}}g\isanewline
conj{\isacharunderscore}subset{\isacharunderscore}def\ lm{\isadigit{5}}{\isadigit{0}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}b{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isasymsubseteq}\ allocationsUniverse{\isasyminter}{\isacharbraceleft}a{\isachardot}\ Domain\ a{\isasymsubseteq}N\ {\isacharampersand}\ {\isasymUnion}Range\ a{\isacharequal}G{\isacharbraceright}{\isachardoublequoteclose}\isanewline
{\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isadigit{1}}\ {\isasyminter}\ {\isacharquery}R{\isadigit{2}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isadigit{1}}\ {\isacharampersand}\ {\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ nn{\isadigit{2}}{\isadigit{4}}e{\isacharparenright}\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\ \isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}possibleAllocationsRel\ N\ G\ {\isacharequal}\ {\isacharparenleft}allocationsUniverse{\isasyminter}{\isacharbraceleft}a{\isachardot}\ Domain\ a{\isasymsubseteq}N\ {\isacharampersand}\ {\isasymUnion}Range\ a{\isacharequal}G{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
{\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}L\ {\isacharequal}\ {\isacharquery}R{\isachardoublequoteclose}{\isacharparenright}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}L\ {\isasymsubseteq}\ {\isacharquery}R{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}b\ \isacommand{by}\isamarkupfalse%
\ metis\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}R\ {\isasymsubseteq}\ {\isacharquery}L{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}a\ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}c{\isacharcolon}\ {\isachardoublequoteopen}b\ {\isasymin}\ possibleAllocationsRel\ N\ G{\isacharequal}{\isacharparenleft}b{\isasymin}allocationsUniverse{\isacharampersand}\ Domain\ b{\isasymsubseteq}N\ {\isacharampersand}\ {\isasymUnion}Range\ b\ {\isacharequal}\ G{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ nn{\isadigit{2}}{\isadigit{4}}\ Int{\isacharunderscore}Collect\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{corollary}\isamarkupfalse%
\ lm{\isadigit{3}}{\isadigit{5}}d{\isacharcolon}\ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}a\ outside\ X\ {\isasymin}\ allocationsUniverse{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ Outside{\isacharunderscore}def\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}lifting{\isacharcomma}\ mono{\isacharunderscore}tags{\isacharparenright}\ lm{\isadigit{3}}{\isadigit{5}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
